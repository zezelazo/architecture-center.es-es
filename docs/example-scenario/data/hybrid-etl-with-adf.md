---
title: Extracción, transformación y carga de datos híbrida con instancias locales ya existentes de SQL Server Integration Services y Azure Data Factory
description: Extracción, transformación y carga de datos híbrida con implementaciones locales ya existentes de SQL Server Integration Services (SSIS) y Azure Data Factory
author: alhieng
ms.date: 9/20/2018
ms.custom: tsp-team
ms.openlocfilehash: cc6c2bfe85dc0d1eb8ad29e044611f1e435810c3
ms.sourcegitcommit: 4ba3304eebaa8c493c3e5307bdd9d723cd90b655
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 12/12/2018
ms.locfileid: "53306796"
---
# <a name="hybrid-etl-with-existing-on-premises-ssis-and-azure-data-factory"></a><span data-ttu-id="aff28-103">Extracción, transformación y carga de datos híbrida con instancias locales ya existentes de SQL Server Integration Services y Azure Data Factory</span><span class="sxs-lookup"><span data-stu-id="aff28-103">Hybrid ETL with existing on-premises SSIS and Azure Data Factory</span></span>

<span data-ttu-id="aff28-104">Las organizaciones que van a migrar sus bases de datos de SQL Server a la nube podrán ver el enorme ahorro de costos, las mejoras de rendimiento y las mayores flexibilidad y escalabilidad.</span><span class="sxs-lookup"><span data-stu-id="aff28-104">Organizations that migrate their SQL Server databases to the cloud can realize tremendous cost savings, performance gains, added flexibility, and greater scalability.</span></span> <span data-ttu-id="aff28-105">Sin embargo, adaptar los procesos existentes de extracción, transformación y carga (ETL) creados con SQL Server Integration Services (SSIS) puede resultar un obstáculo para la migración.</span><span class="sxs-lookup"><span data-stu-id="aff28-105">However, reworking existing extract, transform, and load (ETL) processes built with SQL Server Integration Services (SSIS) can be a migration roadblock.</span></span> <span data-ttu-id="aff28-106">En otros casos, el proceso de carga de datos requiere una lógica compleja o componentes específicos de herramientas de datos que aún no se admiten en la versión 2 de Azure Data Factory (ADF).</span><span class="sxs-lookup"><span data-stu-id="aff28-106">In other cases, the data load process requires complex logic and/or specific data tool components that are not yet supported by Azure Data Factory v2 (ADF).</span></span> <span data-ttu-id="aff28-107">Entre las funcionalidades SSIS que se utilizan frecuentemente están las transformaciones de búsqueda y agrupación aproximada, la captura de datos modificados (CDC), las dimensiones de cambio lento (SCD) y los servicios de calidad de datos (DQS).</span><span class="sxs-lookup"><span data-stu-id="aff28-107">Commonly used SSIS capabilities include Fuzzy Lookup and Fuzzy Grouping transformations, Change Data Capture (CDC), Slowly Changing Dimensions (SCD), and Data Quality Services (DQS).</span></span>

<span data-ttu-id="aff28-108">Para facilitar una migración mediante lift-and-shift de una base de datos SQL existente, lo más adecuado puede ser un enfoque ETL híbrido.</span><span class="sxs-lookup"><span data-stu-id="aff28-108">To facilitate a lift-and-shift migration of an existing SQL database, a hybrid ETL approach may be the most suitable option.</span></span> <span data-ttu-id="aff28-109">Un enfoque híbrido usa ADF como el motor de orquestación principal, pero continúa aprovechando los paquetes SSIS existentes para limpiar los datos y trabajar con los recursos locales.</span><span class="sxs-lookup"><span data-stu-id="aff28-109">A hybrid approach uses ADF as the primary orchestration engine, but continues to leverage existing SSIS packages to clean data and work with on-premise resources.</span></span> <span data-ttu-id="aff28-110">Este enfoque utiliza el entorno de ejecución de integración de SQL Server en ADF para habilitar la migración mediante lift-and-shift de las bases de datos existentes a la nube, usando el código existente y los paquetes SSIS.</span><span class="sxs-lookup"><span data-stu-id="aff28-110">This approach uses the ADF SQL Server Integrated Runtime (IR) to enable a lift-and-shift of existing databases into the cloud, while using existing code and SSIS packages.</span></span>

<span data-ttu-id="aff28-111">Este escenario de ejemplo es aplicable a las organizaciones que van a trasladar las bases de datos a la nube y están pensando en utilizar ADF como motor de ETL principal en la nube durante la incorporación de los paquetes SSIS existentes a su nuevo flujo de trabajo de datos en la nube.</span><span class="sxs-lookup"><span data-stu-id="aff28-111">This example scenario is relevant to organizations that are moving databases to the cloud and are considering using ADF as their primary cloud-based ETL engine while incorporating existing SSIS packages into their new cloud data workflow.</span></span> <span data-ttu-id="aff28-112">Muchas organizaciones han realizado grandes inversiones en el desarrollo de paquetes ETL SSIS para tareas específicas de datos.</span><span class="sxs-lookup"><span data-stu-id="aff28-112">Many organizations have significant invested in developing SSIS ETL packages for specific data tasks.</span></span> <span data-ttu-id="aff28-113">Volver a escribir estos paquetes puede resultar desalentador.</span><span class="sxs-lookup"><span data-stu-id="aff28-113">Rewriting these packages can be daunting.</span></span> <span data-ttu-id="aff28-114">Además, muchos de los paquetes de código existentes tienen dependencias de recursos locales, lo que impide la migración a la nube.</span><span class="sxs-lookup"><span data-stu-id="aff28-114">Also, many existing code packages have dependencies on local resources, preventing migration to the cloud.</span></span>

<span data-ttu-id="aff28-115">ADF permite a los clientes aprovechar las ventajas de sus paquetes ETL existentes, lo que reduce las futuras inversiones en el desarrollo de ETL en el entorno local.</span><span class="sxs-lookup"><span data-stu-id="aff28-115">ADF lets customers take advantage of their existing ETL packages while limiting further investment in on-premises ETL development.</span></span> <span data-ttu-id="aff28-116">En este ejemplo se describen posibles casos sobre cómo usar Azure Data Factory v2 para aprovechar los paquetes SSIS existentes como parte de un nuevo flujo de datos en la nube.</span><span class="sxs-lookup"><span data-stu-id="aff28-116">This example discusses potential use cases for leveraging existing SSIS packages as part of a new cloud data workflow using Azure Data Factory v2.</span></span>

## <a name="potential-use-cases"></a><span data-ttu-id="aff28-117">Posibles casos de uso</span><span class="sxs-lookup"><span data-stu-id="aff28-117">Potential use cases</span></span>

<span data-ttu-id="aff28-118">Tradicionalmente, SSIS ha sido la herramienta ETL preferida por muchos profesionales de datos de SQL Server para la transformación y carga de datos.</span><span class="sxs-lookup"><span data-stu-id="aff28-118">Traditionally, SSIS has been the ETL tool of choice for many SQL Server data professionals for data transformation and loading.</span></span> <span data-ttu-id="aff28-119">A veces, se han utilizado características específicas de SSIS o componentes de terceros para acelerar las labores de desarrollo.</span><span class="sxs-lookup"><span data-stu-id="aff28-119">Sometimes, specific SSIS features or third-party plugging components have been used to accelerate the development effort.</span></span> <span data-ttu-id="aff28-120">Reemplazar o volver a desarrollar estos paquetes podría no ser viable, lo que impide que los clientes puedan migrar sus bases de datos a la nube.</span><span class="sxs-lookup"><span data-stu-id="aff28-120">Replacement or redevelopment of these packages may not be an option, which prevents customers from migrating their databases to the cloud.</span></span> <span data-ttu-id="aff28-121">Los clientes buscan enfoques de bajo impacto para migrar sus bases de datos existentes a la nube y sacar partido de sus paquetes SSIS existentes.</span><span class="sxs-lookup"><span data-stu-id="aff28-121">Customers are looking for low impact approaches to migrating their existing databases to the cloud and taking advantage of their existing SSIS packages.</span></span>

<span data-ttu-id="aff28-122">A continuación se enumeran varios posibles casos de uso en el entorno local:</span><span class="sxs-lookup"><span data-stu-id="aff28-122">Several potential on-premises use cases are listed below:</span></span>

* <span data-ttu-id="aff28-123">Cargar los registros de enrutador de red a una base de datos para su análisis.</span><span class="sxs-lookup"><span data-stu-id="aff28-123">Loading network router logs to a database for analysis.</span></span>
* <span data-ttu-id="aff28-124">Preparar los datos de empleo de recursos humanos para informes analíticos.</span><span class="sxs-lookup"><span data-stu-id="aff28-124">Preparing human resources employment data for analytical reporting.</span></span>
* <span data-ttu-id="aff28-125">Cargar datos de productos y ventas en un almacén de datos para la previsión de ventas.</span><span class="sxs-lookup"><span data-stu-id="aff28-125">Loading product and sales data into a data warehouse for sales forecasting.</span></span>
* <span data-ttu-id="aff28-126">Automatizar la carga de los almacenes de datos operativos o de los almacenamientos de datos para finanzas y contabilidad.</span><span class="sxs-lookup"><span data-stu-id="aff28-126">Automating loading of operational data stores or data warehouses for finance and accounting.</span></span>

## <a name="architecture"></a><span data-ttu-id="aff28-127">Arquitectura</span><span class="sxs-lookup"><span data-stu-id="aff28-127">Architecture</span></span>

![Introducción a la arquitectura de un proceso ETL híbrido mediante Azure Data Factory][architecture-diagram]

1. <span data-ttu-id="aff28-129">Los datos se obtienen de Blob Storage a Data Factory.</span><span class="sxs-lookup"><span data-stu-id="aff28-129">Data is sourced from Blob storage into Data Factory.</span></span>
2. <span data-ttu-id="aff28-130">La canalización de Data Factory invoca un procedimiento almacenado para ejecutar un trabajo de SSIS hospedado en el entorno local mediante el entorno de ejecución de integración.</span><span class="sxs-lookup"><span data-stu-id="aff28-130">The Data Factory pipeline invokes a stored procedure to execute an SSIS job hosted on-premises via the Integrated Runtime.</span></span>
3. <span data-ttu-id="aff28-131">Los trabajos de limpieza de datos se ejecutan para preparar los datos para el consumo en niveles inferiores.</span><span class="sxs-lookup"><span data-stu-id="aff28-131">The data cleansing jobs are executed to prepare the data for downstream consumption.</span></span>
4. <span data-ttu-id="aff28-132">Una vez que la tarea de limpieza de datos se completa correctamente, se ejecuta una tarea de copia para cargar los datos limpios en Azure.</span><span class="sxs-lookup"><span data-stu-id="aff28-132">Once the data cleansing task completes successfully, a copy task is executed to load the clean data into Azure.</span></span>
5. <span data-ttu-id="aff28-133">A continuación, los datos limpios se cargan en tablas en SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="aff28-133">The clean data is then loaded into tables in the SQL Data Warehouse.</span></span>

### <a name="components"></a><span data-ttu-id="aff28-134">Componentes</span><span class="sxs-lookup"><span data-stu-id="aff28-134">Components</span></span>

* <span data-ttu-id="aff28-135">Se utiliza [Blob Storage][docs-blob-storage] para almacenar archivos y como origen de Data Factory para recuperar los datos.</span><span class="sxs-lookup"><span data-stu-id="aff28-135">[Blob storage][docs-blob-storage] is used to store files and as a source for Data Factory to retrieve data.</span></span>
* <span data-ttu-id="aff28-136">[SQL Server Integration Services][docs-ssis] contiene los paquetes ETL locales que se usan para ejecutar cargas de trabajo específicas de la tarea.</span><span class="sxs-lookup"><span data-stu-id="aff28-136">[SQL Server Integration Services][docs-ssis] contains the on-premises ETL packages used to execute task-specific workloads.</span></span>
* <span data-ttu-id="aff28-137">[Azure Data Factory][docs-data-factory] es el motor de orquestación en la nube que toma los datos de varios orígenes y los combina, los organiza y los carga en un almacenamiento de datos.</span><span class="sxs-lookup"><span data-stu-id="aff28-137">[Azure Data Factory][docs-data-factory] is the cloud orchestration engine that takes data from multiple sources and combines, orchestrates, and loads the data into a data warehouse.</span></span>
* <span data-ttu-id="aff28-138">[SQL Data Warehouse][docs-sql-data-warehouse] centraliza los datos en la nube para facilitar el acceso mediante consultas SQL ANSI estándar.</span><span class="sxs-lookup"><span data-stu-id="aff28-138">[SQL Data Warehouse][docs-sql-data-warehouse] centralizes data in the cloud for easy access using standard ANSI SQL queries.</span></span>

### <a name="alternatives"></a><span data-ttu-id="aff28-139">Alternativas</span><span class="sxs-lookup"><span data-stu-id="aff28-139">Alternatives</span></span>

<span data-ttu-id="aff28-140">Data Factory podría invocar procedimientos de limpieza de datos implementados mediante otras tecnologías, como un cuaderno de Databricks, un script de Python o una instancia de SSIS que se ejecuta en una máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="aff28-140">Data Factory could invoke data cleansing procedures implemented using other technologies, such as a Databricks notebook, Python script, or SSIS instance running in a virtual machine.</span></span> <span data-ttu-id="aff28-141">[La instalación componentes personalizados de pago o con licencia el entorno de ejecución de integración de SSIS en Azure](/azure/data-factory/how-to-develop-azure-ssis-ir-licensed-components) puede ser una alternativa viable para el enfoque híbrido.</span><span class="sxs-lookup"><span data-stu-id="aff28-141">[Installing paid or licensed custom components for the Azure-SSIS integration runtime](/azure/data-factory/how-to-develop-azure-ssis-ir-licensed-components) may be a viable alternative to the hybrid approach.</span></span>

## <a name="considerations"></a><span data-ttu-id="aff28-142">Consideraciones</span><span class="sxs-lookup"><span data-stu-id="aff28-142">Considerations</span></span>

<span data-ttu-id="aff28-143">El entorno de ejecución de integración (IR) admite dos modelos: IR autohospedado o IR hospedado en Azure</span><span class="sxs-lookup"><span data-stu-id="aff28-143">The Integrated Runtime (IR) supports two models: self-hosted IR or Azure-hosted IR.</span></span> <span data-ttu-id="aff28-144">En primer lugar, debe decidir entre estas dos opciones.</span><span class="sxs-lookup"><span data-stu-id="aff28-144">You first must decide between these two options.</span></span> <span data-ttu-id="aff28-145">El autohospedaje es más rentable, pero tiene más sobrecarga de administración y mantenimiento.</span><span class="sxs-lookup"><span data-stu-id="aff28-145">Self-hosting is more cost effective but has more overhead for maintenance and management.</span></span> <span data-ttu-id="aff28-146">Para más información, consulte [IR autohospedado](/azure/data-factory/concepts-integration-runtime#self-hosted-integration-runtime).</span><span class="sxs-lookup"><span data-stu-id="aff28-146">For more information, see [Self-hosted IR](/azure/data-factory/concepts-integration-runtime#self-hosted-integration-runtime).</span></span> <span data-ttu-id="aff28-147">Si necesita ayuda para determinar el tipo de IR, consulte [Determinar qué tipo de IR se usará](/azure/data-factory/concepts-integration-runtime#determining-which-ir-to-use).</span><span class="sxs-lookup"><span data-stu-id="aff28-147">If you need help determining which IR to use, see [Determining which IR to use](/azure/data-factory/concepts-integration-runtime#determining-which-ir-to-use).</span></span>

<span data-ttu-id="aff28-148">Para el sistema hospedado en Azure, debe decidir cuánta capacidad necesita para procesar los datos.</span><span class="sxs-lookup"><span data-stu-id="aff28-148">For the Azure-hosted approach, you should decide how much power is required to process your data.</span></span> <span data-ttu-id="aff28-149">La configuración hospedada en Azure le permite seleccionar el tamaño de máquina virtual como parte de los pasos de configuración.</span><span class="sxs-lookup"><span data-stu-id="aff28-149">The Azure-hosted configuration allows you to select the VM size as part of the configuration steps.</span></span> <span data-ttu-id="aff28-150">Para más información acerca de cómo seleccionar los tamaños de máquina virtual, consulte [Consideraciones sobre el rendimiento de las máquinas virtuales](/azure/cloud-services/cloud-services-sizes-specs#performance-considerations).</span><span class="sxs-lookup"><span data-stu-id="aff28-150">To learn more about selecting VM sizes, see [VM performance considerations](/azure/cloud-services/cloud-services-sizes-specs#performance-considerations).</span></span>

<span data-ttu-id="aff28-151">La decisión es mucho más fácil si ya tiene paquetes SSIS existentes que tienen dependencias en el entorno local, como orígenes de datos o archivos que no son accesibles desde Azure.</span><span class="sxs-lookup"><span data-stu-id="aff28-151">The decision is much easier when you already have existing SSIS packages that have on-premise dependencies such as data sources or files that are not accessible from Azure.</span></span> <span data-ttu-id="aff28-152">En este escenario, la única opción es un IR autohospedado.</span><span class="sxs-lookup"><span data-stu-id="aff28-152">In this scenario, your only option is the self-hosted IR.</span></span> <span data-ttu-id="aff28-153">Este enfoque ofrece la máxima flexibilidad para aprovechar la nube como el motor de orquestación, sin tener que reescribir los paquetes existentes.</span><span class="sxs-lookup"><span data-stu-id="aff28-153">This approach provides the most flexibility to leverage the cloud as the orchestration engine, without having to rewrite existing packages.</span></span>

<span data-ttu-id="aff28-154">En última instancia, la intención es trasladar los datos procesados a la nube para seguir refinándolos o combinándolos con otros datos almacenados en la nube.</span><span class="sxs-lookup"><span data-stu-id="aff28-154">Ultimately, the intent is to move the processed data into the cloud for further refinement or combining with other data stored in the cloud.</span></span> <span data-ttu-id="aff28-155">Como parte del proceso de diseño, realice un seguimiento de la cantidad de actividades que se usan en las canalizaciones ADF.</span><span class="sxs-lookup"><span data-stu-id="aff28-155">As part of the design process, keep track of the number of activities used in the ADF pipelines.</span></span> <span data-ttu-id="aff28-156">Para más información, consulte [Canalizaciones y actividades en Azure Data Factory](/azure/data-factory/concepts-pipelines-activities).</span><span class="sxs-lookup"><span data-stu-id="aff28-156">For more information, see [Pipelines and activities in Azure Data Factory](/azure/data-factory/concepts-pipelines-activities).</span></span>

## <a name="pricing"></a><span data-ttu-id="aff28-157">Precios</span><span class="sxs-lookup"><span data-stu-id="aff28-157">Pricing</span></span>

<span data-ttu-id="aff28-158">Azure Data Factory es una opción rentable para orquestar el movimiento de datos en la nube.</span><span class="sxs-lookup"><span data-stu-id="aff28-158">Azure Data Factory is a cost-effective way to orchestrate data movement in the cloud.</span></span> <span data-ttu-id="aff28-159">El costo se basa en diversos factores.</span><span class="sxs-lookup"><span data-stu-id="aff28-159">The cost is based on the several factors.</span></span>

* <span data-ttu-id="aff28-160">Número de ejecuciones de canalización</span><span class="sxs-lookup"><span data-stu-id="aff28-160">Number of pipeline executions</span></span>
* <span data-ttu-id="aff28-161">Número de entidades o actividades utilizadas dentro de la canalización</span><span class="sxs-lookup"><span data-stu-id="aff28-161">Number of entities/activities used within the pipeline</span></span>
* <span data-ttu-id="aff28-162">Número de operaciones de supervisión</span><span class="sxs-lookup"><span data-stu-id="aff28-162">Number of monitoring operations</span></span>
* <span data-ttu-id="aff28-163">Número de ejecuciones de integración (IR hospedado en Azure o IR autohospedado)</span><span class="sxs-lookup"><span data-stu-id="aff28-163">Number of Integration Runs (Azure-hosted IR or self-hosted IR)</span></span>

<span data-ttu-id="aff28-164">ADF utiliza facturación por consumo</span><span class="sxs-lookup"><span data-stu-id="aff28-164">ADF uses consumption-based billing.</span></span> <span data-ttu-id="aff28-165">Por lo tanto, solo se incurre en costos durante las ejecuciones y la supervisión de las canalizaciones.</span><span class="sxs-lookup"><span data-stu-id="aff28-165">Therefore, cost is only incurred during pipeline executions and monitoring.</span></span> <span data-ttu-id="aff28-166">La ejecución de una canalización básica costaría tan solo 50 céntimos y, la supervisión, solo 25 céntimos.</span><span class="sxs-lookup"><span data-stu-id="aff28-166">The execution of a basic pipeline would cost as little as 50 cents and the monitoring as little as 25 cents.</span></span> <span data-ttu-id="aff28-167">Use la [calculadora de costos de Azure](https://azure.microsoft.com/pricing/calculator/) para crear una estimación más precisa en función de su carga específica.</span><span class="sxs-lookup"><span data-stu-id="aff28-167">The [Azure cost calculator](https://azure.microsoft.com/pricing/calculator/) can be used to create a more accurate estimate based on your specific workload.</span></span>

<span data-ttu-id="aff28-168">Cuando se ejecuta una carga de trabajo de ETL híbrida, debe incluir el costo de la máquina virtual que se utiliza para hospedar los paquetes SSIS.</span><span class="sxs-lookup"><span data-stu-id="aff28-168">When running a hybrid ETL workload, you must factor in the cost of the virtual machine used to host your SSIS packages.</span></span> <span data-ttu-id="aff28-169">Este costo se basa en el tamaño de la máquina virtual, que van desde D1v2 (1 núcleo, 3,5 GB de RAM, 50 GB en disco) a E64V3 (64 núcleos, 432 GB de RAM, disco de 1600 GB).</span><span class="sxs-lookup"><span data-stu-id="aff28-169">This cost is based on the size of the VM ranging from a D1v2 (1 core, 3.5 GB RAM, 50 GB Disk) to E64V3 (64 cores, 432 GB RAM, 1600 GB disk).</span></span>  <span data-ttu-id="aff28-170">Si necesita más orientación sobre cómo seleccionar el tamaño adecuado de máquina virtual, consulte [Consideraciones sobre el rendimiento de las máquinas virtuales](/azure/cloud-services/cloud-services-sizes-specs#performance-considerations).</span><span class="sxs-lookup"><span data-stu-id="aff28-170">If you need further guidance on selection the appropriate VM size, see [VM performance considerations](/azure/cloud-services/cloud-services-sizes-specs#performance-considerations).</span></span>

## <a name="next-steps"></a><span data-ttu-id="aff28-171">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="aff28-171">Next Steps</span></span>

* <span data-ttu-id="aff28-172">Más información acerca de [Azure Data Factory](https://azure.microsoft.com/services/data-factory/).</span><span class="sxs-lookup"><span data-stu-id="aff28-172">Learn more about [Azure Data Factory](https://azure.microsoft.com/services/data-factory/).</span></span>
* <span data-ttu-id="aff28-173">Empiece a trabajar con Azure Data Factory siguiendo el [tutorial paso a paso](/azure/data-factory/#step-by-step-tutorials).</span><span class="sxs-lookup"><span data-stu-id="aff28-173">Get started with Azure Data Factory by following the [Step-by-step tutorial](/azure/data-factory/#step-by-step-tutorials).</span></span>
* <span data-ttu-id="aff28-174">[Aprovisionamiento de Azure-SSIS Integration Runtime en Azure Data Factory](/azure/data-factory/tutorial-deploy-ssis-packages-azure)</span><span class="sxs-lookup"><span data-stu-id="aff28-174">[Provision the Azure-SSIS Integration Runtime in Azure Data Factory](/azure/data-factory/tutorial-deploy-ssis-packages-azure).</span></span>

<!-- links -->
[architecture-diagram]: ./media/architecture-diagram-hybrid-etl-with-adf.png
[small-pricing]: https://azure.com/e/
[medium-pricing]: https://azure.com/e/
[large-pricing]: https://azure.com/e/
[availability]: /azure/architecture/checklist/availability
[resource-groups]: /azure/azure-resource-manager/resource-group-overview
[resiliency]: /azure/architecture/resiliency/
[security]: /azure/security/
[scalability]: /azure/architecture/checklist/scalability
[docs-blob-storage]: /azure/storage/blobs/
[docs-data-factory]: /azure/data-factory/introduction
[docs-resource-groups]: /azure/azure-resource-manager/resource-group-overview
[docs-ssis]: /sql/integration-services/sql-server-integration-services
[docs-sql-data-warehouse]: /azure/sql-data-warehouse/sql-data-warehouse-overview-what-is
