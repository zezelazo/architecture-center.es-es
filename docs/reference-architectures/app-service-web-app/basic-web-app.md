---
title: Aplicación web básica
description: Arquitectura recomendada para una aplicación web básica que se ejecuta en Microsoft Azure.
author: MikeWasson
ms.date: 12/12/2017
ms.openlocfilehash: 06c37d5d87befa553a9efbe14acea24db57ae8f8
ms.sourcegitcommit: 877777094b554559dc9cb1f0d9214d6d38197439
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 11/11/2018
ms.locfileid: "51527735"
---
# <a name="basic-web-application-in-azure"></a><span data-ttu-id="9e7d1-103">Aplicación web básica de Azure</span><span class="sxs-lookup"><span data-stu-id="9e7d1-103">Basic web application in Azure</span></span>

<span data-ttu-id="9e7d1-104">Esta arquitectura de referencia muestra un conjunto de prácticas demostradas para una aplicación web que usa [Azure App Service][app-service] y [Azure SQL Database][sql-db].</span><span class="sxs-lookup"><span data-stu-id="9e7d1-104">This reference architecture shows a set of proven practices for a web application that uses [Azure App Service][app-service] and [Azure SQL Database][sql-db].</span></span> [<span data-ttu-id="9e7d1-105">**Implemente esta solución.**</span><span class="sxs-lookup"><span data-stu-id="9e7d1-105">**Deploy this solution.**</span></span>](#deploy-the-solution)

<span data-ttu-id="9e7d1-106">![[0]][0]</span><span class="sxs-lookup"><span data-stu-id="9e7d1-106">![[0]][0]</span></span>

<span data-ttu-id="9e7d1-107">*Descargue un [archivo Visio][visio-download] de esta arquitectura.*</span><span class="sxs-lookup"><span data-stu-id="9e7d1-107">*Download a [Visio file][visio-download] of this architecture.*</span></span>

## <a name="architecture"></a><span data-ttu-id="9e7d1-108">Arquitectura</span><span class="sxs-lookup"><span data-stu-id="9e7d1-108">Architecture</span></span> 

> [!NOTE]
> <span data-ttu-id="9e7d1-109">Esta arquitectura no se centra en el desarrollo de aplicaciones y no supone ningún marco de trabajo de la aplicación concreto.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-109">This architecture does not focus on application development, and does not assume any particular application framework.</span></span> <span data-ttu-id="9e7d1-110">El objetivo es comprender cómo encajan entre sí los distintos servicios de Azure.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-110">The goal is to understand how various Azure services fit together.</span></span>
>
>

<span data-ttu-id="9e7d1-111">La arquitectura consta de los siguientes componentes:</span><span class="sxs-lookup"><span data-stu-id="9e7d1-111">The architecture has the following components:</span></span>

* <span data-ttu-id="9e7d1-112">**Grupo de recursos**.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-112">**Resource group**.</span></span> <span data-ttu-id="9e7d1-113">Un [grupo de recursos](/azure/azure-resource-manager/resource-group-overview) es un contenedor lógico de recursos de Azure.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-113">A [resource group](/azure/azure-resource-manager/resource-group-overview) is a logical container for Azure resources.</span></span>

* <span data-ttu-id="9e7d1-114">**Aplicación de App Service**.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-114">**App Service app**.</span></span> <span data-ttu-id="9e7d1-115">[Azure App Service][app-service] es una plataforma completamente administrada para crear e implementar aplicaciones en la nube.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-115">[Azure App Service][app-service] is a fully managed platform for creating and deploying cloud applications.</span></span>     

* <span data-ttu-id="9e7d1-116">**Plan de App Service**.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-116">**App Service plan**.</span></span> <span data-ttu-id="9e7d1-117">Un [plan de App Service][app-service-plans] proporciona las máquinas virtuales (VM) administradas que hospedan su aplicación.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-117">An [App Service plan][app-service-plans] provides the managed virtual machines (VMs) that host your app.</span></span> <span data-ttu-id="9e7d1-118">Todas las aplicaciones asociadas con un plan se ejecutan en las mismas instancias de máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-118">All apps associated with a plan run on the same VM instances.</span></span>

* <span data-ttu-id="9e7d1-119">**Ranuras de implementación**.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-119">**Deployment slots**.</span></span>  <span data-ttu-id="9e7d1-120">Una [ranura de implementación][deployment-slots] permite preconfigurar una implementación y, posteriormente, intercambiarla con la implementación de producción.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-120">A [deployment slot][deployment-slots] lets you stage a deployment and then swap it with the production deployment.</span></span> <span data-ttu-id="9e7d1-121">De este modo, evita realizar la implementación directamente en producción.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-121">That way, you avoid deploying directly into production.</span></span> <span data-ttu-id="9e7d1-122">Consulte la sección [Manejabilidad](#manageability-considerations) para obtener recomendaciones específicas.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-122">See the [Manageability](#manageability-considerations) section for specific recommendations.</span></span>

* <span data-ttu-id="9e7d1-123">**Dirección IP**.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-123">**IP address**.</span></span> <span data-ttu-id="9e7d1-124">La aplicación de App Service tiene una dirección IP pública y un nombre de dominio.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-124">The App Service app has a public IP address and a domain name.</span></span> <span data-ttu-id="9e7d1-125">El nombre de dominio es un subdominio de `azurewebsites.net`, como `contoso.azurewebsites.net`.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-125">The domain name is a subdomain of `azurewebsites.net`, such as `contoso.azurewebsites.net`.</span></span>  

* <span data-ttu-id="9e7d1-126">**Azure DNS**.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-126">**Azure DNS**.</span></span> <span data-ttu-id="9e7d1-127">[Azure DNS][azure-dns] es un servicio de hospedaje para dominios DNS que permite resolver nombres mediante la infraestructura de Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-127">[Azure DNS][azure-dns] is a hosting service for DNS domains, providing name resolution using Microsoft Azure infrastructure.</span></span> <span data-ttu-id="9e7d1-128">Al hospedar dominios en Azure, puede administrar los registros DNS con las mismas credenciales, API, herramientas y facturación que con los demás servicios de Azure.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-128">By hosting your domains in Azure, you can manage your DNS records using the same credentials, APIs, tools, and billing as your other Azure services.</span></span> <span data-ttu-id="9e7d1-129">Para usar un nombre de dominio personalizado, como `contoso.com`, cree registros DNS que asignen el nombre de dominio personalizado a la dirección IP.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-129">To use a custom domain name (such as `contoso.com`) create DNS records that map the custom domain name to the IP address.</span></span> <span data-ttu-id="9e7d1-130">Para más información, consulte [Configurar un nombre de dominio personalizado en Azure App Service][custom-domain-name].</span><span class="sxs-lookup"><span data-stu-id="9e7d1-130">For more information, see [Configure a custom domain name in Azure App Service][custom-domain-name].</span></span>  

* <span data-ttu-id="9e7d1-131">**Azure SQL Database**.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-131">**Azure SQL Database**.</span></span> <span data-ttu-id="9e7d1-132">[SQL Database][sql-db] es una base de datos como servicio relacional en la nube.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-132">[SQL Database][sql-db] is a relational database-as-a-service in the cloud.</span></span> <span data-ttu-id="9e7d1-133">SQL Database comparte su base de código con el motor de base de datos de Microsoft SQL Server.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-133">SQL Database shares its code base with the Microsoft SQL Server database engine.</span></span> <span data-ttu-id="9e7d1-134">Según los requisitos de la aplicación, también puede usar [Azure Database for MySQL](/azure/mysql) o [Azure Database for PostgreSQL](/azure/postgresql).</span><span class="sxs-lookup"><span data-stu-id="9e7d1-134">Depending on your application requirements, you can also use [Azure Database for MySQL](/azure/mysql) or [Azure Database for PostgreSQL](/azure/postgresql).</span></span> <span data-ttu-id="9e7d1-135">Se trata de servicios de bases de datos totalmente administrados, basados en los motores de bases de datos de código abierto MySQL Server y Postgres respectivamente.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-135">These are fully managed database services, based on the open source MySQL Server and Postgres database engines, respectively.</span></span>

* <span data-ttu-id="9e7d1-136">**Servidor lógico**.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-136">**Logical server**.</span></span> <span data-ttu-id="9e7d1-137">En Azure SQL Database, un servidor lógico hospeda las bases de datos.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-137">In Azure SQL Database, a logical server hosts your databases.</span></span> <span data-ttu-id="9e7d1-138">Se pueden crear varias bases de datos por servidor lógico.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-138">You can create multiple databases per logical server.</span></span>

* <span data-ttu-id="9e7d1-139">**Azure Storage**.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-139">**Azure Storage**.</span></span> <span data-ttu-id="9e7d1-140">Cree una cuenta de almacenamiento de Azure con un contenedor de blobs para almacenar los registros de diagnóstico.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-140">Create an Azure storage account with a blob container to store diagnostic logs.</span></span>

* <span data-ttu-id="9e7d1-141">**Azure Active Directory** (Azure AD).</span><span class="sxs-lookup"><span data-stu-id="9e7d1-141">**Azure Active Directory** (Azure AD).</span></span> <span data-ttu-id="9e7d1-142">Use Azure AD u otro proveedor de identidades para la autenticación.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-142">Use Azure AD or another identity provider for authentication.</span></span>

## <a name="recommendations"></a><span data-ttu-id="9e7d1-143">Recomendaciones</span><span class="sxs-lookup"><span data-stu-id="9e7d1-143">Recommendations</span></span>

<span data-ttu-id="9e7d1-144">Los requisitos pueden diferir de los de la arquitectura que se describe aquí.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-144">Your requirements might differ from the architecture described here.</span></span> <span data-ttu-id="9e7d1-145">Use las recomendaciones de esta sección como punto de partida.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-145">Use the recommendations in this section as a starting point.</span></span>

### <a name="app-service-plan"></a><span data-ttu-id="9e7d1-146">Plan de App Service</span><span class="sxs-lookup"><span data-stu-id="9e7d1-146">App Service plan</span></span>
<span data-ttu-id="9e7d1-147">Use los niveles Standard o Premium, ya que admiten las opciones de Escalabilidad horizontal, Escala automática y Capa de sockets seguros (SSL).</span><span class="sxs-lookup"><span data-stu-id="9e7d1-147">Use the Standard or Premium tiers, because they support scale out, autoscale, and secure sockets layer (SSL).</span></span> <span data-ttu-id="9e7d1-148">Cada nivel admite varios *tamaños de instancia*, que se diferencian por el número de núcleos y la memoria.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-148">Each tier supports several *instance sizes* that differ by number of cores and memory.</span></span> <span data-ttu-id="9e7d1-149">Puede cambiar el nivel o el tamaño de la instancia después de crear un plan.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-149">You can change the tier or instance size after you create a plan.</span></span> <span data-ttu-id="9e7d1-150">Para más información sobre los planes de App Service, consulte [Precios de App Service ][app-service-plans-tiers].</span><span class="sxs-lookup"><span data-stu-id="9e7d1-150">For more information about App Service plans, see [App Service Pricing][app-service-plans-tiers].</span></span>

<span data-ttu-id="9e7d1-151">Se le cobra por las instancias del plan de App Service, aunque la aplicación esté detenida.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-151">You are charged for the instances in the App Service plan, even if the app is stopped.</span></span> <span data-ttu-id="9e7d1-152">Asegúrese de eliminar los planes que no use (por ejemplo, las implementaciones de prueba).</span><span class="sxs-lookup"><span data-stu-id="9e7d1-152">Make sure to delete plans that you aren't using (for example, test deployments).</span></span>

### <a name="sql-database"></a><span data-ttu-id="9e7d1-153">SQL Database</span><span class="sxs-lookup"><span data-stu-id="9e7d1-153">SQL Database</span></span>
<span data-ttu-id="9e7d1-154">Use la [versión V12][sql-db-v12] de SQL Database.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-154">Use the [V12 version][sql-db-v12] of SQL Database.</span></span> <span data-ttu-id="9e7d1-155">SQL Database admite los [niveles de servicio][sql-db-service-tiers] Basic, Standard y Premium, con varios niveles de rendimiento dentro de cada nivel medidos en [unidades de transmisión de datos (DTU)][sql-dtu].</span><span class="sxs-lookup"><span data-stu-id="9e7d1-155">SQL Database supports Basic, Standard, and Premium [service tiers][sql-db-service-tiers], with multiple performance levels within each tier measured in [Database Transaction Units (DTUs)][sql-dtu].</span></span> <span data-ttu-id="9e7d1-156">Planee la capacidad, y elija un nivel de servicio y un nivel de rendimiento que se ajusten a sus necesidades.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-156">Perform capacity planning and choose a tier and performance level that meets your requirements.</span></span>

### <a name="region"></a><span data-ttu-id="9e7d1-157">Region</span><span class="sxs-lookup"><span data-stu-id="9e7d1-157">Region</span></span>
<span data-ttu-id="9e7d1-158">Aprovisione el plan de App Service y la instancia de SQL Database en la misma región para minimizar la latencia de red.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-158">Provision the App Service plan and the SQL Database in the same region to minimize network latency.</span></span> <span data-ttu-id="9e7d1-159">Por lo general, elija la región más cercana a los usuarios.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-159">Generally, choose the region closest to your users.</span></span>

<span data-ttu-id="9e7d1-160">El grupo de recursos también tiene una región, que especifica dónde se almacenan los metadatos de la implementación.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-160">The resource group also has a region, which specifies where deployment metadata is stored.</span></span> <span data-ttu-id="9e7d1-161">Coloque el grupo de recursos y sus recursos en la misma región.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-161">Put the resource group and its resources in the same region.</span></span> <span data-ttu-id="9e7d1-162">Esto puede mejorar la disponibilidad durante la implementación.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-162">This can improve availability during deployment.</span></span> 

## <a name="scalability-considerations"></a><span data-ttu-id="9e7d1-163">Consideraciones sobre escalabilidad</span><span class="sxs-lookup"><span data-stu-id="9e7d1-163">Scalability considerations</span></span>

<span data-ttu-id="9e7d1-164">Una de las ventajas principales de Azure App Service es la posibilidad de escalar la aplicación en función de la carga.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-164">A major benefit of Azure App Service is the ability to scale your application based on load.</span></span> <span data-ttu-id="9e7d1-165">Estas son algunas consideraciones que se deben tener en cuenta al planear el escalado de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-165">Here are some considerations to keep in mind when planning to scale your application.</span></span>

### <a name="scaling-the-app-service-app"></a><span data-ttu-id="9e7d1-166">Ajuste de escala de la aplicación de App Service</span><span class="sxs-lookup"><span data-stu-id="9e7d1-166">Scaling the App Service app</span></span>

<span data-ttu-id="9e7d1-167">Hay dos formas de escalar una aplicación de App Service:</span><span class="sxs-lookup"><span data-stu-id="9e7d1-167">There are two ways to scale an App Service app:</span></span>

* <span data-ttu-id="9e7d1-168">*Escalar verticalmente*, que significa cambiar el tamaño de la instancia.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-168">*Scale up*, which means changing the instance size.</span></span> <span data-ttu-id="9e7d1-169">El tamaño de la instancia determina la memoria, el número de núcleos y el almacenamiento en cada instancia de máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-169">The instance size determines the memory, number of cores, and storage on each VM instance.</span></span> <span data-ttu-id="9e7d1-170">La escalabilidad vertical se puede ajustar manualmente cambiando el tamaño de la instancia o el nivel del plan.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-170">You can scale up manually by changing the instance size or the plan tier.</span></span>  

* <span data-ttu-id="9e7d1-171">*Escalar horizontalmente*, que significa agregar instancias para controlar el aumento de la carga.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-171">*Scale out*, which means adding instances to handle increased load.</span></span> <span data-ttu-id="9e7d1-172">Cada nivel de precios tiene un número máximo de instancias.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-172">Each pricing tier has a maximum number of instances.</span></span> 

  <span data-ttu-id="9e7d1-173">La escalabilidad horizontal se puede ajustar manualmente cambiando el recuento de instancias, o bien se puede usar el [escalado automático][web-app-autoscale] para que Azure agregue o quite instancias automáticamente según la programación y/o las métricas de rendimiento.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-173">You can scale out manually by changing the instance count, or use [autoscaling][web-app-autoscale] to have Azure automatically add or remove instances based on a schedule and/or performance metrics.</span></span> <span data-ttu-id="9e7d1-174">Cada operación de escala se realiza rápidamente y, normalmente, en unos segundos.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-174">Each scale operation happens quickly&mdash;typically within seconds.</span></span> 

  <span data-ttu-id="9e7d1-175">Para habilitar el escalado automático, cree un *perfil* de escalado automático que defina el número mínimo y máximo de instancias.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-175">To enable autoscaling, create an autoscale *profile* that defines the minimum and maximum number of instances.</span></span> <span data-ttu-id="9e7d1-176">Los perfiles se pueden programar.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-176">Profiles can be scheduled.</span></span> <span data-ttu-id="9e7d1-177">Por ejemplo, podría crear perfiles distintos para los días laborables y los fines de semana.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-177">For example, you might create separate profiles for weekdays and weekends.</span></span> <span data-ttu-id="9e7d1-178">De manera opcional, un perfil contiene reglas sobre cuándo agregar o quitar instancias.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-178">Optionally, a profile contains rules for when to add or remove instances.</span></span> <span data-ttu-id="9e7d1-179">(Ejemplo: Agregar dos instancias si el uso de la CPU es superior al 70 % durante 5 minutos).</span><span class="sxs-lookup"><span data-stu-id="9e7d1-179">(Example: Add two instances if CPU usage is above 70% for 5 minutes.)</span></span>
  
<span data-ttu-id="9e7d1-180">Recomendaciones para el ajuste de escala de una aplicación web:</span><span class="sxs-lookup"><span data-stu-id="9e7d1-180">Recommendations for scaling a web app:</span></span>

* <span data-ttu-id="9e7d1-181">En la medida de lo posible, evite la escalabilidad vertical y horizontal, ya que podría desencadenar un reinicio de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-181">As much as possible, avoid scaling up and down, because it may trigger an application restart.</span></span> <span data-ttu-id="9e7d1-182">En su lugar, seleccione un nivel y un tamaño que satisfagan sus requisitos de rendimiento con la carga típica y, a continuación, escale horizontalmente las instancias para controlar los cambios en el volumen de tráfico.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-182">Instead, select a tier and size that meet your performance requirements under typical load and then scale out the instances to handle changes in traffic volume.</span></span>    
* <span data-ttu-id="9e7d1-183">Habilite el escalado automático.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-183">Enable autoscaling.</span></span> <span data-ttu-id="9e7d1-184">Si la aplicación tiene una carga de trabajo normal predecible, cree perfiles para programar los recuentos de instancias con antelación.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-184">If your application has a predictable, regular workload, create profiles to schedule the instance counts ahead of time.</span></span> <span data-ttu-id="9e7d1-185">Si la carga de trabajo no es predecible, use el escalado automático basado en reglas para reaccionar a los cambios de carga cuando se produzcan.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-185">If the workload is not predictable, use rule-based autoscaling to react to changes in load as they occur.</span></span> <span data-ttu-id="9e7d1-186">Puede combinar ambos enfoques.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-186">You can combine both approaches.</span></span>
* <span data-ttu-id="9e7d1-187">El uso de la CPU suele ser una buena métrica para las reglas de escalado automático.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-187">CPU usage is generally a good metric for autoscale rules.</span></span> <span data-ttu-id="9e7d1-188">Sin embargo, debería realizar pruebas de carga de la aplicación, identificar posibles cuellos de botella y basar las reglas de escalado automático en esos datos.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-188">However, you should load test your application, identify potential bottlenecks, and base your autoscale rules on that data.</span></span>  
* <span data-ttu-id="9e7d1-189">Las reglas de escalado automático incluyen un período de *enfriamiento*, que es el intervalo que se debe esperar una vez completada una acción de ajuste de escala antes de iniciar la siguiente.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-189">Autoscale rules include a *cool-down* period, which is the interval to wait after a scale action has completed before starting a new scale action.</span></span> <span data-ttu-id="9e7d1-190">El período de enfriamiento permite que el sistema se estabilice antes de realizar otro ajuste de escala.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-190">The cool-down period lets the system stabilize before scaling again.</span></span> <span data-ttu-id="9e7d1-191">Establezca un período de enfriamiento más corto para agregar instancias y uno más prolongado para quitarlas.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-191">Set a shorter cool-down period for adding instances, and a longer cool-down period for removing instances.</span></span> <span data-ttu-id="9e7d1-192">Por ejemplo, establezca 5 minutos para agregar una instancia y 60 minutos para quitarla.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-192">For example, set 5 minutes to add an instance, but 60 minutes to remove an instance.</span></span> <span data-ttu-id="9e7d1-193">Es mejor agregar nuevas instancias rápidamente bajo una carga intensa para controlar el tráfico adicional y, a continuación, reducir el escalado gradualmente.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-193">It's better to add new instances quickly under heavy load to handle the additional traffic, and then gradually scale back.</span></span>

### <a name="scaling-sql-database"></a><span data-ttu-id="9e7d1-194">Ajuste de escala de SQL Database</span><span class="sxs-lookup"><span data-stu-id="9e7d1-194">Scaling SQL Database</span></span>
<span data-ttu-id="9e7d1-195">Si necesita un nivel de servicio o de rendimiento superior para SQL Database, puede escalar verticalmente bases de datos individuales sin tiempo de inactividad de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-195">If you need a higher service tier or performance level for SQL Database, you can scale up individual databases with no application downtime.</span></span> <span data-ttu-id="9e7d1-196">Si quiere obtener más información, consulte el artículo [Opciones y rendimiento de Base de datos SQL: comprender lo que está disponible en cada nivel de servicio][sql-db-scale].</span><span class="sxs-lookup"><span data-stu-id="9e7d1-196">For more information, see [SQL Database options and performance: Understand what's available in each service tier][sql-db-scale].</span></span>

## <a name="availability-considerations"></a><span data-ttu-id="9e7d1-197">Consideraciones sobre disponibilidad</span><span class="sxs-lookup"><span data-stu-id="9e7d1-197">Availability considerations</span></span>
<span data-ttu-id="9e7d1-198">En el momento de escribir este artículo, el acuerdo de nivel de servicio (SLA) de App Service es del 99,95 % y el SLA de SQL Database es del 99,99 % para los niveles Basic, Standard y Premium.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-198">At the time of writing, the service level agreement (SLA) for App Service is 99.95% and the SLA for SQL Database is 99.99% for Basic, Standard, and Premium tiers.</span></span> 

> [!NOTE]
> <span data-ttu-id="9e7d1-199">El SLA de App Service se aplica tanto a instancias únicas como múltiples.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-199">The App Service SLA applies to both single and multiple instances.</span></span>  
>
>

### <a name="backups"></a><span data-ttu-id="9e7d1-200">Copias de seguridad</span><span class="sxs-lookup"><span data-stu-id="9e7d1-200">Backups</span></span>
<span data-ttu-id="9e7d1-201">En caso de pérdida de datos, SQL Database proporciona restauración a un momento dado y restauración geográfica.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-201">In the event of data loss, SQL Database provides point-in-time restore and geo-restore.</span></span> <span data-ttu-id="9e7d1-202">Estas características están disponibles en todos los niveles y se habilitan automáticamente.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-202">These features are available in all tiers and are automatically enabled.</span></span> <span data-ttu-id="9e7d1-203">No es necesario programar ni administrar las copias de seguridad.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-203">You don't need to schedule or manage the backups.</span></span> 

- <span data-ttu-id="9e7d1-204">Use la restauración a un momento dado para la [recuperación de un error humano][sql-human-error] mediante el restablecimiento de la base de datos a un momento anterior en el tiempo.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-204">Use point-in-time restore to [recover from human error][sql-human-error] by returning the database to an earlier point in time.</span></span> 
- <span data-ttu-id="9e7d1-205">Use la restauración geográfica para la [recuperación de una interrupción del servicio][sql-outage-recovery] mediante la restauración de una base de datos a partir de una copia de seguridad con redundancia geográfica.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-205">Use geo-restore to [recover from a service outage][sql-outage-recovery] by restoring a database from a geo-redundant backup.</span></span> 

<span data-ttu-id="9e7d1-206">Para más información, consulte el tema sobre la [continuidad del negocio en la nube y la recuperación ante desastres de la base datos con SQL Database][sql-backup].</span><span class="sxs-lookup"><span data-stu-id="9e7d1-206">For more information, see [Cloud business continuity and database disaster recovery with SQL Database][sql-backup].</span></span>

<span data-ttu-id="9e7d1-207">App Service proporciona una característica de [copia de seguridad y restauración][web-app-backup] para los archivos de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-207">App Service provides a [backup and restore][web-app-backup] feature for your application files.</span></span> <span data-ttu-id="9e7d1-208">Sin embargo, tenga en cuenta que los archivos de los que se realiza la copia de seguridad incluyen la configuración de la aplicación en texto sin formato y pueden incluir información confidencial, como cadenas de conexión.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-208">However, be aware that the backed-up files include app settings in plain text and these may include secrets, such as connection strings.</span></span> <span data-ttu-id="9e7d1-209">Evite usar la característica de copia de seguridad de App Service para realizar una copia de seguridad de las bases de datos SQL, ya que exporta la base de datos a un archivo .bacpac de SQL, que consume unidades [DTU][sql-dtu].</span><span class="sxs-lookup"><span data-stu-id="9e7d1-209">Avoid using the App Service backup feature to back up your SQL databases because it exports the database to a SQL .bacpac file, consuming [DTUs][sql-dtu].</span></span> <span data-ttu-id="9e7d1-210">En su lugar, use la restauración a un momento dado de SQL Database descrita anteriormente.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-210">Instead, use SQL Database point-in-time restore described above.</span></span>

## <a name="manageability-considerations"></a><span data-ttu-id="9e7d1-211">Consideraciones sobre la manejabilidad</span><span class="sxs-lookup"><span data-stu-id="9e7d1-211">Manageability considerations</span></span>
<span data-ttu-id="9e7d1-212">Cree grupos de recursos independientes para entornos de producción, desarrollo y pruebas.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-212">Create separate resource groups for production, development, and test environments.</span></span> <span data-ttu-id="9e7d1-213">Esto facilita la administración de implementaciones, la eliminación de implementaciones de prueba y la asignación de derechos de acceso.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-213">This makes it easier to manage deployments, delete test deployments, and assign access rights.</span></span>

<span data-ttu-id="9e7d1-214">Al asignar recursos a grupos de recursos, tenga en cuenta lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="9e7d1-214">When assigning resources to resource groups, consider the following:</span></span>

* <span data-ttu-id="9e7d1-215">Ciclo de vida.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-215">Lifecycle.</span></span> <span data-ttu-id="9e7d1-216">En general, coloque los recursos con el mismo ciclo de vida en el mismo grupo de recursos.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-216">In general, put resources with the same lifecycle into the same resource group.</span></span>
* <span data-ttu-id="9e7d1-217">Acceso.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-217">Access.</span></span> <span data-ttu-id="9e7d1-218">Puede usar el [control de acceso basado en rol][rbac] (RBAC) para aplicar directivas de acceso a los recursos de un grupo.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-218">You can use [role-based access control][rbac] (RBAC) to apply access policies to the resources in a group.</span></span>
* <span data-ttu-id="9e7d1-219">Facturación.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-219">Billing.</span></span> <span data-ttu-id="9e7d1-220">Puede ver los costes acumulados del grupo de recursos.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-220">You can view the rolled-up costs for the resource group.</span></span>  

<span data-ttu-id="9e7d1-221">Para más información, consulte [Información general de Azure Resource Manager](/azure/azure-resource-manager/resource-group-overview).</span><span class="sxs-lookup"><span data-stu-id="9e7d1-221">For more information, see [Azure Resource Manager overview](/azure/azure-resource-manager/resource-group-overview).</span></span>

### <a name="deployment"></a><span data-ttu-id="9e7d1-222">Implementación</span><span class="sxs-lookup"><span data-stu-id="9e7d1-222">Deployment</span></span>
<span data-ttu-id="9e7d1-223">La implementación implica dos pasos:</span><span class="sxs-lookup"><span data-stu-id="9e7d1-223">Deployment involves two steps:</span></span>

1. <span data-ttu-id="9e7d1-224">Aprovisionamiento de los recursos de Azure.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-224">Provisioning the Azure resources.</span></span> <span data-ttu-id="9e7d1-225">Se recomienda usar las [plantillas de Azure Resource Manager][arm-template] para este paso.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-225">We recommend that you use [Azure Resource Manager templates][arm-template] for this step.</span></span> <span data-ttu-id="9e7d1-226">Las plantillas facilitan la automatización de las implementaciones a través de PowerShell o de la interfaz de línea de comandos (CLI) de Azure.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-226">Templates make it easier to automate deployments via PowerShell or the Azure command line interface (CLI).</span></span>
2. <span data-ttu-id="9e7d1-227">Implementación de la aplicación (código, archivos binarios y archivos de contenido).</span><span class="sxs-lookup"><span data-stu-id="9e7d1-227">Deploying the application (code, binaries, and content files).</span></span> <span data-ttu-id="9e7d1-228">Tiene varias opciones, incluida la implementación desde un repositorio de Git local, mediante Visual Studio, o bien la implementación continua desde el control de código fuente basado en la nube.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-228">You have several options, including deploying from a local Git repository, using Visual Studio, or continuous deployment from cloud-based source control.</span></span> <span data-ttu-id="9e7d1-229">Consulte [Implementación de la aplicación en Azure App Service][deploy].</span><span class="sxs-lookup"><span data-stu-id="9e7d1-229">See [Deploy your app to Azure App Service][deploy].</span></span>  

<span data-ttu-id="9e7d1-230">Una aplicación de App Service siempre tiene una ranura de implementación denominada `production`, que representa el sitio de producción en vivo.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-230">An App Service app always has one deployment slot named `production`, which represents the live production site.</span></span> <span data-ttu-id="9e7d1-231">Se recomienda crear un espacio de ensayo para la implementación de actualizaciones.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-231">We recommend creating a staging slot for deploying updates.</span></span> <span data-ttu-id="9e7d1-232">Las ventajas de usar un espacio de ensayo incluyen:</span><span class="sxs-lookup"><span data-stu-id="9e7d1-232">The benefits of using a staging slot include:</span></span>

* <span data-ttu-id="9e7d1-233">Puede comprobar si la implementación finalizó correctamente antes de pasarla a producción.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-233">You can verify the deployment succeeded, before swapping it into production.</span></span>
* <span data-ttu-id="9e7d1-234">La implementación en un espacio de ensayo garantiza que todas las instancias estén preparadas antes de pasarlas a producción.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-234">Deploying to a staging slot ensures that all instances are warmed up before being swapped into production.</span></span> <span data-ttu-id="9e7d1-235">Muchas aplicaciones presentan tiempos de preparación y arranque en frío considerables.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-235">Many applications have a significant warmup and cold-start time.</span></span>

<span data-ttu-id="9e7d1-236">También se recomienda crear un tercer espacio que contendrá la última implementación correcta conocida.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-236">We also recommend creating a third slot to hold the last-known-good deployment.</span></span> <span data-ttu-id="9e7d1-237">Después de intercambiar ensayo y producción, mueva la implementación de producción anterior (que ahora está en la fase de ensayo) en el último espacio correcto conocido.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-237">After you swap staging and production, move the previous production deployment (which is now in staging) into the last-known-good slot.</span></span> <span data-ttu-id="9e7d1-238">De este modo, si detecta un problema más tarde, puede revertir rápidamente a la última versión correcta conocida.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-238">That way, if you discover a problem later, you can quickly revert to the last-known-good version.</span></span>

<span data-ttu-id="9e7d1-239">![[1]][1]</span><span class="sxs-lookup"><span data-stu-id="9e7d1-239">![[1]][1]</span></span>

<span data-ttu-id="9e7d1-240">Si realiza la reversión a una versión anterior, asegúrese de que los cambios del esquema de base de datos sean compatibles con versiones anteriores.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-240">If you revert to a previous version, make sure any database schema changes are backward compatible.</span></span>

<span data-ttu-id="9e7d1-241">No use espacios en la implementación de producción para pruebas, ya que todas las aplicaciones del mismo plan de App Service comparten las mismas instancias de máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-241">Don't use slots on your production deployment for testing because all apps within the same App Service plan share the same VM instances.</span></span> <span data-ttu-id="9e7d1-242">Por ejemplo, las pruebas de carga pueden degradar el sitio de producción en vivo.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-242">For example, load tests might degrade the live production site.</span></span> <span data-ttu-id="9e7d1-243">En su lugar, use planes de App Service independientes para producción y prueba.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-243">Instead, create separate App Service plans for production and test.</span></span> <span data-ttu-id="9e7d1-244">Al colocar las implementaciones de prueba en un plan independiente, se aíslan de la versión de producción.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-244">By putting test deployments into a separate plan, you isolate them from the production version.</span></span>

### <a name="configuration"></a><span data-ttu-id="9e7d1-245">Configuración</span><span class="sxs-lookup"><span data-stu-id="9e7d1-245">Configuration</span></span>
<span data-ttu-id="9e7d1-246">Almacene los valores de configuración como [valores de configuración de la aplicación][app-settings].</span><span class="sxs-lookup"><span data-stu-id="9e7d1-246">Store configuration settings as [app settings][app-settings].</span></span> <span data-ttu-id="9e7d1-247">Defina la configuración de la aplicación en las plantillas de Resource Manager, o bien mediante PowerShell.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-247">Define the app settings in your Resource Manager templates, or using PowerShell.</span></span> <span data-ttu-id="9e7d1-248">En tiempo de ejecución, la configuración de la aplicación está disponible para la aplicación en forma de variables de entorno.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-248">At runtime, app settings are available to the application as environment variables.</span></span>

<span data-ttu-id="9e7d1-249">Nunca compruebe contraseñas, claves de acceso ni cadenas de conexión en el control de código fuente.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-249">Never check passwords, access keys, or connection strings into source control.</span></span> <span data-ttu-id="9e7d1-250">En su lugar, páselas como parámetros a un script de implementación que almacene estos valores como valores de configuración de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-250">Instead, pass these as parameters to a deployment script that stores these values as app settings.</span></span>

<span data-ttu-id="9e7d1-251">Cuando intercambia una ranura de implementación, los valores de configuración de la aplicación se intercambian de forma predeterminada.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-251">When you swap a deployment slot, the app settings are swapped by default.</span></span> <span data-ttu-id="9e7d1-252">Si necesita una configuración diferente para producción y ensayo, puede crear configuraciones de la aplicación que se ciñan a un espacio y no se intercambien.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-252">If you need different settings for production and staging, you can create app settings that stick to a slot and don't get swapped.</span></span>

### <a name="diagnostics-and-monitoring"></a><span data-ttu-id="9e7d1-253">Diagnóstico y supervisión</span><span class="sxs-lookup"><span data-stu-id="9e7d1-253">Diagnostics and monitoring</span></span>
<span data-ttu-id="9e7d1-254">Habilite el [registro de diagnóstico][diagnostic-logs], incluido el registro de aplicaciones y el registro del servidor web.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-254">Enable [diagnostics logging][diagnostic-logs], including application logging and web server logging.</span></span> <span data-ttu-id="9e7d1-255">Configure el registro para usar Blob Storage.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-255">Configure logging to use Blob storage.</span></span> <span data-ttu-id="9e7d1-256">Con fines de rendimiento, cree una cuenta de almacenamiento independiente para contener los registros de diagnóstico.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-256">For performance reasons, create a separate storage account for diagnostic logs.</span></span> <span data-ttu-id="9e7d1-257">No use la misma cuenta de almacenamiento para los registros y los datos de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-257">Don't use the same storage account for logs and application data.</span></span> <span data-ttu-id="9e7d1-258">Para obtener más instrucciones sobre el registro, consulte la [Guía de supervisión y diagnóstico][monitoring-guidance].</span><span class="sxs-lookup"><span data-stu-id="9e7d1-258">For more detailed guidance on logging, see [Monitoring and diagnostics guidance][monitoring-guidance].</span></span>

<span data-ttu-id="9e7d1-259">Use un servicio como [New Relic][new-relic] o [Application Insights][app-insights] para supervisar el rendimiento de la aplicación y el comportamiento sometido a carga.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-259">Use a service such as [New Relic][new-relic] or [Application Insights][app-insights] to monitor application performance and behavior under load.</span></span> <span data-ttu-id="9e7d1-260">Tenga en cuenta los [límites de velocidad de datos][app-insights-data-rate] de Application Insights.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-260">Be aware of the [data rate limits][app-insights-data-rate] for Application Insights.</span></span>

<span data-ttu-id="9e7d1-261">Realice pruebas de carga con una herramienta como [Azure DevOps][azure-devops] o [Visual Studio Team Foundation Server][tfs].</span><span class="sxs-lookup"><span data-stu-id="9e7d1-261">Perform load testing, using a tool such as [Azure DevOps][azure-devops] or [Visual Studio Team Foundation Server][tfs].</span></span> <span data-ttu-id="9e7d1-262">Para obtener una introducción general del análisis del rendimiento de las aplicaciones en la nube, consulte [Performance Analysis Primer][perf-analysis] (Manual básico de análisis del rendimiento).</span><span class="sxs-lookup"><span data-stu-id="9e7d1-262">For a general overview of performance analysis in cloud applications, see [Performance Analysis Primer][perf-analysis].</span></span>

<span data-ttu-id="9e7d1-263">Sugerencias para solucionar problemas de la aplicación:</span><span class="sxs-lookup"><span data-stu-id="9e7d1-263">Tips for troubleshooting your application:</span></span>

* <span data-ttu-id="9e7d1-264">Use la [hoja de solución de problemas][troubleshoot-blade] de Azure Portal para buscar soluciones a problemas comunes.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-264">Use the [troubleshoot blade][troubleshoot-blade] in the Azure portal to find solutions to common problems.</span></span>
* <span data-ttu-id="9e7d1-265">Habilite [Secuencias de registro][web-app-log-stream] para ver la información de registro prácticamente en tiempo real.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-265">Enable [log streaming][web-app-log-stream] to see logging information in near-real time.</span></span>
* <span data-ttu-id="9e7d1-266">El [panel Kudu][kudu] dispone de varias herramientas para supervisar y depurar la aplicación.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-266">The [Kudu dashboard][kudu] has several tools for monitoring and debugging your application.</span></span> <span data-ttu-id="9e7d1-267">Para obtener más información, consulte [Azure Websites online tools you should know about][kudu] [Herramientas en línea de Azure Websites que debe conocer (entrada de blog)].</span><span class="sxs-lookup"><span data-stu-id="9e7d1-267">For more information, see [Azure Websites online tools you should know about][kudu] (blog post).</span></span> <span data-ttu-id="9e7d1-268">Puede acceder al panel Kudu desde Azure Portal.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-268">You can reach the Kudu dashboard from the Azure portal.</span></span> <span data-ttu-id="9e7d1-269">Abra la hoja de su aplicación y haga clic en <strong>Herramientas</strong>; a continuación, haga clic en <strong>Kudu</strong>.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-269">Open the blade for your app and click <strong>Tools</strong>, then click <strong>Kudu</strong>.</span></span>
* <span data-ttu-id="9e7d1-270">Si usa Visual Studio, consulte el artículo [Solución de problemas de una aplicación web en Azure App Service con Visual Studio][troubleshoot-web-app] para obtener sugerencias de depuración y solución de problemas.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-270">If you use Visual Studio, see the article [Troubleshoot a web app in Azure App Service using Visual Studio][troubleshoot-web-app] for debugging and troubleshooting tips.</span></span>

## <a name="security-considerations"></a><span data-ttu-id="9e7d1-271">Consideraciones sobre la seguridad</span><span class="sxs-lookup"><span data-stu-id="9e7d1-271">Security considerations</span></span>
<span data-ttu-id="9e7d1-272">En esta sección se enumeran las consideraciones de seguridad que son específicas de los servicios de Azure descritos en este artículo.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-272">This section lists security considerations that are specific to the Azure services described in this article.</span></span> <span data-ttu-id="9e7d1-273">No es una lista completa de procedimientos de seguridad recomendados.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-273">It's not a complete list of security best practices.</span></span> <span data-ttu-id="9e7d1-274">Si desea conocer algunas otras consideraciones de seguridad, consulte [Protección de una aplicación en Azure App Service][app-service-security].</span><span class="sxs-lookup"><span data-stu-id="9e7d1-274">For some additional security considerations, see [Secure an app in Azure App Service][app-service-security].</span></span>

### <a name="sql-database-auditing"></a><span data-ttu-id="9e7d1-275">Auditoría de SQL Database</span><span class="sxs-lookup"><span data-stu-id="9e7d1-275">SQL Database auditing</span></span>
<span data-ttu-id="9e7d1-276">La auditoría puede ayudarle a mantener el cumplimiento de normativas, y a conocer las discrepancias y anomalías que pueden indicar problemas en el negocio o infracciones de seguridad sospechosas.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-276">Auditing can help you maintain regulatory compliance and get insight into discrepancies and irregularities that could indicate business concerns or suspected security violations.</span></span> <span data-ttu-id="9e7d1-277">Consulte [Introducción a la auditoría de SQL Database][sql-audit].</span><span class="sxs-lookup"><span data-stu-id="9e7d1-277">See [Get started with SQL database auditing][sql-audit].</span></span>

### <a name="deployment-slots"></a><span data-ttu-id="9e7d1-278">Ranuras de implementación</span><span class="sxs-lookup"><span data-stu-id="9e7d1-278">Deployment slots</span></span>
<span data-ttu-id="9e7d1-279">Cada ranura de implementación tiene una dirección IP pública.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-279">Each deployment slot has a public IP address.</span></span> <span data-ttu-id="9e7d1-280">Proteja los espacios que no sean de producción mediante el [inicio de sesión de Azure Active Directory][aad-auth] para que solo los miembros de los equipos de desarrollo y DevOps puedan acceder a esos puntos de conexión.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-280">Secure the nonproduction slots using [Azure Active Directory login][aad-auth] so that only members of your development and DevOps teams can reach those endpoints.</span></span>

### <a name="logging"></a><span data-ttu-id="9e7d1-281">Registro</span><span class="sxs-lookup"><span data-stu-id="9e7d1-281">Logging</span></span>
<span data-ttu-id="9e7d1-282">Los registros nunca deben registrar las contraseñas de los usuarios ni otra información que pudiera utilizarse para cometer fraudes de identidad.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-282">Logs should never record users' passwords or other information that might be used to commit identity fraud.</span></span> <span data-ttu-id="9e7d1-283">Borre esos detalles de los datos antes de almacenarlos.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-283">Scrub those details from the data before storing it.</span></span>   

### <a name="ssl"></a><span data-ttu-id="9e7d1-284">SSL</span><span class="sxs-lookup"><span data-stu-id="9e7d1-284">SSL</span></span>
<span data-ttu-id="9e7d1-285">Una aplicación de App Service incluye un punto de conexión SSL en un subdominio de `azurewebsites.net` sin costo adicional alguno.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-285">An App Service app includes an SSL endpoint on a subdomain of `azurewebsites.net` at no additional cost.</span></span> <span data-ttu-id="9e7d1-286">El punto de conexión SSL incluye un certificado comodín para el dominio `*.azurewebsites.net`.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-286">The SSL endpoint includes a wildcard certificate for the `*.azurewebsites.net` domain.</span></span> <span data-ttu-id="9e7d1-287">Si usa un nombre de dominio personalizado, debe proporcionar un certificado que coincida con el dominio personalizado.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-287">If you use a custom domain name, you must provide a certificate that matches the custom domain.</span></span> <span data-ttu-id="9e7d1-288">El enfoque más sencillo consiste en adquirir un certificado directamente a través de Azure Portal.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-288">The simplest approach is to buy a certificate directly through the Azure portal.</span></span> <span data-ttu-id="9e7d1-289">También puede importar certificados de otras entidades emisoras de certificados.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-289">You can also import certificates from other certificate authorities.</span></span> <span data-ttu-id="9e7d1-290">Para obtener más información, consulte [Compra y configuración de un certificado SSL para el Servicio de aplicaciones de Azure][ssl-cert].</span><span class="sxs-lookup"><span data-stu-id="9e7d1-290">For more information, see [Buy and Configure an SSL Certificate for your Azure App Service][ssl-cert].</span></span>

<span data-ttu-id="9e7d1-291">Como procedimiento recomendado de seguridad, la aplicación debe exigir HTTPS mediante el redireccionamiento de las solicitudes HTTP.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-291">As a security best practice, your app should enforce HTTPS by redirecting HTTP requests.</span></span> <span data-ttu-id="9e7d1-292">Puede hacerlo dentro de la aplicación o usar una regla de reescritura de direcciones URL como se describe en [Habilitación de HTTPS para una aplicación en Azure App Service][ssl-redirect].</span><span class="sxs-lookup"><span data-stu-id="9e7d1-292">You can implement this inside your application or use a URL rewrite rule as described in [Enable HTTPS for an app in Azure App Service][ssl-redirect].</span></span>

### <a name="authentication"></a><span data-ttu-id="9e7d1-293">Autenticación</span><span class="sxs-lookup"><span data-stu-id="9e7d1-293">Authentication</span></span>
<span data-ttu-id="9e7d1-294">Se recomienda realizar la autenticación a través de un proveedor de identidades (IDP), como Azure AD, Facebook, Google o Twitter.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-294">We recommend authenticating through an identity provider (IDP), such as Azure AD, Facebook, Google, or Twitter.</span></span> <span data-ttu-id="9e7d1-295">Use OAuth 2 u OpenID Connect (OIDC) para el flujo de autenticación.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-295">Use OAuth 2 or OpenID Connect (OIDC) for the authentication flow.</span></span> <span data-ttu-id="9e7d1-296">Azure AD proporciona funcionalidad para administrar usuarios y grupos, crear roles de aplicación, integrar las identidades locales y consumir servicios de back-end, como Office 365 y Skype Empresarial.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-296">Azure AD provides functionality to manage users and groups, create application roles, integrate your on-premises identities, and consume backend services such as Office 365 and Skype for Business.</span></span>

<span data-ttu-id="9e7d1-297">Evite que la aplicación administre credenciales e inicios de sesión de usuario directamente, ya que podría crear una superficie expuesta a ataques.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-297">Avoid having the application manage user logins and credentials directly, as it creates a potential attack surface.</span></span>  <span data-ttu-id="9e7d1-298">Como mínimo, debería tener confirmación por correo electrónico, recuperación de contraseñas y autenticación multifactor; validar la seguridad de la contraseña; y almacenar hashes de contraseña de forma segura.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-298">At a minimum, you would need to have email confirmation, password recovery, and multi-factor authentication; validate password strength; and store password hashes securely.</span></span> <span data-ttu-id="9e7d1-299">Los proveedores de identidades importantes controlan todas esas cosas por usted, y supervisan y mejoran constantemente sus prácticas de seguridad.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-299">The large identity providers handle all of those things for you, and are constantly monitoring and improving their security practices.</span></span>

<span data-ttu-id="9e7d1-300">Considere usar la [autenticación de App Service][app-service-auth] para implementar el flujo de autenticación de OAuth/OIDC.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-300">Consider using [App Service authentication][app-service-auth] to implement the OAuth/OIDC authentication flow.</span></span> <span data-ttu-id="9e7d1-301">Las ventajas de la autenticación del App Service incluyen:</span><span class="sxs-lookup"><span data-stu-id="9e7d1-301">The benefits of App Service authentication include:</span></span>

* <span data-ttu-id="9e7d1-302">Es fácil de configurar.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-302">Easy to configure.</span></span>
* <span data-ttu-id="9e7d1-303">No se requiere ningún código para los escenarios de autenticación simples.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-303">No code is required for simple authentication scenarios.</span></span>
* <span data-ttu-id="9e7d1-304">Admite la autorización delegada mediante tokens de acceso de OAuth para consumir recursos en nombre del usuario.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-304">Supports delegated authorization using OAuth access tokens to consume resources on behalf of the user.</span></span>
* <span data-ttu-id="9e7d1-305">Proporciona una memoria caché de tokens integrada.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-305">Provides a built-in token cache.</span></span>

<span data-ttu-id="9e7d1-306">Algunas limitaciones de la autenticación de App Service:</span><span class="sxs-lookup"><span data-stu-id="9e7d1-306">Some limitations of App Service authentication:</span></span>  

* <span data-ttu-id="9e7d1-307">Opciones de personalización limitadas.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-307">Limited customization options.</span></span>
* <span data-ttu-id="9e7d1-308">La autorización delegada está restringida a un recurso de back-end por cada sesión de inicio de sesión.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-308">Delegated authorization is restricted to one backend resource per login session.</span></span>
* <span data-ttu-id="9e7d1-309">Si usa más de un IDP, no hay ningún mecanismo integrado para la detección del dominio de inicio.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-309">If you use more than one IDP, there is no built-in mechanism for home realm discovery.</span></span>
* <span data-ttu-id="9e7d1-310">Para los escenarios multiinquilino, la aplicación debe implementar la lógica para validar el emisor del token.</span><span class="sxs-lookup"><span data-stu-id="9e7d1-310">For multi-tenant scenarios, the application must implement the logic to validate the token issuer.</span></span>

## <a name="deploy-the-solution"></a><span data-ttu-id="9e7d1-311">Implementación de la solución</span><span class="sxs-lookup"><span data-stu-id="9e7d1-311">Deploy the solution</span></span>
<span data-ttu-id="9e7d1-312">Un ejemplo de plantilla de Resource Manager para esta arquitectura está [disponible en GitHub][paas-basic-arm-template].</span><span class="sxs-lookup"><span data-stu-id="9e7d1-312">An example Resource Manager template for this architecture is [available on GitHub][paas-basic-arm-template].</span></span>

<span data-ttu-id="9e7d1-313">Para implementar la plantilla mediante PowerShell, ejecute los siguientes comandos:</span><span class="sxs-lookup"><span data-stu-id="9e7d1-313">To deploy the template using PowerShell, run the following commands:</span></span>

```
New-AzureRmResourceGroup -Name <resource-group-name> -Location "West US"

$parameters = @{"appName"="<app-name>";"environment"="dev";"locationShort"="uw";"databaseName"="app-db";"administratorLogin"="<admin>";"administratorLoginPassword"="<password>"}

New-AzureRmResourceGroupDeployment -Name <deployment-name> -ResourceGroupName <resource-group-name> -TemplateFile .\PaaS-Basic.json -TemplateParameterObject  $parameters
```

<span data-ttu-id="9e7d1-314">Para más información, consulte [Implementación de recursos con las plantillas de Azure Resource Manager][deploy-arm-template].</span><span class="sxs-lookup"><span data-stu-id="9e7d1-314">For more information, see [Deploy resources with Azure Resource Manager templates][deploy-arm-template].</span></span>

<!-- links -->

[aad-auth]: /azure/app-service-mobile/app-service-mobile-how-to-configure-active-directory-authentication
[app-insights]: /azure/application-insights/app-insights-overview
[app-insights-data-rate]: /azure/application-insights/app-insights-pricing
[app-service]: https://azure.microsoft.com/documentation/services/app-service/
[app-service-auth]: /azure/app-service-api/app-service-api-authentication
[app-service-plans]: /azure/app-service/azure-web-sites-web-hosting-plans-in-depth-overview
[app-service-plans-tiers]: https://azure.microsoft.com/pricing/details/app-service/
[app-service-security]: /azure/app-service-web/web-sites-security
[app-settings]: /azure/app-service-web/web-sites-configure
[arm-template]: /azure/azure-resource-manager/resource-group-overview#resource-groups
[azure-devops]: /azure/devops/
[azure-dns]: /azure/dns/dns-overview
[custom-domain-name]: /azure/app-service-web/web-sites-custom-domain-name
[deploy]: /azure/app-service-web/web-sites-deploy
[deploy-arm-template]: /azure/resource-group-template-deploy
[deployment-slots]: /azure/app-service-web/web-sites-staged-publishing
[diagnostic-logs]: /azure/app-service-web/web-sites-enable-diagnostic-log
[kudu]: https://azure.microsoft.com/blog/windows-azure-websites-online-tools-you-should-know-about/
[monitoring-guidance]: ../../best-practices/monitoring.md
[new-relic]: https://newrelic.com/
[paas-basic-arm-template]: https://github.com/mspnp/reference-architectures/tree/master/managed-web-app/basic-web-app/Paas-Basic/Templates
[perf-analysis]: https://github.com/mspnp/performance-optimization/blob/master/Performance-Analysis-Primer.md
[rbac]: /azure/active-directory/role-based-access-control-what-is
[resource-group]: /azure/azure-resource-manager/resource-group-overview
[sla]: https://azure.microsoft.com/support/legal/sla/
[sql-audit]: /azure/sql-database/sql-database-auditing-get-started
[sql-backup]: /azure/sql-database/sql-database-business-continuity
[sql-db]: https://azure.microsoft.com/documentation/services/sql-database/
[sql-db-overview]: /azure/sql-database/sql-database-technical-overview
[sql-db-scale]: /azure/sql-database/sql-database-service-tiers#scaling-up-or-scaling-down-a-single-database
[sql-db-service-tiers]: /azure/sql-database/sql-database-service-tiers
[sql-db-v12]: /azure/sql-database/sql-database-features
[sql-dtu]: /azure/sql-database/sql-database-service-tiers
[sql-human-error]: /azure/sql-database/sql-database-business-continuity#recover-a-database-after-a-user-or-application-error
[sql-outage-recovery]: /azure/sql-database/sql-database-business-continuity#recover-a-database-to-another-region-from-an-azure-regional-data-center-outage
[ssl-redirect]: /azure/app-service-web/web-sites-configure-ssl-certificate#bkmk_enforce
[sql-resource-limits]: /azure/sql-database/sql-database-resource-limits
[ssl-cert]: /azure/app-service-web/web-sites-purchase-ssl-web-site
[troubleshoot-blade]: https://azure.microsoft.com/updates/self-service-troubleshooting-for-app-service-web-apps-customers/
[tfs]: /tfs/index
[troubleshoot-web-app]: /azure/app-service-web/web-sites-dotnet-troubleshoot-visual-studio
[visio-download]: https://archcenter.blob.core.windows.net/cdn/app-service-reference-architectures.vsdx
[web-app-autoscale]: /azure/app-service-web/web-sites-scale
[web-app-backup]: /azure/app-service-web/web-sites-backup
[web-app-log-stream]: /azure/app-service-web/web-sites-enable-diagnostic-log#streamlogs
[0]: ./images/basic-web-app.png "Arquitectura de una aplicación web de Azure básica"
[1]: ./images/paas-basic-web-app-staging-slots.png "Intercambio de ranuras para implementaciones de producción y de almacenamiento profesional"
