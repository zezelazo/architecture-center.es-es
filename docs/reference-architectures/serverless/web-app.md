---
title: Aplicación web sin servidor
description: Arquitectura de referencia que muestra una aplicación web sin servidor y una API web
author: MikeWasson
ms.date: 10/16/2018
ms.openlocfilehash: 9263c8bec794e4b2bb9f397289b23307eb02f0c7
ms.sourcegitcommit: 19a517a2fb70768b3edb9a7c3c37197baa61d9b5
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 11/26/2018
ms.locfileid: "52295691"
---
# <a name="serverless-web-application"></a><span data-ttu-id="4dd01-103">Aplicación web sin servidor</span><span class="sxs-lookup"><span data-stu-id="4dd01-103">Serverless web application</span></span> 

<span data-ttu-id="4dd01-104">Esta arquitectura de referencia muestra una aplicación web [sin servidor](https://azure.microsoft.com/solutions/serverless/).</span><span class="sxs-lookup"><span data-stu-id="4dd01-104">This reference architecture shows a [serverless](https://azure.microsoft.com/solutions/serverless/) web application.</span></span> <span data-ttu-id="4dd01-105">La aplicación proporciona contenido estático desde Azure Blob Storage e implementa una API con Azure Functions.</span><span class="sxs-lookup"><span data-stu-id="4dd01-105">The application serves static content from Azure Blob Storage, and implements an API using Azure Functions.</span></span> <span data-ttu-id="4dd01-106">La API lee datos de Cosmos DB y devuelve los resultados a la aplicación web.</span><span class="sxs-lookup"><span data-stu-id="4dd01-106">The API reads data from Cosmos DB and returns the results to the web app.</span></span> <span data-ttu-id="4dd01-107">Hay disponible una implementación de referencia de esta arquitectura en [GitHub][github].</span><span class="sxs-lookup"><span data-stu-id="4dd01-107">A reference implementation for this architecture is available on [GitHub][github].</span></span>

![](./_images/serverless-web-app.png)
 
<span data-ttu-id="4dd01-108">El término sin servidor tiene dos significados diferentes pero relacionados:</span><span class="sxs-lookup"><span data-stu-id="4dd01-108">The term serverless has two distinct but related meanings:</span></span>

- <span data-ttu-id="4dd01-109">**Back-end como servicio** (BaaS).</span><span class="sxs-lookup"><span data-stu-id="4dd01-109">**Backend as a service** (BaaS).</span></span> <span data-ttu-id="4dd01-110">Los servicios de back-end en la nube, como el almacenamiento y las bases de datos, proporcionan API que permiten que las aplicaciones cliente se conecten directamente a estos servicios.</span><span class="sxs-lookup"><span data-stu-id="4dd01-110">Backend cloud services, such as databases and storage, provide APIs that enable client applications to connect directly to these services.</span></span> 
- <span data-ttu-id="4dd01-111">**Funciones como servicio** (FaaS).</span><span class="sxs-lookup"><span data-stu-id="4dd01-111">**Functions as a service** (FaaS).</span></span> <span data-ttu-id="4dd01-112">En este modelo, una "función" es un fragmento de código que se implementa en la nube y se ejecuta en un entorno de hospedaje que abstrae completamente los servidores que ejecutan el código.</span><span class="sxs-lookup"><span data-stu-id="4dd01-112">In this model, a "function" is a piece of code that is deployed to the cloud and runs inside a hosting environment that completely abstracts the servers that run the code.</span></span> 

<span data-ttu-id="4dd01-113">Ambas definiciones tienen en común la idea de que los desarrolladores y el personal de DevOps no necesitan implementar, configurar ni administrar servidores.</span><span class="sxs-lookup"><span data-stu-id="4dd01-113">Both definitions have in common the idea that developers and DevOps personnel don't need to deploy, configure, or manage servers.</span></span> <span data-ttu-id="4dd01-114">Esta arquitectura de referencia se centra en FaaS con Azure Functions, aunque la entrega de contenido web desde Azure Blob Storage es un ejemplo de BaaS.</span><span class="sxs-lookup"><span data-stu-id="4dd01-114">This reference architecture focuses on FaaS using Azure Functions, although serving web content from Azure Blob Storage is an example of BaaS.</span></span> <span data-ttu-id="4dd01-115">Algunas características importantes de FaaS son:</span><span class="sxs-lookup"><span data-stu-id="4dd01-115">Some important characteristics of FaaS are:</span></span>

1. <span data-ttu-id="4dd01-116">La plataforma asigna dinámicamente los recursos de proceso según sea necesario.</span><span class="sxs-lookup"><span data-stu-id="4dd01-116">Compute resources are allocated dynamically as needed by the platform.</span></span>
1. <span data-ttu-id="4dd01-117">Precios basados en el consumo: se le cobrará solo por los recursos de proceso utilizados para ejecutar el código.</span><span class="sxs-lookup"><span data-stu-id="4dd01-117">Consumption-based pricing: You are charged only for the compute resources used to execute your code.</span></span>
1. <span data-ttu-id="4dd01-118">Los recursos de proceso se escalan a petición en función del tráfico, sin necesidad de que el desarrollador realice ninguna configuración.</span><span class="sxs-lookup"><span data-stu-id="4dd01-118">The compute resources scale on demand based on traffic, without the developer needing to do any configuration.</span></span>

<span data-ttu-id="4dd01-119">Las funciones se ejecutan cuando se produce un desencadenador externo, como una solicitud HTTP o un mensaje que llega a una cola.</span><span class="sxs-lookup"><span data-stu-id="4dd01-119">Functions are executed when an external trigger occurs, such as an HTTP request or a message arriving on a queue.</span></span> <span data-ttu-id="4dd01-120">Esto hace que se trate de un [estilo de arquitectura orientada a eventos][event-driven] para arquitecturas sin servidor.</span><span class="sxs-lookup"><span data-stu-id="4dd01-120">This makes an [event-driven architecture style][event-driven] natural for serverless architectures.</span></span> <span data-ttu-id="4dd01-121">Para coordinar el trabajo entre los componentes de la arquitectura, considere el uso de agentes de mensajes o patrones de publicación y suscripción.</span><span class="sxs-lookup"><span data-stu-id="4dd01-121">To coordinate work between components in the architecture, consider using message brokers or pub/sub patterns.</span></span> <span data-ttu-id="4dd01-122">Para elegir entre las tecnologías de mensajería de Azure, consulte [Elección entre los servicios de Azure que entregan mensajes][azure-messaging].</span><span class="sxs-lookup"><span data-stu-id="4dd01-122">For help choosing between messaging technologies in Azure, see [Choose between Azure services that deliver messages][azure-messaging].</span></span>

## <a name="architecture"></a><span data-ttu-id="4dd01-123">Arquitectura</span><span class="sxs-lookup"><span data-stu-id="4dd01-123">Architecture</span></span>
<span data-ttu-id="4dd01-124">La arquitectura consta de los siguientes componentes:</span><span class="sxs-lookup"><span data-stu-id="4dd01-124">The architecture consists of the following components.</span></span>

<span data-ttu-id="4dd01-125">**Blob Storage**.</span><span class="sxs-lookup"><span data-stu-id="4dd01-125">**Blob Storage**.</span></span> <span data-ttu-id="4dd01-126">El contenido web estático, como los archivos HTML, CSS y JavaScript, se almacena en Azure Blob Storage y se entrega a los clientes mediante el uso del [hospedaje de sitios web estáticos][static-hosting].</span><span class="sxs-lookup"><span data-stu-id="4dd01-126">Static web content, such as HTML, CSS, and JavaScript files, are stored in Azure Blob Storage and served to clients by using [static website hosting][static-hosting].</span></span> <span data-ttu-id="4dd01-127">Toda la interacción dinámica se produce mediante código JavaScript que hace llamadas a las API de back-end.</span><span class="sxs-lookup"><span data-stu-id="4dd01-127">All dynamic interaction happens through JavaScript code making calls to the backend APIs.</span></span> <span data-ttu-id="4dd01-128">No hay código en el servidor para representar la página web.</span><span class="sxs-lookup"><span data-stu-id="4dd01-128">There is no server-side code to render the web page.</span></span> <span data-ttu-id="4dd01-129">El hospedaje de sitios web estáticos admite la indexación de documentos y páginas de error 404 personalizadas.</span><span class="sxs-lookup"><span data-stu-id="4dd01-129">Static website hosting supports index documents and custom 404 error pages.</span></span>

> [!NOTE]
> <span data-ttu-id="4dd01-130">El hospedaje de sitios web estáticos está actualmente en [versión preliminar][static-hosting-preview].</span><span class="sxs-lookup"><span data-stu-id="4dd01-130">Static website hosting is currently in [preview][static-hosting-preview].</span></span>

<span data-ttu-id="4dd01-131">**CDN**.</span><span class="sxs-lookup"><span data-stu-id="4dd01-131">**CDN**.</span></span> <span data-ttu-id="4dd01-132">Use [Azure Content Delivery Network][cdn] (CDN) para almacenar en caché el contenido y así reducir la latencia y acelerar la entrega de contenido, además de proporcionar un punto de conexión HTTPS.</span><span class="sxs-lookup"><span data-stu-id="4dd01-132">Use [Azure Content Delivery Network][cdn] (CDN) to cache content for lower latency and faster delivery of content, as well as providing an HTTPS endpoint.</span></span>

<span data-ttu-id="4dd01-133">**Aplicaciones de función**.</span><span class="sxs-lookup"><span data-stu-id="4dd01-133">**Function Apps**.</span></span> <span data-ttu-id="4dd01-134">[Azure Functions][functions] es una opción de proceso sin servidor.</span><span class="sxs-lookup"><span data-stu-id="4dd01-134">[Azure Functions][functions] is a serverless compute option.</span></span> <span data-ttu-id="4dd01-135">Utiliza un modelo orientado a eventos, en el que un desencadenador invoca un fragmento de código (una "función").</span><span class="sxs-lookup"><span data-stu-id="4dd01-135">It uses an event-driven model, where a piece of code (a "function") is invoked by a trigger.</span></span> <span data-ttu-id="4dd01-136">En esta arquitectura, la función se invoca cuando un cliente realiza una solicitud HTTP.</span><span class="sxs-lookup"><span data-stu-id="4dd01-136">In this architecture, the function is invoked when a client makes an HTTP request.</span></span> <span data-ttu-id="4dd01-137">La solicitud siempre se enruta mediante una puerta de enlace de API, como se describe a continuación.</span><span class="sxs-lookup"><span data-stu-id="4dd01-137">The request is always routed through an API gateway, described below.</span></span>

<span data-ttu-id="4dd01-138">**API Management**.</span><span class="sxs-lookup"><span data-stu-id="4dd01-138">**API Management**.</span></span> <span data-ttu-id="4dd01-139">[API Management][apim] proporciona una puerta de enlace de API que se coloca delante de la función HTTP.</span><span class="sxs-lookup"><span data-stu-id="4dd01-139">[API Management][apim] provides a API gateway that sits in front of the HTTP function.</span></span> <span data-ttu-id="4dd01-140">Puede usar API Management para publicar y administrar las API que usan las aplicaciones cliente.</span><span class="sxs-lookup"><span data-stu-id="4dd01-140">You can use API Management to publish and manage APIs used by client applications.</span></span> <span data-ttu-id="4dd01-141">El uso de una puerta de enlace ayuda a desacoplar la aplicación de front-end de las API de back-end.</span><span class="sxs-lookup"><span data-stu-id="4dd01-141">Using a gateway helps to decouple the front-end application from the back-end APIs.</span></span> <span data-ttu-id="4dd01-142">Por ejemplo, API Management puede reescribir las direcciones URL, transformar las solicitudes antes de alcanzar el back-end, establecer los encabezados de solicitud o respuesta y así sucesivamente.</span><span class="sxs-lookup"><span data-stu-id="4dd01-142">For example, API Management can rewrite URLs, transform requests before they reach the backend, set request or response headers, and so forth.</span></span>

<span data-ttu-id="4dd01-143">API Management también se puede utilizar para implementar cuestiones transversales, como:</span><span class="sxs-lookup"><span data-stu-id="4dd01-143">API Management can also be used to implement cross-cutting concerns such as:</span></span>

- <span data-ttu-id="4dd01-144">Aplicación de cuotas de uso y límites de frecuencia</span><span class="sxs-lookup"><span data-stu-id="4dd01-144">Enforcing usage quotas and rate limits</span></span>
- <span data-ttu-id="4dd01-145">Validación de tokens de OAuth para la autenticación</span><span class="sxs-lookup"><span data-stu-id="4dd01-145">Validating OAuth tokens for authentication</span></span>
- <span data-ttu-id="4dd01-146">Habilitación de solicitudes entre orígenes (CORS)</span><span class="sxs-lookup"><span data-stu-id="4dd01-146">Enabling cross-origin requests (CORS)</span></span>
- <span data-ttu-id="4dd01-147">Almacenamiento en caché de las respuestas</span><span class="sxs-lookup"><span data-stu-id="4dd01-147">Caching responses</span></span>
- <span data-ttu-id="4dd01-148">Supervisión y registro de solicitudes</span><span class="sxs-lookup"><span data-stu-id="4dd01-148">Monitoring and logging requests</span></span>  

<span data-ttu-id="4dd01-149">Si no necesita toda la funcionalidad proporcionada por API Management, otra opción es usar [Functions Proxies][functions-proxy].</span><span class="sxs-lookup"><span data-stu-id="4dd01-149">If you don't need all of the functionality provided by API Management, another option is to use [Functions Proxies][functions-proxy].</span></span> <span data-ttu-id="4dd01-150">Esta característica de Azure Functions le permite definir una única superficie de API para varias aplicaciones de función, mediante la creación de rutas a las funciones de back-end.</span><span class="sxs-lookup"><span data-stu-id="4dd01-150">This feature of Azure Functions lets you define a single API surface for multiple function apps, by creating routes to back-end functions.</span></span> <span data-ttu-id="4dd01-151">Functions Proxies también puede realizar transformaciones limitadas en la solicitud y la respuesta HTTP.</span><span class="sxs-lookup"><span data-stu-id="4dd01-151">Function proxies can also perform limited transformations on the HTTP request and response.</span></span> <span data-ttu-id="4dd01-152">Sin embargo, no proporciona las mismas funcionalidades enriquecidas basadas en directivas de API Management.</span><span class="sxs-lookup"><span data-stu-id="4dd01-152">However, they don't provide the same rich policy-based capabilities of API Management.</span></span>

<span data-ttu-id="4dd01-153">**Cosmos DB**.</span><span class="sxs-lookup"><span data-stu-id="4dd01-153">**Cosmos DB**.</span></span> <span data-ttu-id="4dd01-154">[Cosmos DB][cosmosdb] es un servicio de base de datos multi-modelo.</span><span class="sxs-lookup"><span data-stu-id="4dd01-154">[Cosmos DB][cosmosdb] is a multi-model database  service.</span></span> <span data-ttu-id="4dd01-155">En este escenario, la aplicación de función recupera documentos de Cosmos DB en respuesta a solicitudes HTTP GET del cliente.</span><span class="sxs-lookup"><span data-stu-id="4dd01-155">For this scenario, the function application fetches documents from Cosmos DB in response to HTTP GET requests from the client.</span></span>

<span data-ttu-id="4dd01-156">**Azure Active Directory** (Azure AD).</span><span class="sxs-lookup"><span data-stu-id="4dd01-156">**Azure Active Directory** (Azure AD).</span></span> <span data-ttu-id="4dd01-157">Los usuarios inician sesión en la aplicación web con sus credenciales de Azure AD.</span><span class="sxs-lookup"><span data-stu-id="4dd01-157">Users sign into the web application by using their Azure AD credentials.</span></span> <span data-ttu-id="4dd01-158">Azure AD devuelve un token de acceso para la API que la aplicación web utiliza para autenticar las solicitudes de API (consulte [Autenticación](#authentication)).</span><span class="sxs-lookup"><span data-stu-id="4dd01-158">Azure AD returns an access token for the API, which the web application uses to authenticate API requests (see [Authentication](#authentication)).</span></span>

<span data-ttu-id="4dd01-159">**Azure Monitor**.</span><span class="sxs-lookup"><span data-stu-id="4dd01-159">**Azure Monitor**.</span></span> <span data-ttu-id="4dd01-160">[Monitor][monitor] recopila métricas de rendimiento sobre los servicios de Azure implementados en la solución.</span><span class="sxs-lookup"><span data-stu-id="4dd01-160">[Monitor][monitor] collects performance metrics about the Azure services deployed in the solution.</span></span> <span data-ttu-id="4dd01-161">Puede visualizarlas en un panel para obtener visibilidad del mantenimiento de la solución.</span><span class="sxs-lookup"><span data-stu-id="4dd01-161">By visualizing these in a dashboard, you can get visibility into the health of the solution.</span></span> <span data-ttu-id="4dd01-162">También se recopilan los registros de aplicación.</span><span class="sxs-lookup"><span data-stu-id="4dd01-162">It also collected application logs.</span></span>

<span data-ttu-id="4dd01-163">**Azure Pipelines**.</span><span class="sxs-lookup"><span data-stu-id="4dd01-163">**Azure Pipelines**.</span></span> <span data-ttu-id="4dd01-164">[Pipelines][pipelines] es un servicio de integración continua (CI) y entrega continua (CD) que compila, prueba e implementa la aplicación.</span><span class="sxs-lookup"><span data-stu-id="4dd01-164">[Pipelines][pipelines] is a continuous integration (CI) and continuous delivery (CD) service that builds, tests, and deploys the application.</span></span>

## <a name="recommendations"></a><span data-ttu-id="4dd01-165">Recomendaciones</span><span class="sxs-lookup"><span data-stu-id="4dd01-165">Recommendations</span></span>

### <a name="function-app-plans"></a><span data-ttu-id="4dd01-166">Planes de Function App</span><span class="sxs-lookup"><span data-stu-id="4dd01-166">Function App plans</span></span>

<span data-ttu-id="4dd01-167">Azure Functions admite dos modelos de hospedaje.</span><span class="sxs-lookup"><span data-stu-id="4dd01-167">Azure Functions supports two hosting models.</span></span> <span data-ttu-id="4dd01-168">Con el **plan de consumo**, la potencia de proceso se asigna automáticamente cuando se ejecuta el código.</span><span class="sxs-lookup"><span data-stu-id="4dd01-168">With the **consumption plan**, compute power is automatically allocated when your code is running.</span></span>  <span data-ttu-id="4dd01-169">Con el plan de **App Service**, se asigna un conjunto de máquinas virtuales para el código.</span><span class="sxs-lookup"><span data-stu-id="4dd01-169">With the **App Service** plan, a set of VMs are allocated for your code.</span></span> <span data-ttu-id="4dd01-170">El plan de App Service define el número de máquinas virtuales y el tamaño de máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="4dd01-170">The App Service plan defines the number of VMs and the VM size.</span></span> 

<span data-ttu-id="4dd01-171">Tenga en cuenta que el plan de App Service no es estrictamente *sin servidor*, según la definición proporcionada anteriormente.</span><span class="sxs-lookup"><span data-stu-id="4dd01-171">Note that the App Service plan is not strictly *serverless*, according to the definition given above.</span></span> <span data-ttu-id="4dd01-172">Sin embargo, el modelo de programación es el mismo y el mismo código de la función se puede ejecutar en un plan de consumo y en un plan de App Service.</span><span class="sxs-lookup"><span data-stu-id="4dd01-172">The programming model is the same, however &mdash; the same function code can run in both a consumption plan and an App Service plan.</span></span>

<span data-ttu-id="4dd01-173">Estos son algunos de los factores a tener en cuenta al elegir qué tipo de plan se va a usar:</span><span class="sxs-lookup"><span data-stu-id="4dd01-173">Here are some factors to consider when choosing which type of plan to use:</span></span>

- <span data-ttu-id="4dd01-174">**Arranque en frío**.</span><span class="sxs-lookup"><span data-stu-id="4dd01-174">**Cold start**.</span></span> <span data-ttu-id="4dd01-175">Con el plan de consumo, una función que no se ha invocado recientemente requerirá cierta latencia adicional la próxima vez que se ejecute.</span><span class="sxs-lookup"><span data-stu-id="4dd01-175">With the consumption plan, a function that hasn't been invoked recently will incur some additional latency the next time it runs.</span></span> <span data-ttu-id="4dd01-176">Esta latencia adicional se debe a la asignación y preparación del entorno de tiempo de ejecución.</span><span class="sxs-lookup"><span data-stu-id="4dd01-176">This additional latency is due to allocating and preparing the runtime environment.</span></span> <span data-ttu-id="4dd01-177">Normalmente está en el orden de segundos, pero depende de varios factores, como el número de dependencias que se deban cargar.</span><span class="sxs-lookup"><span data-stu-id="4dd01-177">It is usually on the order of seconds but depends on several factors, including the number of dependencies that need to be loaded.</span></span> <span data-ttu-id="4dd01-178">Consulte [Descripción del arranque en frío sin servidor][functions-cold-start] para más información.</span><span class="sxs-lookup"><span data-stu-id="4dd01-178">For more information, see [Understanding Serverless Cold Start][functions-cold-start].</span></span> <span data-ttu-id="4dd01-179">El arranque en frío es normalmente más una cuestión de cargas de trabajo interactivas (desencadenadores HTTP) que de cargas de trabajo controladas por mensajes asincrónicas (desencadenadores de colas o de Event Hubs), porque los usuarios observan directamente la latencia adicional.</span><span class="sxs-lookup"><span data-stu-id="4dd01-179">Cold start is usually more of a concern for interactive workloads (HTTP triggers) than asynchronous message-driven workloads (queue or event hubs triggers), because the additional latency is directly observed by users.</span></span>
- <span data-ttu-id="4dd01-180">**Período de tiempo de expiración**.</span><span class="sxs-lookup"><span data-stu-id="4dd01-180">**Timeout period**.</span></span>  <span data-ttu-id="4dd01-181">En el plan de consumo, la ejecución de una función agota el tiempo de espera tras un período de tiempo [configurable][functions-timeout] (hasta un máximo de 10 minutos)</span><span class="sxs-lookup"><span data-stu-id="4dd01-181">In the consumption plan, a function execution times out after a [configurable][functions-timeout] period of time (to a maximum of 10 minutes)</span></span>
- <span data-ttu-id="4dd01-182">**Aislamiento de red virtual**.</span><span class="sxs-lookup"><span data-stu-id="4dd01-182">**Virtual network isolation**.</span></span> <span data-ttu-id="4dd01-183">El uso de un plan de App Service permite la ejecución de las funciones dentro de un [Entorno de App Service][ase], que es un entorno de hospedaje dedicado y aislado.</span><span class="sxs-lookup"><span data-stu-id="4dd01-183">Using an App Service plan allows functions to run inside of an [App Service Environment][ase], which is a dedicated and isolated hosting environment.</span></span>
- <span data-ttu-id="4dd01-184">**Modelo de precios**.</span><span class="sxs-lookup"><span data-stu-id="4dd01-184">**Pricing model**.</span></span> <span data-ttu-id="4dd01-185">El plan de consumo se factura por el número de ejecuciones y el consumo de recursos (memoria y tiempo de ejecución).</span><span class="sxs-lookup"><span data-stu-id="4dd01-185">The consumption plan is billed by the number of executions and resource consumption (memory &times; execution time).</span></span> <span data-ttu-id="4dd01-186">El plan de App Service se factura por horas en función de la SKU de las instancias de máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="4dd01-186">The App Service plan is billed hourly based on VM instance SKU.</span></span> <span data-ttu-id="4dd01-187">A menudo, el plan de consumo puede ser más económico que un plan de App Service, ya que solo se paga por los recursos de proceso utilizados.</span><span class="sxs-lookup"><span data-stu-id="4dd01-187">Often, the consumption plan can be cheaper than an App Service plan, because you pay only for the compute resources that you use.</span></span> <span data-ttu-id="4dd01-188">Esto es especialmente cierto si el tráfico sufre puntos máximos y mínimos.</span><span class="sxs-lookup"><span data-stu-id="4dd01-188">This is especially true if your traffic experiences peaks and troughs.</span></span> <span data-ttu-id="4dd01-189">Sin embargo, si una aplicación experimenta un rendimiento de alto volumen constante, un plan de App Service puede costar menos que el plan de consumo.</span><span class="sxs-lookup"><span data-stu-id="4dd01-189">However, if an application experiences constant high-volume throughput, an App Service plan may cost less than the consumption plan.</span></span>
- <span data-ttu-id="4dd01-190">**Escalado**.</span><span class="sxs-lookup"><span data-stu-id="4dd01-190">**Scaling**.</span></span> <span data-ttu-id="4dd01-191">Una gran ventaja del modelo de consumo es que se escala dinámicamente según sea necesario, en función del tráfico entrante.</span><span class="sxs-lookup"><span data-stu-id="4dd01-191">A big advantage of the consumption model is that it scales dynamically as needed, based on the incoming traffic.</span></span> <span data-ttu-id="4dd01-192">Aunque este escalado sucede rápidamente, hay un período de inicialización.</span><span class="sxs-lookup"><span data-stu-id="4dd01-192">While this scaling occurs quickly, there is still a ramp-up period.</span></span> <span data-ttu-id="4dd01-193">Para algunas cargas de trabajo, puede aprovisionar en exceso deliberadamente las máquinas virtuales de manera que pueda controlar ráfagas de tráfico con un tiempo de inicialización igual a cero.</span><span class="sxs-lookup"><span data-stu-id="4dd01-193">For some workloads, you might want to deliberately overprovision the VMs, so that you can handle bursts of traffic with zero ramp-up time.</span></span> <span data-ttu-id="4dd01-194">En ese caso, considere la posibilidad de un plan de App Service.</span><span class="sxs-lookup"><span data-stu-id="4dd01-194">In that case, consider an App Service plan.</span></span>

### <a name="function-app-boundaries"></a><span data-ttu-id="4dd01-195">Límites de una aplicación de función</span><span class="sxs-lookup"><span data-stu-id="4dd01-195">Function App boundaries</span></span>

<span data-ttu-id="4dd01-196">Una *aplicación de función* hospeda la ejecución de una o más *funciones*.</span><span class="sxs-lookup"><span data-stu-id="4dd01-196">A *function app* hosts the execution of one or more *functions*.</span></span> <span data-ttu-id="4dd01-197">Puede usar una aplicación de función para agrupar varias funciones como una unidad lógica.</span><span class="sxs-lookup"><span data-stu-id="4dd01-197">You can use a function app to group several functions together as a logical unit.</span></span> <span data-ttu-id="4dd01-198">Dentro de una aplicación de función, las funciones comparten la misma configuración de aplicación, plan de hospedaje y ciclo de vida de implementación.</span><span class="sxs-lookup"><span data-stu-id="4dd01-198">Within a function app, the functions share the same application settings, hosting plan, and deployment lifecycle.</span></span> <span data-ttu-id="4dd01-199">Cada aplicación de función tiene su propio nombre de host.</span><span class="sxs-lookup"><span data-stu-id="4dd01-199">Each function app has its own hostname.</span></span>  

<span data-ttu-id="4dd01-200">Use aplicaciones de función para agrupar funciones que comparten el mismo ciclo de vida y configuración.</span><span class="sxs-lookup"><span data-stu-id="4dd01-200">Use function apps to group functions that share the same lifecycle and settings.</span></span> <span data-ttu-id="4dd01-201">Las funciones que no comparten el mismo ciclo de vida deben hospedarse en distintas aplicaciones de función.</span><span class="sxs-lookup"><span data-stu-id="4dd01-201">Functions that don't share the same lifecycle should be hosted in different function apps.</span></span> 

<span data-ttu-id="4dd01-202">Considere la posibilidad de adoptar un enfoque de microservicios, en el que cada aplicación de función representa un microservicio, que posiblemente se compone de varias funciones relacionadas.</span><span class="sxs-lookup"><span data-stu-id="4dd01-202">Consider taking a microservices approach, where each function app represents one microservice, possibly consisting of several related functions.</span></span> <span data-ttu-id="4dd01-203">En una arquitectura de microservicios, los servicios deben tener un acoplamiento flexible y una alta cohesión funcional.</span><span class="sxs-lookup"><span data-stu-id="4dd01-203">In a microservices architecture, services should have loose coupling and high functional cohesion.</span></span> <span data-ttu-id="4dd01-204">Un acoplamiento *flexible* significa que puede cambiar un servicio sin necesidad de que los demás se actualicen al mismo tiempo.</span><span class="sxs-lookup"><span data-stu-id="4dd01-204">*Loosely* coupled means you can change one service without requiring other services to be updated at the same time.</span></span> <span data-ttu-id="4dd01-205">*Cohesiva* significa que un servicio tiene un propósito único y bien definido.</span><span class="sxs-lookup"><span data-stu-id="4dd01-205">*Cohesive* means a service has a single, well-defined purpose.</span></span> <span data-ttu-id="4dd01-206">Para más información sobre estas ideas, consulte [Diseño de microservicios: análisis del dominio][microservices-domain-analysis].</span><span class="sxs-lookup"><span data-stu-id="4dd01-206">For more discussion of these ideas, see [Designing microservices: Domain analysis][microservices-domain-analysis].</span></span>

### <a name="function-bindings"></a><span data-ttu-id="4dd01-207">Enlaces de funciones</span><span class="sxs-lookup"><span data-stu-id="4dd01-207">Function bindings</span></span>

<span data-ttu-id="4dd01-208">Utilice [enlaces][functions-bindings] de funciones cuando sea posible.</span><span class="sxs-lookup"><span data-stu-id="4dd01-208">Use Functions [bindings][functions-bindings] when possible.</span></span> <span data-ttu-id="4dd01-209">Los enlaces proporcionan una forma declarativa de conectar el código a los datos e integrar con otros servicios de Azure.</span><span class="sxs-lookup"><span data-stu-id="4dd01-209">Bindings provide a declarative way to connect your code to data and integrate with other Azure services.</span></span> <span data-ttu-id="4dd01-210">Un enlace de entrada rellena un parámetro de entrada a partir de un origen de datos externo.</span><span class="sxs-lookup"><span data-stu-id="4dd01-210">An input binding populates an input parameter from an external data source.</span></span> <span data-ttu-id="4dd01-211">Un enlace de salida envía el valor devuelto de la función a un receptor de datos, como una cola o una base de datos.</span><span class="sxs-lookup"><span data-stu-id="4dd01-211">An output binding sends the function's return value to a data sink, such as a queue or database.</span></span>

<span data-ttu-id="4dd01-212">Por ejemplo, la función `GetStatus` de la implementación de referencia usa el [enlace de entrada][cosmosdb-input-binding] de Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="4dd01-212">For example, the `GetStatus` function in the reference implementation uses the Cosmos DB [input binding][cosmosdb-input-binding].</span></span> <span data-ttu-id="4dd01-213">Este enlace está configurado para buscar un documento en Cosmos DB mediante los parámetros de consulta que se toman de la cadena de consulta de la solicitud HTTP.</span><span class="sxs-lookup"><span data-stu-id="4dd01-213">This binding is configured to look up a document in Cosmos DB, using query parameters that are taken from the query string in the HTTP request.</span></span> <span data-ttu-id="4dd01-214">Si se encuentra el documento, se pasa a la función como un parámetro.</span><span class="sxs-lookup"><span data-stu-id="4dd01-214">If the document is found, it is passed to the function as a parameter.</span></span>

```csharp
[FunctionName("GetStatusFunction")]
public static Task<IActionResult> Run(
    [HttpTrigger(AuthorizationLevel.Function, "get", Route = null)] HttpRequest req, 
    [CosmosDB(
        databaseName: "%COSMOSDB_DATABASE_NAME%",
        collectionName: "%COSMOSDB_DATABASE_COL%",
        ConnectionStringSetting = "COSMOSDB_CONNECTION_STRING",
        Id = "{Query.deviceId}",
        PartitionKey = "{Query.deviceId}")] dynamic deviceStatus, 
    ILogger log)
{
    ...
}
```

<span data-ttu-id="4dd01-215">Mediante el uso de enlaces, no es necesario escribir código que se comunique directamente con el servicio, lo que simplifica el código de la función y también abstrae los detalles del origen o el receptor de datos.</span><span class="sxs-lookup"><span data-stu-id="4dd01-215">By using bindings, you don't need to write code that talks directly to the service, which makes the function code simpler and also abstracts the details of the data source or sink.</span></span> <span data-ttu-id="4dd01-216">En algunos casos, sin embargo, puede que necesite una lógica más compleja que la que proporciona el enlace.</span><span class="sxs-lookup"><span data-stu-id="4dd01-216">In some cases, however, you may need more complex logic than the binding provides.</span></span> <span data-ttu-id="4dd01-217">En ese caso, use directamente los SDK de cliente de Azure.</span><span class="sxs-lookup"><span data-stu-id="4dd01-217">In that case, use the Azure client SDKs directly.</span></span>

## <a name="scalability-considerations"></a><span data-ttu-id="4dd01-218">Consideraciones sobre escalabilidad</span><span class="sxs-lookup"><span data-stu-id="4dd01-218">Scalability considerations</span></span>

<span data-ttu-id="4dd01-219">**Funciones**.</span><span class="sxs-lookup"><span data-stu-id="4dd01-219">**Functions**.</span></span> <span data-ttu-id="4dd01-220">Para el plan de consumo, el desencadenador HTTP se escala según el tráfico.</span><span class="sxs-lookup"><span data-stu-id="4dd01-220">For the consumption plan, the HTTP trigger scales based on the traffic.</span></span> <span data-ttu-id="4dd01-221">Hay un límite para el número de instancias simultáneas de la función, pero cada instancia puede procesar más de una solicitud a la vez.</span><span class="sxs-lookup"><span data-stu-id="4dd01-221">There is a limit to the number of concurrent function instances, but each instance can process more than one request at a time.</span></span> <span data-ttu-id="4dd01-222">Para un plan de App Service, el desencadenador HTTP se escala según el número de instancias de máquina virtual, que puede ser un valor fijo o se puede escalar automáticamente basándose en un conjunto de reglas de escalado automático.</span><span class="sxs-lookup"><span data-stu-id="4dd01-222">For an App Service plan, the HTTP trigger scales according to the number of VM instances, which can be a fixed value or can autoscale based on a set of autoscaling rules.</span></span> <span data-ttu-id="4dd01-223">Para más información, consulte [Escalado y hospedaje de Azure Functions][functions-scale].</span><span class="sxs-lookup"><span data-stu-id="4dd01-223">For information, see [Azure Functions scale and hosting][functions-scale].</span></span> 

<span data-ttu-id="4dd01-224">**Cosmos DB**.</span><span class="sxs-lookup"><span data-stu-id="4dd01-224">**Cosmos DB**.</span></span> <span data-ttu-id="4dd01-225">La capacidad de rendimiento de Cosmos DB se mide en [unidades de solicitud][ru] (RU).</span><span class="sxs-lookup"><span data-stu-id="4dd01-225">Throughput capacity for Cosmos DB is measured in [Request Units][ru] (RU).</span></span> <span data-ttu-id="4dd01-226">1 RU corresponde al rendimiento necesario para una solicitud GET de un documento de 1 KB.</span><span class="sxs-lookup"><span data-stu-id="4dd01-226">A 1-RU throughput corresponds to the throughput need to GET a 1KB document.</span></span> <span data-ttu-id="4dd01-227">Para escalar un contenedor de Cosmos DB más allá de 10 000 RU, debe especificar una [clave de partición][partition-key] al crear el contenedor e incluir la clave de partición en todos los documentos que cree.</span><span class="sxs-lookup"><span data-stu-id="4dd01-227">In order to scale a Cosmos DB container past 10,000 RU, you must specify a [partition key][partition-key] when you create the container and include the partition key in every document that you create.</span></span> <span data-ttu-id="4dd01-228">Para más información sobre las claves de partición, consulte [Particionado y escalado en Azure Cosmos DB][cosmosdb-scale].</span><span class="sxs-lookup"><span data-stu-id="4dd01-228">For more information about partition keys, see [Partition and scale in Azure Cosmos DB][cosmosdb-scale].</span></span>

<span data-ttu-id="4dd01-229">**API Management**.</span><span class="sxs-lookup"><span data-stu-id="4dd01-229">**API Management**.</span></span> <span data-ttu-id="4dd01-230">API Management se puede escalar horizontalmente y admite el escalado automático basado en reglas.</span><span class="sxs-lookup"><span data-stu-id="4dd01-230">API Management can scale out and supports rule-based autoscaling.</span></span> <span data-ttu-id="4dd01-231">Tenga en cuenta que el proceso de escalado tarda al menos 20 minutos.</span><span class="sxs-lookup"><span data-stu-id="4dd01-231">Note that the scaling process takes at least 20 minutes.</span></span> <span data-ttu-id="4dd01-232">Si se trata de tráfico por ráfagas, se debe aprovisionar para la máxima ráfaga de tráfico esperada.</span><span class="sxs-lookup"><span data-stu-id="4dd01-232">If your traffic is bursty, you should provision for the maximum burst traffic that you expect.</span></span> <span data-ttu-id="4dd01-233">Sin embargo, el escalado automático es útil para controlar las variaciones horarias o diarias del tráfico.</span><span class="sxs-lookup"><span data-stu-id="4dd01-233">However, autoscaling is useful for handling hourly or daily variations in traffic.</span></span> <span data-ttu-id="4dd01-234">Para más información, consulte [Escalado automático de una instancia de Azure API Management][apim-scale].</span><span class="sxs-lookup"><span data-stu-id="4dd01-234">For more information, see [Automatically scale an Azure API Management instance][apim-scale].</span></span>

## <a name="disaster-recovery-considerations"></a><span data-ttu-id="4dd01-235">Consideraciones acerca de la recuperación ante desastres</span><span class="sxs-lookup"><span data-stu-id="4dd01-235">Disaster recovery considerations</span></span>

<span data-ttu-id="4dd01-236">La implementación que se muestra aquí reside en una sola región de Azure.</span><span class="sxs-lookup"><span data-stu-id="4dd01-236">The deployment shown here resides in a single Azure region.</span></span> <span data-ttu-id="4dd01-237">Para un enfoque más resistente a la recuperación ante desastres, aproveche las ventajas de las características de distribución geográfica de los distintos servicios:</span><span class="sxs-lookup"><span data-stu-id="4dd01-237">For a more resilient approach to disaster-recovery, take advantage of the geo-distribution features in the various services:</span></span>

- <span data-ttu-id="4dd01-238">API Management admite la implementación en varias regiones, lo que se puede utilizar distribuir una única instancia de API Management en cualquier número de regiones de Azure.</span><span class="sxs-lookup"><span data-stu-id="4dd01-238">API Management supports multi-region deployment, which can be used to distribute a single API Management instance across any number of Azure regions.</span></span> <span data-ttu-id="4dd01-239">Para más información, consulte [Implementación de una instancia del servicio Azure API Management en varias regiones de Azure][api-geo].</span><span class="sxs-lookup"><span data-stu-id="4dd01-239">For more information, see [How to deploy an Azure API Management service instance to multiple Azure regions][api-geo].</span></span>

- <span data-ttu-id="4dd01-240">Use [Traffic Manager][tm] para enrutar las solicitudes HTTP a la región primaria.</span><span class="sxs-lookup"><span data-stu-id="4dd01-240">Use [Traffic Manager][tm] to route HTTP requests to the primary region.</span></span> <span data-ttu-id="4dd01-241">Si la aplicación de función que se ejecuta en dicha región no está disponible, Traffic Manager conmuta por error a la región secundaria.</span><span class="sxs-lookup"><span data-stu-id="4dd01-241">If the Function App running in that region becomes unavailable, Traffic Manager can fail over to a secondary region.</span></span>

- <span data-ttu-id="4dd01-242">Cosmos DB admite [varias regiones maestras][cosmosdb-geo], lo que permite operaciones de escritura en cualquier región que se agregue a la cuenta de Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="4dd01-242">Cosmos DB supports [multiple master regions][cosmosdb-geo], which enables writes to any region that you add to your Cosmos DB account.</span></span> <span data-ttu-id="4dd01-243">Si no habilita la funcionalidad de arquitectura multimaestro, todavía puede conmutar por error a la región de escritura principal.</span><span class="sxs-lookup"><span data-stu-id="4dd01-243">If you don't enable multi-master, you can still fail over the primary write region.</span></span> <span data-ttu-id="4dd01-244">Los SDK de cliente de Cosmos DB y los enlaces de la función de Azure controlan automáticamente la conmutación por error, por lo que no es necesario actualizar los parámetros de configuración de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="4dd01-244">The Cosmos DB client SDKs and the Azure Function bindings automatically handle the failover, so you don't need to update any application configuration settings.</span></span>

## <a name="security-considerations"></a><span data-ttu-id="4dd01-245">Consideraciones sobre la seguridad</span><span class="sxs-lookup"><span data-stu-id="4dd01-245">Security considerations</span></span>

### <a name="authentication"></a><span data-ttu-id="4dd01-246">Autenticación</span><span class="sxs-lookup"><span data-stu-id="4dd01-246">Authentication</span></span>

<span data-ttu-id="4dd01-247">La API `GetStatus` de la implementación de referencia usa Azure AD para autenticar las solicitudes.</span><span class="sxs-lookup"><span data-stu-id="4dd01-247">The `GetStatus` API in the reference implementation uses Azure AD to authenticate requests.</span></span> <span data-ttu-id="4dd01-248">Azure AD admite el protocolo OpenID Connect, que es un protocolo de autenticación que se basa en el protocolo OAuth 2.</span><span class="sxs-lookup"><span data-stu-id="4dd01-248">Azure AD supports the Open ID Connect protocol, which is an authentication protocol built on top of the OAuth 2 protocol.</span></span>

<span data-ttu-id="4dd01-249">En esta arquitectura, la aplicación cliente es una aplicación de página única (SPA) que se ejecuta en el explorador.</span><span class="sxs-lookup"><span data-stu-id="4dd01-249">In this architecture, the client application is a single-page application (SPA) that runs in the browser.</span></span> <span data-ttu-id="4dd01-250">Este tipo de aplicación cliente no puede contener un secreto de cliente ni un código de autorización oculto, por lo que el flujo de concesión implícita es adecuado.</span><span class="sxs-lookup"><span data-stu-id="4dd01-250">This type of client application cannot keep a client secret or an authorization code hidden, so the implicit grant flow is appropriate.</span></span> <span data-ttu-id="4dd01-251">(Consulte [¿Qué flujo de OAuth 2.0 debo usar?][oauth-flow]).</span><span class="sxs-lookup"><span data-stu-id="4dd01-251">(See [Which OAuth 2.0 flow should I use?][oauth-flow]).</span></span> <span data-ttu-id="4dd01-252">Este es el flujo general:</span><span class="sxs-lookup"><span data-stu-id="4dd01-252">Here's the overall flow:</span></span>

1. <span data-ttu-id="4dd01-253">El usuario hace clic en el vínculo "Iniciar sesión" de la aplicación web.</span><span class="sxs-lookup"><span data-stu-id="4dd01-253">The user clicks the "Sign in" link in the web application.</span></span>
1. <span data-ttu-id="4dd01-254">El explorador se redirige la página de inicio de sesión de Azure AD.</span><span class="sxs-lookup"><span data-stu-id="4dd01-254">The browser is redirected the Azure AD sign in page.</span></span> 
1. <span data-ttu-id="4dd01-255">El usuario inicia sesión.</span><span class="sxs-lookup"><span data-stu-id="4dd01-255">The user signs in.</span></span>
1. <span data-ttu-id="4dd01-256">Azure AD redirige de vuelta a la aplicación cliente, incluyendo un token de acceso en el fragmento de dirección URL.</span><span class="sxs-lookup"><span data-stu-id="4dd01-256">Azure AD redirects back to the client application, including an access token in the URL fragment.</span></span>
1. <span data-ttu-id="4dd01-257">Cuando la aplicación web llama a la API, incluye el token de acceso en el encabezado de autenticación.</span><span class="sxs-lookup"><span data-stu-id="4dd01-257">When the web application calls the API, it includes the access token in the Authentication header.</span></span> <span data-ttu-id="4dd01-258">El identificador de aplicación se envía como notificación de audiencia ("aud") en el token de acceso.</span><span class="sxs-lookup"><span data-stu-id="4dd01-258">The application ID is sent as the audience ('aud') claim in the access token.</span></span> 
1. <span data-ttu-id="4dd01-259">La API de back-end valida el token de acceso.</span><span class="sxs-lookup"><span data-stu-id="4dd01-259">The backend API validates the access token.</span></span>

<span data-ttu-id="4dd01-260">Para configurar la autenticación:</span><span class="sxs-lookup"><span data-stu-id="4dd01-260">To configure authentication:</span></span>

- <span data-ttu-id="4dd01-261">Registre una aplicación en el inquilino de Azure AD.</span><span class="sxs-lookup"><span data-stu-id="4dd01-261">Register an application in your Azure AD tenant.</span></span> <span data-ttu-id="4dd01-262">Esto genera un identificador de aplicación, que el cliente incluye con la dirección URL de inicio de sesión.</span><span class="sxs-lookup"><span data-stu-id="4dd01-262">This generates an application ID, which the client includes with the login URL.</span></span>

- <span data-ttu-id="4dd01-263">Habilite la autenticación de Azure AD en la aplicación de función.</span><span class="sxs-lookup"><span data-stu-id="4dd01-263">Enable Azure AD authentication inside the Function App.</span></span> <span data-ttu-id="4dd01-264">Para más información, consulte [Autenticación y autorización en Azure App Service][app-service-auth].</span><span class="sxs-lookup"><span data-stu-id="4dd01-264">For more information, see [Authentication and authorization in Azure App Service][app-service-auth].</span></span>

- <span data-ttu-id="4dd01-265">Agregue la [directiva validate-jwt][apim-validate-jwt] a API Management para autorizar previamente la solicitud mediante la validación del token de acceso.</span><span class="sxs-lookup"><span data-stu-id="4dd01-265">Add the [validate-jwt policy][apim-validate-jwt] to API Management to pre-authorize the request by validating the access token.</span></span>

<span data-ttu-id="4dd01-266">Para más información, consulte el [Léame de GitHub][readme].</span><span class="sxs-lookup"><span data-stu-id="4dd01-266">For more details, see the [GitHub readme][readme].</span></span>

<span data-ttu-id="4dd01-267">Se recomienda crear registros de aplicaciones independientes de Azure AD para el cliente de aplicación y la API de back-end.</span><span class="sxs-lookup"><span data-stu-id="4dd01-267">It's recommended to create separate app registrations in Azure AD for the client application and the backend API.</span></span> <span data-ttu-id="4dd01-268">Conceda el permiso de aplicación cliente para llamar a la API.</span><span class="sxs-lookup"><span data-stu-id="4dd01-268">Grant the client application permission to call the API.</span></span> <span data-ttu-id="4dd01-269">Este enfoque le ofrece la posibilidad de definir varias API y clientes y de controlar los permisos de cada uno.</span><span class="sxs-lookup"><span data-stu-id="4dd01-269">This approach gives you the flexibility to define multiple APIs and clients and control the permissions for each.</span></span> 

<span data-ttu-id="4dd01-270">En una API, use los [ámbitos][scopes] para dotar a las aplicaciones con un control detallado sobre los permisos que solicitan a un usuario.</span><span class="sxs-lookup"><span data-stu-id="4dd01-270">Within an API, use [scopes][scopes] to give applications fine-grained control over what permissions they request from a user.</span></span> <span data-ttu-id="4dd01-271">Por ejemplo, puede que una API tenga los ámbitos `Read` y `Write`, y puede que una aplicación cliente determinada solicite al usuario que autorice solo permisos `Read`.</span><span class="sxs-lookup"><span data-stu-id="4dd01-271">For example, an API might have `Read` and `Write` scopes, and a particular client app might ask the user to authorize `Read` permissions only.</span></span>

### <a name="authorization"></a><span data-ttu-id="4dd01-272">Autorización</span><span class="sxs-lookup"><span data-stu-id="4dd01-272">Authorization</span></span>

<span data-ttu-id="4dd01-273">En muchas aplicaciones, la API de back-end debe comprobar si un usuario tiene permiso para realizar una acción determinada.</span><span class="sxs-lookup"><span data-stu-id="4dd01-273">In many applications, the backend API must check whether a user has permission to perform a given action.</span></span> <span data-ttu-id="4dd01-274">Se recomienda el uso de la [autorización basada en notificaciones][claims], en la que el proveedor de identidades (en este caso, Azure AD) conduce la información sobre el usuario utilizada para tomar decisiones de autorización.</span><span class="sxs-lookup"><span data-stu-id="4dd01-274">It's recommended to use [claims-based authorization][claims], where information about the user is conveyed by the identity provider (in this case, Azure AD) and used to make authorization decisions.</span></span> 

<span data-ttu-id="4dd01-275">Se proporcionan algunas notificaciones dentro del token de identificador que Azure AD devuelve al cliente.</span><span class="sxs-lookup"><span data-stu-id="4dd01-275">Some claims are provided inside the ID token that Azure AD returns to the client.</span></span> <span data-ttu-id="4dd01-276">Puede obtener estas notificaciones procedentes de la aplicación de función mediante el examen del encabezado X-MS-CLIENT-PRINCIPAL de la solicitud.</span><span class="sxs-lookup"><span data-stu-id="4dd01-276">You can get these claims from within the function app by examining the X-MS-CLIENT-PRINCIPAL header in the request.</span></span> <span data-ttu-id="4dd01-277">Para otras notificaciones, use [Microsoft Graph][graph] para consultar Azure AD (requiere consentimiento del usuario durante el inicio de sesión).</span><span class="sxs-lookup"><span data-stu-id="4dd01-277">For other claims, use [Microsoft Graph][graph] to query Azure AD (requires user consent during sign-in).</span></span> 

<span data-ttu-id="4dd01-278">Por ejemplo, al registrar una aplicación en Azure AD, puede definir un conjunto de roles de aplicación en el manifiesto de registro de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="4dd01-278">For example, when you register an application in Azure AD, you can define a set of application roles in the application's registration manifest.</span></span> <span data-ttu-id="4dd01-279">Cuando un usuario inicia sesión en la aplicación, Azure AD incluye una notificación "roles" por cada rol que se ha concedido al usuario (incluidos los roles heredados por la pertenencia a grupos).</span><span class="sxs-lookup"><span data-stu-id="4dd01-279">When a user signs into the application, Azure AD includes a "roles" claim for each role that the user has been granted (including roles that are inherited through group membership).</span></span> 

<span data-ttu-id="4dd01-280">En la implementación de referencia, la función comprueba si el usuario autenticado es miembro del rol de aplicación `GetStatus`.</span><span class="sxs-lookup"><span data-stu-id="4dd01-280">In the reference implementation, the function checks whether the authenticated user is a member of the `GetStatus` application role.</span></span> <span data-ttu-id="4dd01-281">Si no es así, la función devuelve una respuesta HTTP no autorizado (401).</span><span class="sxs-lookup"><span data-stu-id="4dd01-281">If not, the function returns an HTTP Unauthorized (401) response.</span></span> 

```csharp
[FunctionName("GetStatusFunction")]
public static Task<IActionResult> Run(
    [HttpTrigger(AuthorizationLevel.Function, "get", "post", Route = null)] HttpRequest req, 
    [CosmosDB(
        databaseName: "%COSMOSDB_DATABASE_NAME%",
        collectionName: "%COSMOSDB_DATABASE_COL%",
        ConnectionStringSetting = "COSMOSDB_CONNECTION_STRING",
        Id = "{Query.deviceId}",
        PartitionKey = "{Query.deviceId}")] dynamic deviceStatus, 
    ILogger log)
{
    log.LogInformation("Processing GetStatus request.");

    return req.HandleIfAuthorizedForRoles(new[] { GetDeviceStatusRoleName },
        async () =>
        {
            string deviceId = req.Query["deviceId"];
            if (deviceId == null)
            {
                return new BadRequestObjectResult("Missing DeviceId");
            }

            return await Task.FromResult<IActionResult>(deviceStatus != null
                    ? (ActionResult)new OkObjectResult(deviceStatus)
                    : new NotFoundResult());
        },
        log);
}
```

<span data-ttu-id="4dd01-282">En este ejemplo de código, `HandleIfAuthorizedForRoles` es un método de extensión que comprueba la notificación de rol y devuelve HTTP 401 si no se encuentra la notificación.</span><span class="sxs-lookup"><span data-stu-id="4dd01-282">In this code example, `HandleIfAuthorizedForRoles` is an extension method that checks for the role claim and returns HTTP 401 if the claim isn't found.</span></span> <span data-ttu-id="4dd01-283">Puede encontrar el código fuente [aquí][HttpRequestAuthorizationExtensions].</span><span class="sxs-lookup"><span data-stu-id="4dd01-283">You can find the source code [here][HttpRequestAuthorizationExtensions].</span></span> <span data-ttu-id="4dd01-284">Observe que `HandleIfAuthorizedForRoles` toma un parámetro `ILogger`.</span><span class="sxs-lookup"><span data-stu-id="4dd01-284">Notice that `HandleIfAuthorizedForRoles` takes an `ILogger` parameter.</span></span> <span data-ttu-id="4dd01-285">Debe registrar las solicitudes no autorizadas para disponer de un registro de auditoría y poder diagnosticar problemas si es necesario.</span><span class="sxs-lookup"><span data-stu-id="4dd01-285">You should log unauthorized requests so that you have an audit trail and can diagnose issues if needed.</span></span> <span data-ttu-id="4dd01-286">Al mismo tiempo, evite incluir información detallada dentro de la respuesta HTTP 401.</span><span class="sxs-lookup"><span data-stu-id="4dd01-286">At the same time, avoid leaking any detailed information inside the HTTP 401 response.</span></span>

### <a name="cors"></a><span data-ttu-id="4dd01-287">CORS</span><span class="sxs-lookup"><span data-stu-id="4dd01-287">CORS</span></span>

<span data-ttu-id="4dd01-288">En esta arquitectura de referencia, la aplicación web y la API no comparten el mismo origen.</span><span class="sxs-lookup"><span data-stu-id="4dd01-288">In this reference architecture, the web application and the API do not share the same origin.</span></span> <span data-ttu-id="4dd01-289">Esto significa que, cuando la aplicación llama a la API, es una solicitud entre orígenes.</span><span class="sxs-lookup"><span data-stu-id="4dd01-289">That means when the application calls the API, it is a cross-origin request.</span></span> <span data-ttu-id="4dd01-290">La seguridad del explorador impide que una página web realice solicitudes AJAX a otro dominio.</span><span class="sxs-lookup"><span data-stu-id="4dd01-290">Browser security prevents a web page from making AJAX requests to another domain.</span></span> <span data-ttu-id="4dd01-291">Esta restricción se conoce como la *directiva de mismo origen* y evita que un sitio malintencionado lea información confidencial de otro sitio.</span><span class="sxs-lookup"><span data-stu-id="4dd01-291">This restriction is called the *same-origin policy* and prevents a malicious site from reading sensitive data from another site.</span></span> <span data-ttu-id="4dd01-292">Para habilitar una solicitud entre orígenes, agregue una [directiva][cors-policy] de uso compartido de recursos entre orígenes (CORS) a la puerta de enlace de API Management:</span><span class="sxs-lookup"><span data-stu-id="4dd01-292">To enable a cross-origin request, add a Cross-Origin Resource Sharing (CORS) [policy][cors-policy] to the API Management gateway:</span></span>

```xml
<cors allow-credentials="true">
    <allowed-origins>
        <origin>[Website URL]</origin>
    </allowed-origins>
    <allowed-methods>
        <method>GET</method>
    </allowed-methods>
    <allowed-headers>
        <header>*</header>
    </allowed-headers>
</cors>
```

<span data-ttu-id="4dd01-293">En este ejemplo, el atributo **allow-credentials** es **true**.</span><span class="sxs-lookup"><span data-stu-id="4dd01-293">In this example, the **allow-credentials** attribute is **true**.</span></span> <span data-ttu-id="4dd01-294">Esto autoriza al explorador para el envío de las credenciales (incluidas las cookies) con la solicitud.</span><span class="sxs-lookup"><span data-stu-id="4dd01-294">This authorizes the browser to send credentials (including cookies) with the request.</span></span> <span data-ttu-id="4dd01-295">En caso contrario, el explorador no envía las credenciales con una solicitud entre orígenes de forma predeterminada.</span><span class="sxs-lookup"><span data-stu-id="4dd01-295">Otherwise, by default the browser does not send credentials with a cross-origin request.</span></span>

> [!NOTE] 
> <span data-ttu-id="4dd01-296">Sea muy cuidadoso al establecer **allow-credentials** en **true**, ya que significa que un sitio web puede enviar las credenciales del usuario a la API en nombre del usuario, sin que el usuario sea consciente de ello.</span><span class="sxs-lookup"><span data-stu-id="4dd01-296">Be very careful about setting **allow-credentials** to **true**, because it means a website can send the user's credentials to your API on the user's behalf, without the user being aware.</span></span> <span data-ttu-id="4dd01-297">Debe confiar en el origen permitido.</span><span class="sxs-lookup"><span data-stu-id="4dd01-297">You must trust the allowed origin.</span></span>

### <a name="enforce-https"></a><span data-ttu-id="4dd01-298">Aplicación de HTTPS</span><span class="sxs-lookup"><span data-stu-id="4dd01-298">Enforce HTTPS</span></span>

<span data-ttu-id="4dd01-299">Para mayor seguridad, puede requerir HTTPS en toda la canalización de la solicitud:</span><span class="sxs-lookup"><span data-stu-id="4dd01-299">For maximum security, require HTTPS throughout the request pipeline:</span></span>

- <span data-ttu-id="4dd01-300">**CDN**.</span><span class="sxs-lookup"><span data-stu-id="4dd01-300">**CDN**.</span></span> <span data-ttu-id="4dd01-301">Azure CDN admite HTTPS en el subdominio `*.azureedge.net` de manera predeterminada.</span><span class="sxs-lookup"><span data-stu-id="4dd01-301">Azure CDN supports HTTPS on the `*.azureedge.net` subdomain by default.</span></span> <span data-ttu-id="4dd01-302">Para habilitar HTTPS en la red CDN para los nombres de dominio personalizados, consulte [Tutorial: Configuración de HTTPS en un dominio personalizado de Azure CDN][cdn-https].</span><span class="sxs-lookup"><span data-stu-id="4dd01-302">To enable HTTPS in the CDN for custom domain names, see [Tutorial: Configure HTTPS on an Azure CDN custom domain][cdn-https].</span></span> 

- <span data-ttu-id="4dd01-303">**Hospedaje de sitios web estáticos**.</span><span class="sxs-lookup"><span data-stu-id="4dd01-303">**Static website hosting**.</span></span> <span data-ttu-id="4dd01-304">Habilite la opción "[Se requiere transferencia segura][storage-https]" en la cuenta de Storage.</span><span class="sxs-lookup"><span data-stu-id="4dd01-304">Enable the "[Secure transfer required][storage-https]" option on the Storage account.</span></span> <span data-ttu-id="4dd01-305">Cuando esta opción está habilitada, la cuenta de almacenamiento solo permite solicitudes de conexiones HTTPS seguras.</span><span class="sxs-lookup"><span data-stu-id="4dd01-305">When this option is enabled, the storage account only allows requests from secure HTTPS connections.</span></span> 

- <span data-ttu-id="4dd01-306">**API Management**.</span><span class="sxs-lookup"><span data-stu-id="4dd01-306">**API Management**.</span></span> <span data-ttu-id="4dd01-307">Configure las API para que solo utilicen el protocolo HTTPS.</span><span class="sxs-lookup"><span data-stu-id="4dd01-307">Configure the APIs to use HTTPS protocol only.</span></span> <span data-ttu-id="4dd01-308">Puede configurar esto en Azure Portal o mediante una plantilla de Resource Manager:</span><span class="sxs-lookup"><span data-stu-id="4dd01-308">You can configure this in the Azure portal or through a Resource Manager template:</span></span>

    ```json
    {
        "apiVersion": "2018-01-01",
        "type": "apis",
        "name": "dronedeliveryapi",
        "dependsOn": [
            "[concat('Microsoft.ApiManagement/service/', variables('apiManagementServiceName'))]"
        ],
        "properties": {
            "displayName": "Drone Delivery API",
            "description": "Drone Delivery API",
            "path": "api",
            "protocols": [ "HTTPS" ]
        },
        ...
    }
    ```

- <span data-ttu-id="4dd01-309">**Azure Functions**.</span><span class="sxs-lookup"><span data-stu-id="4dd01-309">**Azure Functions**.</span></span> <span data-ttu-id="4dd01-310">Habilitar la opción de configuración "[Solo HTTPS][functions-https]".</span><span class="sxs-lookup"><span data-stu-id="4dd01-310">Enable the "[HTTPS Only][functions-https]" setting.</span></span> 

### <a name="lock-down-the-function-app"></a><span data-ttu-id="4dd01-311">Bloqueo de la aplicación de función</span><span class="sxs-lookup"><span data-stu-id="4dd01-311">Lock down the function app</span></span>

<span data-ttu-id="4dd01-312">Todas las llamadas a la función deben pasar a través de la puerta de enlace de la API.</span><span class="sxs-lookup"><span data-stu-id="4dd01-312">All calls to the function should go through the API gateway.</span></span> <span data-ttu-id="4dd01-313">Para ello, haga lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="4dd01-313">You can achieve this as follows:</span></span>

- <span data-ttu-id="4dd01-314">Configure la aplicación de función para que requiera una clave de función.</span><span class="sxs-lookup"><span data-stu-id="4dd01-314">Configure the function app to require a function key.</span></span> <span data-ttu-id="4dd01-315">La puerta de enlace de API Management incluirá la clave de función cuando llame a la aplicación de función.</span><span class="sxs-lookup"><span data-stu-id="4dd01-315">The API Management gateway will include the function key when it calls the function app.</span></span> <span data-ttu-id="4dd01-316">Esto evita que los clientes llamen a la función directamente, omitiendo la puerta de enlace.</span><span class="sxs-lookup"><span data-stu-id="4dd01-316">This prevents clients from calling the function directly, bypassing the gateway.</span></span> 

- <span data-ttu-id="4dd01-317">La puerta de enlace de API Management tiene una [dirección IP estática][apim-ip].</span><span class="sxs-lookup"><span data-stu-id="4dd01-317">The API Management gateway has a [static IP address][apim-ip].</span></span> <span data-ttu-id="4dd01-318">Puede restringir la función de Azure para permitir solo las llamadas desde esa dirección IP estática.</span><span class="sxs-lookup"><span data-stu-id="4dd01-318">Restrict the Azure Function to allow only calls from that static IP address.</span></span> <span data-ttu-id="4dd01-319">Para más información, consulte [Restricciones de las direcciones IP estáticas de Azure App Service][app-service-ip-restrictions].</span><span class="sxs-lookup"><span data-stu-id="4dd01-319">For more information, see [Azure App Service Static IP Restrictions][app-service-ip-restrictions].</span></span> <span data-ttu-id="4dd01-320">(Esta característica está disponible solo para los servicios de nivel Estándar).</span><span class="sxs-lookup"><span data-stu-id="4dd01-320">(This feature is available for Standard tier services only.)</span></span> 

### <a name="protect-application-secrets"></a><span data-ttu-id="4dd01-321">Protección de los secretos de aplicación</span><span class="sxs-lookup"><span data-stu-id="4dd01-321">Protect application secrets</span></span>

<span data-ttu-id="4dd01-322">No almacene secretos de aplicación, como las credenciales de la base de datos, en el código ni en los archivos de configuración.</span><span class="sxs-lookup"><span data-stu-id="4dd01-322">Don't store application secrets, such as database credentials, in your code or configuration files.</span></span> <span data-ttu-id="4dd01-323">En su lugar, use la configuración de la aplicación, que se almacena cifrada en Azure.</span><span class="sxs-lookup"><span data-stu-id="4dd01-323">Instead, use App settings, which are stored encrypted in Azure.</span></span> <span data-ttu-id="4dd01-324">Para más información, consulte [Seguridad en Azure App Service y Azure Functions][app-service-security].</span><span class="sxs-lookup"><span data-stu-id="4dd01-324">For more information, see [Security in Azure App Service and Azure Functions][app-service-security].</span></span>

<span data-ttu-id="4dd01-325">Como alternativa, puede almacenar los secretos de aplicación en Key Vault.</span><span class="sxs-lookup"><span data-stu-id="4dd01-325">Alternatively, you can store application secrets in Key Vault.</span></span> <span data-ttu-id="4dd01-326">Esto permite centralizar el almacenamiento de secretos, controlar su distribución y supervisar cómo y cuándo se accede a los secretos.</span><span class="sxs-lookup"><span data-stu-id="4dd01-326">This allows you to centralize the storage of secrets, control their distribution, and monitor how and when secrets are being accessed.</span></span> <span data-ttu-id="4dd01-327">Para más información, consulte [Configuración de una aplicación web de Azure para que lea un secreto desde Key Vault][key-vault-web-app].</span><span class="sxs-lookup"><span data-stu-id="4dd01-327">For more information, see [Configure an Azure web application to read a secret from Key Vault][key-vault-web-app].</span></span> <span data-ttu-id="4dd01-328">Sin embargo, tenga en cuenta que los enlaces y desencadenadores de funciones cargan sus valores de configuración de la configuración de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="4dd01-328">However, note that Functions triggers and bindings load their configuration settings from app settings.</span></span> <span data-ttu-id="4dd01-329">No hay ningún medio integrado para configurar los desencadenadores y los enlaces para que usen secretos de Key Vault.</span><span class="sxs-lookup"><span data-stu-id="4dd01-329">There is no built-in way to configure the triggers and bindings to use Key Vault secrets.</span></span>

## <a name="devops-considerations"></a><span data-ttu-id="4dd01-330">Consideraciones sobre DevOps</span><span class="sxs-lookup"><span data-stu-id="4dd01-330">DevOps considerations</span></span>

### <a name="deployment"></a><span data-ttu-id="4dd01-331">Implementación</span><span class="sxs-lookup"><span data-stu-id="4dd01-331">Deployment</span></span>

<span data-ttu-id="4dd01-332">Para implementar la aplicación de función, se recomienda usar [archivos de paquete][functions-run-from-package] ("Ejecución desde el paquete").</span><span class="sxs-lookup"><span data-stu-id="4dd01-332">To deploy the function app, we recommend using [package files][functions-run-from-package] ("Run from package").</span></span> <span data-ttu-id="4dd01-333">Con este enfoque, puede cargar un archivo zip en un contenedor de Blob Storage y el entorno de ejecución de Functions monta el archivo zip como un sistema de archivos de solo lectura.</span><span class="sxs-lookup"><span data-stu-id="4dd01-333">Using this approach, you upload a zip file to a Blob Storage container and the Functions runtime mounts the zip file as a read-only file system.</span></span> <span data-ttu-id="4dd01-334">Se trata de una operación atómica, lo que reduce la posibilidad de que una implementación con errores deje la aplicación en un estado incoherente.</span><span class="sxs-lookup"><span data-stu-id="4dd01-334">This is an atomic operation, which reduces the chance that a failed deployment will leave the application in an inconsistent state.</span></span> <span data-ttu-id="4dd01-335">También puede mejorar los tiempos de arranque en frío, especialmente para las aplicaciones de Node.js, porque todos los archivos se intercambian a la vez.</span><span class="sxs-lookup"><span data-stu-id="4dd01-335">It can also improve cold start times, especially for Node.js apps, because all of the files are swapped at once.</span></span>

### <a name="api-versioning"></a><span data-ttu-id="4dd01-336">Control de versiones de la API</span><span class="sxs-lookup"><span data-stu-id="4dd01-336">API versioning</span></span>

<span data-ttu-id="4dd01-337">Una API es un contrato entre un servicio y los clientes.</span><span class="sxs-lookup"><span data-stu-id="4dd01-337">An API is a contract between a service and clients.</span></span> <span data-ttu-id="4dd01-338">En esta arquitectura, el contrato de API se define en el nivel de API Management.</span><span class="sxs-lookup"><span data-stu-id="4dd01-338">In this architecture, the API contract is defined at the API Management layer.</span></span> <span data-ttu-id="4dd01-339">API Management admite dos [conceptos de control de versiones][apim-versioning] distintos, pero complementarios:</span><span class="sxs-lookup"><span data-stu-id="4dd01-339">API Management supports two distinct but complementary [versioning concepts][apim-versioning]:</span></span>

- <span data-ttu-id="4dd01-340">Las *versiones* permiten a los consumidores de API elegir una versión de API en función de sus necesidades, por ejemplo, v1 en lugar de v2.</span><span class="sxs-lookup"><span data-stu-id="4dd01-340">*Versions* allow API consumers to choose an API version based on their needs, such as v1 versus v2.</span></span> 

- <span data-ttu-id="4dd01-341">Las *revisiones* permiten a los administradores de API realizar cambios no importantes en una API e implementar esos cambios, junto con un registro de cambios para informar a los consumidores de API sobre dichos cambios.</span><span class="sxs-lookup"><span data-stu-id="4dd01-341">*Revisions* allow API administrators to make non-breaking changes in an API and deploy those changes, along with a change log to inform API consumers about the changes.</span></span>

<span data-ttu-id="4dd01-342">Si realiza un cambio importante en una API, publique una nueva versión en API Management.</span><span class="sxs-lookup"><span data-stu-id="4dd01-342">If you make a breaking change in an API, publish a new version in API Management.</span></span> <span data-ttu-id="4dd01-343">Implemente la nueva versión en paralelo con la versión original, en una aplicación de función independiente.</span><span class="sxs-lookup"><span data-stu-id="4dd01-343">Deploy the new version side-by-side with the original version, in a separate Function App.</span></span> <span data-ttu-id="4dd01-344">Esto le permite migrar los clientes existentes a la nueva API sin interrumpir las aplicaciones cliente.</span><span class="sxs-lookup"><span data-stu-id="4dd01-344">This lets you migrate existing clients to the new API without breaking client applications.</span></span> <span data-ttu-id="4dd01-345">Finalmente, puede dejar de utilizar la versión anterior.</span><span class="sxs-lookup"><span data-stu-id="4dd01-345">Eventually, you can deprecate the previous version.</span></span> <span data-ttu-id="4dd01-346">API Management admite varios [esquemas de control de versiones][apim-versioning-schemes]: ruta de acceso URL, encabezado HTTP o cadena de consulta.</span><span class="sxs-lookup"><span data-stu-id="4dd01-346">API Management supports several [versioning schemes][apim-versioning-schemes]: URL path, HTTP header, or query string.</span></span> <span data-ttu-id="4dd01-347">Para más información acerca del control de versiones de API en general, consulte [Control de versiones de una API web RESTful][api-versioning].</span><span class="sxs-lookup"><span data-stu-id="4dd01-347">For more information about API versioning in general, see [Versioning a RESTful web API][api-versioning].</span></span>

<span data-ttu-id="4dd01-348">Para actualizaciones que no son cambios importantes en la API, implemente la nueva versión en un espacio de ensayo en la misma aplicación de función.</span><span class="sxs-lookup"><span data-stu-id="4dd01-348">For updates that are not breaking API changes, deploy the new version to a staging slot in the same Function App.</span></span> <span data-ttu-id="4dd01-349">Compruebe que la implementación se realizó correctamente y, a continuación, cambie la versión de ensayo por la versión de producción.</span><span class="sxs-lookup"><span data-stu-id="4dd01-349">Verify the deployment succeeded and then swap the staged version with the production version.</span></span> <span data-ttu-id="4dd01-350">Publique una revisión en API Management.</span><span class="sxs-lookup"><span data-stu-id="4dd01-350">Publish a revision in API Management.</span></span>

## <a name="deploy-the-solution"></a><span data-ttu-id="4dd01-351">Implementación de la solución</span><span class="sxs-lookup"><span data-stu-id="4dd01-351">Deploy the solution</span></span>

<span data-ttu-id="4dd01-352">Para implementar esta arquitectura de referencia, consulte el [Léame de GitHub][readme].</span><span class="sxs-lookup"><span data-stu-id="4dd01-352">To deploy this reference architecture, view the [GitHub readme][readme].</span></span> 

<!-- links -->

[api-versioning]: ../../best-practices/api-design.md#versioning-a-restful-web-api
[apim]: /azure/api-management/api-management-key-concepts
[apim-ip]: /azure/api-management/api-management-faq#is-the-api-management-gateway-ip-address-constant-can-i-use-it-in-firewall-rules
[api-geo]: /azure/api-management/api-management-howto-deploy-multi-region
[apim-scale]: /azure/api-management/api-management-howto-autoscale
[apim-validate-jwt]: /azure/api-management/api-management-access-restriction-policies#ValidateJWT
[apim-versioning]: /azure/api-management/api-management-get-started-publish-versions
[apim-versioning-schemes]: /azure/api-management/api-management-get-started-publish-versions#choose-a-versioning-scheme
[app-service-auth]: /azure/app-service/app-service-authentication-overview
[app-service-ip-restrictions]: /azure/app-service/app-service-ip-restrictions
[app-service-security]: /azure/app-service/app-service-security
[ase]: /azure/app-service/environment/intro
[azure-messaging]: /azure/event-grid/compare-messaging-services
[claims]: https://en.wikipedia.org/wiki/Claims-based_identity
[cdn]: https://azure.microsoft.com/services/cdn/
[cdn-https]: /azure/cdn/cdn-custom-ssl
[cors-policy]: /azure/api-management/api-management-cross-domain-policies
[cosmosdb]: /azure/cosmos-db/introduction
[cosmosdb-geo]: /azure/cosmos-db/distribute-data-globally
[cosmosdb-input-binding]: /azure/azure-functions/functions-bindings-cosmosdb-v2#input
[cosmosdb-scale]: /azure/cosmos-db/partition-data
[event-driven]: ../../guide/architecture-styles/event-driven.md
[functions]: /azure/azure-functions/functions-overview
[functions-bindings]: /azure/azure-functions/functions-triggers-bindings
[functions-cold-start]: https://blogs.msdn.microsoft.com/appserviceteam/2018/02/07/understanding-serverless-cold-start/
[functions-https]: /azure/app-service/app-service-web-tutorial-custom-ssl#enforce-https
[functions-proxy]: /azure/azure-functions/functions-proxies
[functions-run-from-package]: /azure/azure-functions/run-functions-from-deployment-package
[functions-scale]: /azure/azure-functions/functions-scale
[functions-timeout]: /azure/azure-functions/functions-scale#consumption-plan
[functions-zip-deploy]: /azure/azure-functions/deployment-zip-push
[graph]: https://developer.microsoft.com/graph/docs/concepts/overview
[key-vault-web-app]: /azure/key-vault/tutorial-web-application-keyvault
[microservices-domain-analysis]: ../../microservices/domain-analysis.md
[monitor]: /azure/azure-monitor/overview
[oauth-flow]: https://auth0.com/docs/api-auth/which-oauth-flow-to-use
[partition-key]: /azure/cosmos-db/partition-data
[pipelines]: /azure/devops/pipelines/index
[ru]: /azure/cosmos-db/request-units
[scopes]: /azure/active-directory/develop/v2-permissions-and-consent
[static-hosting]: /azure/storage/blobs/storage-blob-static-website
[static-hosting-preview]: https://azure.microsoft.com/blog/azure-storage-static-web-hosting-public-preview/
[storage-https]: /azure/storage/common/storage-require-secure-transfer
[tm]: /azure/traffic-manager/traffic-manager-overview

[github]: https://github.com/mspnp/serverless-reference-implementation
[HttpRequestAuthorizationExtensions]: https://github.com/mspnp/serverless-reference-implementation/blob/master/src/DroneStatus/dotnet/DroneStatusFunctionApp/HttpRequestAuthorizationExtensions.cs
[readme]: https://github.com/mspnp/serverless-reference-implementation/blob/master/README.md
