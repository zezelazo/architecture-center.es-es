---
title: Inteligencia empresarial
titleSuffix: Azure Reference Architectures
description: Use Azure para obtener perspectivas empresariales de datos relacionales almacenados localmente.
author: MikeWasson
ms.date: 11/06/2018
ms.custom: seodec18
ms.openlocfilehash: 3808cc5d09e2e0a5aaee1a6cfcb050b98a0ef2ee
ms.sourcegitcommit: bb7fcffbb41e2c26a26f8781df32825eb60df70c
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 12/20/2018
ms.locfileid: "53644230"
---
# <a name="enterprise-bi-in-azure-with-sql-data-warehouse"></a><span data-ttu-id="1bce0-103">Inteligencia empresarial en Azure con SQL Data Warehouse</span><span class="sxs-lookup"><span data-stu-id="1bce0-103">Enterprise BI in Azure with SQL Data Warehouse</span></span>

<span data-ttu-id="1bce0-104">Esta arquitectura de referencia implementa una canalización de [extracción, carga y transformación (ELT)](../../data-guide/relational-data/etl.md#extract-load-and-transform-elt) que mueve los datos desde una base de datos de SQL Server local a SQL Data Warehouse y transforma los datos para el análisis.</span><span class="sxs-lookup"><span data-stu-id="1bce0-104">This reference architecture implements an [extract, load, and transform (ELT)](../../data-guide/relational-data/etl.md#extract-load-and-transform-elt) pipeline that moves data from an on-premises SQL Server database into SQL Data Warehouse and transforms the data for analysis.</span></span>

<span data-ttu-id="1bce0-105">Hay disponible una implementación de referencia de esta arquitectura en [GitHub][github-folder].</span><span class="sxs-lookup"><span data-stu-id="1bce0-105">A reference implementation for this architecture is available on [GitHub][github-folder].</span></span>

![Diagrama de arquitectura para inteligencia empresarial en Azure con SQL Data Warehouse](./images/enterprise-bi-sqldw.png)

<span data-ttu-id="1bce0-107">**Escenario**: Una organización tiene un gran conjunto de datos OLTP almacenado en una base de datos de SQL Server de forma local.</span><span class="sxs-lookup"><span data-stu-id="1bce0-107">**Scenario**: An organization has a large OLTP data set stored in a SQL Server database on premises.</span></span> <span data-ttu-id="1bce0-108">La organización desea utilizar SQL Data Warehouse para realizar análisis con Power BI.</span><span class="sxs-lookup"><span data-stu-id="1bce0-108">The organization wants to use SQL Data Warehouse to perform analysis using Power BI.</span></span>

<span data-ttu-id="1bce0-109">Esta arquitectura de referencia está diseñada para trabajos únicos o a petición.</span><span class="sxs-lookup"><span data-stu-id="1bce0-109">This reference architecture is designed for one-time or on-demand jobs.</span></span> <span data-ttu-id="1bce0-110">Si tiene que mover los datos de forma continua (cada hora o diariamente), se recomienda utilizar Azure Data Factory de Azure para definir un flujo de trabajo automatizado.</span><span class="sxs-lookup"><span data-stu-id="1bce0-110">If you need to move data on a continuing basis (hourly or daily), we recommend using Azure Data Factory to define an automated workflow.</span></span> <span data-ttu-id="1bce0-111">Para ver una arquitectura de referencia que use Data Factory, consulte [Inteligencia empresarial automatizada con SQL Data Warehouse y Azure Data Factory][adf-ra].</span><span class="sxs-lookup"><span data-stu-id="1bce0-111">For a reference architecture that uses Data Factory, see [Automated enterprise BI with SQL Data Warehouse and Azure Data Factory][adf-ra].</span></span>

## <a name="architecture"></a><span data-ttu-id="1bce0-112">Arquitectura</span><span class="sxs-lookup"><span data-stu-id="1bce0-112">Architecture</span></span>

<span data-ttu-id="1bce0-113">La arquitectura consta de los siguientes componentes:</span><span class="sxs-lookup"><span data-stu-id="1bce0-113">The architecture consists of the following components.</span></span>

### <a name="data-source"></a><span data-ttu-id="1bce0-114">Origen de datos</span><span class="sxs-lookup"><span data-stu-id="1bce0-114">Data source</span></span>

<span data-ttu-id="1bce0-115">**SQL Server**.</span><span class="sxs-lookup"><span data-stu-id="1bce0-115">**SQL Server**.</span></span> <span data-ttu-id="1bce0-116">Los datos de origen se encuentran en una base de datos de SQL Server de forma local.</span><span class="sxs-lookup"><span data-stu-id="1bce0-116">The source data is located in a SQL Server database on premises.</span></span> <span data-ttu-id="1bce0-117">Para simular el entorno local, los scripts de implementación de esta arquitectura aprovisionan una máquina virtual en Azure con SQL Server instalado.</span><span class="sxs-lookup"><span data-stu-id="1bce0-117">To simulate the on-premises environment, the deployment scripts for this architecture provision a VM in Azure with SQL Server installed.</span></span> <span data-ttu-id="1bce0-118">La [base de datos OLTP de ejemplo de OLTP Wide World Importers][wwi] se usa como datos de origen.</span><span class="sxs-lookup"><span data-stu-id="1bce0-118">The [Wide World Importers OLTP sample database][wwi] is used as the source data.</span></span>

### <a name="ingestion-and-data-storage"></a><span data-ttu-id="1bce0-119">Ingesta y almacenamiento de datos</span><span class="sxs-lookup"><span data-stu-id="1bce0-119">Ingestion and data storage</span></span>

<span data-ttu-id="1bce0-120">**Blob Storage**.</span><span class="sxs-lookup"><span data-stu-id="1bce0-120">**Blob Storage**.</span></span> <span data-ttu-id="1bce0-121">Blob Storage se utiliza como un área de ensayo para copiar los datos antes de cargarlos en SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="1bce0-121">Blob storage is used as a staging area to copy the data before loading it into SQL Data Warehouse.</span></span>

<span data-ttu-id="1bce0-122">**Azure SQL Data Warehouse**.</span><span class="sxs-lookup"><span data-stu-id="1bce0-122">**Azure SQL Data Warehouse**.</span></span> <span data-ttu-id="1bce0-123">[SQL Data Warehouse](/azure/sql-data-warehouse/) es un sistema distribuido diseñado para realizar análisis con datos de gran tamaño.</span><span class="sxs-lookup"><span data-stu-id="1bce0-123">[SQL Data Warehouse](/azure/sql-data-warehouse/) is a distributed system designed to perform analytics on large data.</span></span> <span data-ttu-id="1bce0-124">Admite el procesamiento paralelo masivo (MPP), lo que lo hace idóneo para ejecutar análisis de alto rendimiento.</span><span class="sxs-lookup"><span data-stu-id="1bce0-124">It supports massive parallel processing (MPP), which makes it suitable for running high-performance analytics.</span></span>

### <a name="analysis-and-reporting"></a><span data-ttu-id="1bce0-125">Análisis e informes</span><span class="sxs-lookup"><span data-stu-id="1bce0-125">Analysis and reporting</span></span>

<span data-ttu-id="1bce0-126">**Azure Analysis Services**.</span><span class="sxs-lookup"><span data-stu-id="1bce0-126">**Azure Analysis Services**.</span></span> <span data-ttu-id="1bce0-127">[Analysis Services](/azure/analysis-services/) es un servicio completamente administrado que proporciona funcionalidades de modelado de datos.</span><span class="sxs-lookup"><span data-stu-id="1bce0-127">[Analysis Services](/azure/analysis-services/) is a fully managed service that provides data modeling capabilities.</span></span> <span data-ttu-id="1bce0-128">Use Analysis Services para crear un modelo semántico que los usuarios puedan consultar.</span><span class="sxs-lookup"><span data-stu-id="1bce0-128">Use Analysis Services to create a semantic model that users can query.</span></span> <span data-ttu-id="1bce0-129">Analysis Services es especialmente útil en un escenario de panel de BI.</span><span class="sxs-lookup"><span data-stu-id="1bce0-129">Analysis Services is especially useful in a BI dashboard scenario.</span></span> <span data-ttu-id="1bce0-130">En esta arquitectura, Analysis Services lee los datos del almacenamiento de datos para procesar el modelo semántico, y atiende a las consultas del panel.</span><span class="sxs-lookup"><span data-stu-id="1bce0-130">In this architecture, Analysis Services reads data from the data warehouse to process the semantic model, and efficiently serves dashboard queries.</span></span> <span data-ttu-id="1bce0-131">También admite simultaneidad elástica mediante el escalado horizontal de réplicas para agilizar el procesamiento de consultas.</span><span class="sxs-lookup"><span data-stu-id="1bce0-131">It also supports elastic concurrency, by scaling out replicas for faster query processing.</span></span>

<span data-ttu-id="1bce0-132">Actualmente, Azure Analysis Services admite los modelos tabulares pero no los multidimensionales.</span><span class="sxs-lookup"><span data-stu-id="1bce0-132">Currently, Azure Analysis Services supports tabular models but not multidimensional models.</span></span> <span data-ttu-id="1bce0-133">Los modelos tabulares utilizan construcciones de modelado relacional (tablas y columnas), mientras que los modelos multidimensionales usan construcciones de modelado OLAP (cubos, dimensiones y medidas).</span><span class="sxs-lookup"><span data-stu-id="1bce0-133">Tabular models use relational modeling constructs (tables and columns), whereas multidimensional models use OLAP modeling constructs (cubes, dimensions, and measures).</span></span> <span data-ttu-id="1bce0-134">Si necesita modelos multidimensionales, utilice SQL Server Analysis Services (SSAS).</span><span class="sxs-lookup"><span data-stu-id="1bce0-134">If you require multidimensional models, use SQL Server Analysis Services (SSAS).</span></span> <span data-ttu-id="1bce0-135">Para más información, consulte [Comparar soluciones tabulares y multidimensionales](/sql/analysis-services/comparing-tabular-and-multidimensional-solutions-ssas).</span><span class="sxs-lookup"><span data-stu-id="1bce0-135">For more information, see [Comparing tabular and multidimensional solutions](/sql/analysis-services/comparing-tabular-and-multidimensional-solutions-ssas).</span></span>

<span data-ttu-id="1bce0-136">**Power BI**.</span><span class="sxs-lookup"><span data-stu-id="1bce0-136">**Power BI**.</span></span> <span data-ttu-id="1bce0-137">Power BI es un conjunto de herramientas de análisis de negocios que sirve para analizar datos con el fin de obtener perspectivas empresariales.</span><span class="sxs-lookup"><span data-stu-id="1bce0-137">Power BI is a suite of business analytics tools to analyze data for business insights.</span></span> <span data-ttu-id="1bce0-138">En el caso de esta arquitectura consulta el modelo semántico almacenado en Analysis Services.</span><span class="sxs-lookup"><span data-stu-id="1bce0-138">In this architecture, it queries the semantic model stored in Analysis Services.</span></span>

### <a name="authentication"></a><span data-ttu-id="1bce0-139">Autenticación</span><span class="sxs-lookup"><span data-stu-id="1bce0-139">Authentication</span></span>

<span data-ttu-id="1bce0-140">**Azure Active Directory (Azure AD)** autentica a los usuarios que se conectan al servidor de Analysis Services mediante Power BI.</span><span class="sxs-lookup"><span data-stu-id="1bce0-140">**Azure Active Directory (Azure AD)** authenticates users who connect to the Analysis Services server through Power BI.</span></span>

## <a name="data-pipeline"></a><span data-ttu-id="1bce0-141">Canalización de datos</span><span class="sxs-lookup"><span data-stu-id="1bce0-141">Data pipeline</span></span>

<span data-ttu-id="1bce0-142">Esta arquitectura de referencia usa la base de datos de ejemplo [WorldWideImporters](/sql/sample/world-wide-importers/wide-world-importers-oltp-database) como origen de datos.</span><span class="sxs-lookup"><span data-stu-id="1bce0-142">This reference architecture uses the [WorldWideImporters](/sql/sample/world-wide-importers/wide-world-importers-oltp-database) sample database as a data source.</span></span> <span data-ttu-id="1bce0-143">La canalización de datos tiene las siguientes fases:</span><span class="sxs-lookup"><span data-stu-id="1bce0-143">The data pipeline has the following stages:</span></span>

1. <span data-ttu-id="1bce0-144">Exportación de los datos de SQL Server a archivos planos (utilidad bcp).</span><span class="sxs-lookup"><span data-stu-id="1bce0-144">Export the data from SQL Server to flat files (bcp utility).</span></span>
2. <span data-ttu-id="1bce0-145">Copia de los archivos planos en Azure Blob Storage (AzCopy).</span><span class="sxs-lookup"><span data-stu-id="1bce0-145">Copy the flat files to Azure Blob Storage (AzCopy).</span></span>
3. <span data-ttu-id="1bce0-146">Carga de los datos en SQL Data Warehouse (PolyBase).</span><span class="sxs-lookup"><span data-stu-id="1bce0-146">Load the data into SQL Data Warehouse (PolyBase).</span></span>
4. <span data-ttu-id="1bce0-147">Transformación de los datos en un esquema de estrella (T-SQL).</span><span class="sxs-lookup"><span data-stu-id="1bce0-147">Transform the data into a star schema (T-SQL).</span></span>
5. <span data-ttu-id="1bce0-148">Carga de un modelo semántico en Analysis Services (SQL Server Data Tools).</span><span class="sxs-lookup"><span data-stu-id="1bce0-148">Load a semantic model into Analysis Services (SQL Server Data Tools).</span></span>

![Diagrama de la canalización de inteligencia empresarial](./images/enterprise-bi-sqldw-pipeline.png)

> [!NOTE]
> <span data-ttu-id="1bce0-150">Para los pasos del 1 al 3, considere la posibilidad de usar Data Platform Studio de Redgate.</span><span class="sxs-lookup"><span data-stu-id="1bce0-150">For steps 1 &ndash; 3, consider using Redgate Data Platform Studio.</span></span> <span data-ttu-id="1bce0-151">Data Platform Studio aplica las correcciones y optimizaciones de compatibilidad más adecuadas, por lo que es la forma más rápida de empezar a trabajar con SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="1bce0-151">Data Platform Studio applies the most appropriate compatibility fixes and optimizations, so it's the quickest way to get started with SQL Data Warehouse.</span></span> <span data-ttu-id="1bce0-152">Para más información consulte [Carga de datos con Data Platform Studio de Redgate](/azure/sql-data-warehouse/sql-data-warehouse-load-with-redgate).</span><span class="sxs-lookup"><span data-stu-id="1bce0-152">For more information, see [Load data with Redgate Data Platform Studio](/azure/sql-data-warehouse/sql-data-warehouse-load-with-redgate).</span></span>
>

<span data-ttu-id="1bce0-153">En las secciones siguientes se describe en detalle cada una de estas etapas.</span><span class="sxs-lookup"><span data-stu-id="1bce0-153">The next sections describe these stages in more detail.</span></span>

### <a name="export-data-from-sql-server"></a><span data-ttu-id="1bce0-154">Exportación de los datos de SQL Server</span><span class="sxs-lookup"><span data-stu-id="1bce0-154">Export data from SQL Server</span></span>

<span data-ttu-id="1bce0-155">La utilidad [bcp](/sql/tools/bcp-utility) (programa de copia masiva) es una forma rápida de crear archivos planos de texto a partir de tablas SQL.</span><span class="sxs-lookup"><span data-stu-id="1bce0-155">The [bcp](/sql/tools/bcp-utility) (bulk copy program) utility is a fast way to create flat text files from SQL tables.</span></span> <span data-ttu-id="1bce0-156">En este paso, seleccione las columnas que desea exportar, pero no transforme los datos.</span><span class="sxs-lookup"><span data-stu-id="1bce0-156">In this step, you select the columns that you want to export, but don't transform the data.</span></span> <span data-ttu-id="1bce0-157">Las transformaciones de datos deben realizarse en SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="1bce0-157">Any data transformations should happen in SQL Data Warehouse.</span></span>

<span data-ttu-id="1bce0-158">**Recomendaciones**</span><span class="sxs-lookup"><span data-stu-id="1bce0-158">**Recommendations**</span></span>

<span data-ttu-id="1bce0-159">Si es posible, programe la extracción de datos durante las horas de poca actividad con el fin de minimizar la contención de recursos en el entorno de producción.</span><span class="sxs-lookup"><span data-stu-id="1bce0-159">If possible, schedule data extraction during off-peak hours, to minimize resource contention in the production environment.</span></span>

<span data-ttu-id="1bce0-160">Evite ejecutar bcp en el servidor de bases de datos.</span><span class="sxs-lookup"><span data-stu-id="1bce0-160">Avoid running bcp on the database server.</span></span> <span data-ttu-id="1bce0-161">En su lugar, ejecútelo desde otra máquina.</span><span class="sxs-lookup"><span data-stu-id="1bce0-161">Instead, run it from another machine.</span></span> <span data-ttu-id="1bce0-162">Escriba los archivos en una unidad local.</span><span class="sxs-lookup"><span data-stu-id="1bce0-162">Write the files to a local drive.</span></span> <span data-ttu-id="1bce0-163">Asegúrese de que tiene suficientes recursos de E/S para controlar las escrituras simultáneas.</span><span class="sxs-lookup"><span data-stu-id="1bce0-163">Ensure that you have sufficient I/O resources to handle the concurrent writes.</span></span> <span data-ttu-id="1bce0-164">Para obtener un rendimiento óptimo, exporte los archivos a unidades de almacenamiento rápido dedicadas.</span><span class="sxs-lookup"><span data-stu-id="1bce0-164">For best performance, export the files to dedicated fast storage drives.</span></span>

<span data-ttu-id="1bce0-165">Puede acelerar la transferencia de red si guarda los datos exportados en un formato comprimido Gzip.</span><span class="sxs-lookup"><span data-stu-id="1bce0-165">You can speed up the network transfer by saving the exported data in Gzip compressed format.</span></span> <span data-ttu-id="1bce0-166">De todas formas, la carga de archivos comprimidos en el almacenamiento es más lenta que la carga de archivos sin comprimir, por lo que la rapidez en la transferencia de red tiene como contrapartida una menor velocidad en la carga.</span><span class="sxs-lookup"><span data-stu-id="1bce0-166">However, loading compressed files into the warehouse is slower than loading uncompressed files, so there is a tradeoff between faster network transfer versus faster loading.</span></span> <span data-ttu-id="1bce0-167">Si decide utilizar compresión Gzip, no cree un único archivo Gzip.</span><span class="sxs-lookup"><span data-stu-id="1bce0-167">If you decide to use Gzip compression, don't create a single Gzip file.</span></span> <span data-ttu-id="1bce0-168">Divida los datos en varios archivos comprimidos.</span><span class="sxs-lookup"><span data-stu-id="1bce0-168">Instead, split the data into multiple compressed files.</span></span>

### <a name="copy-flat-files-into-blob-storage"></a><span data-ttu-id="1bce0-169">Copia de los archivos planos en Blob Storage</span><span class="sxs-lookup"><span data-stu-id="1bce0-169">Copy flat files into blob storage</span></span>

<span data-ttu-id="1bce0-170">La utilidad [AzCopy](/azure/storage/common/storage-use-azcopy) está diseñada para la copia de alto rendimiento de datos en Azure Blob Storage.</span><span class="sxs-lookup"><span data-stu-id="1bce0-170">The [AzCopy](/azure/storage/common/storage-use-azcopy) utility is designed for high-performance copying of data into Azure blob storage.</span></span>

<span data-ttu-id="1bce0-171">**Recomendaciones**</span><span class="sxs-lookup"><span data-stu-id="1bce0-171">**Recommendations**</span></span>

<span data-ttu-id="1bce0-172">Cree la cuenta de almacenamiento en una región cerca de la ubicación del origen de datos.</span><span class="sxs-lookup"><span data-stu-id="1bce0-172">Create the storage account in a region near the location of the source data.</span></span> <span data-ttu-id="1bce0-173">Implemente la cuenta de almacenamiento y la instancia de SQL Data Warehouse en la misma región.</span><span class="sxs-lookup"><span data-stu-id="1bce0-173">Deploy the storage account and the SQL Data Warehouse instance in the same region.</span></span>

<span data-ttu-id="1bce0-174">No ejecute AzCopy en la misma máquina que ejecuta las cargas de trabajo de producción, ya que el consumo de CPU y E/S puede interferir con la carga de trabajo de producción.</span><span class="sxs-lookup"><span data-stu-id="1bce0-174">Don't run AzCopy on the same machine that runs your production workloads, because the CPU and I/O consumption can interfere with the production workload.</span></span>

<span data-ttu-id="1bce0-175">Pruebe la carga primero para ver cómo es la velocidad de carga.</span><span class="sxs-lookup"><span data-stu-id="1bce0-175">Test the upload first to see what the upload speed is like.</span></span> <span data-ttu-id="1bce0-176">Puede utilizar la opción/NC en AzCopy para especificar el número de operaciones de copia simultáneas.</span><span class="sxs-lookup"><span data-stu-id="1bce0-176">You can use the /NC option in AzCopy to specify the number of concurrent copy operations.</span></span> <span data-ttu-id="1bce0-177">Comience con el valor predeterminado, a continuación, experimente con este valor para optimizar el rendimiento.</span><span class="sxs-lookup"><span data-stu-id="1bce0-177">Start with the default value, then experiment with this setting to tune the performance.</span></span> <span data-ttu-id="1bce0-178">En un entorno con poco ancho de banda, demasiadas operaciones simultáneas pueden saturar la conexión de red e impedir que las operaciones se completen con éxito.</span><span class="sxs-lookup"><span data-stu-id="1bce0-178">In a low-bandwidth environment, too many concurrent operations can overwhelm the network connection and prevent the operations from completing successfully.</span></span>

<span data-ttu-id="1bce0-179">AzCopy lleva los datos al almacenamiento a través de la red pública de Internet.</span><span class="sxs-lookup"><span data-stu-id="1bce0-179">AzCopy moves data to storage over the public internet.</span></span> <span data-ttu-id="1bce0-180">Si esto no es lo suficientemente rápido, considere la posibilidad de configurar un circuito [ExpressRoute](/azure/expressroute/).</span><span class="sxs-lookup"><span data-stu-id="1bce0-180">If this isn't fast enough, consider setting up an [ExpressRoute](/azure/expressroute/) circuit.</span></span> <span data-ttu-id="1bce0-181">ExpressRoute es un servicio que enruta los datos a Azure a través de una conexión privada dedicada.</span><span class="sxs-lookup"><span data-stu-id="1bce0-181">ExpressRoute is a service that routes your data through a dedicated private connection to Azure.</span></span> <span data-ttu-id="1bce0-182">Otra opción, si la conexión de red es demasiado lenta, es enviar físicamente los datos en un disco a un centro de datos de Azure.</span><span class="sxs-lookup"><span data-stu-id="1bce0-182">Another option, if your network connection is too slow, is to physically ship the data on disk to an Azure datacenter.</span></span> <span data-ttu-id="1bce0-183">Para más información consulte [Transferencia de datos a Azure y desde este](/azure/architecture/data-guide/scenarios/data-transfer).</span><span class="sxs-lookup"><span data-stu-id="1bce0-183">For more information, see [Transferring data to and from Azure](/azure/architecture/data-guide/scenarios/data-transfer).</span></span>

<span data-ttu-id="1bce0-184">Durante una operación de copia, AzCopy crea un archivo de diario temporal, lo que permite a AzCopy reiniciar la operación si esta se interrumpiese (por ejemplo, debido a un error de red).</span><span class="sxs-lookup"><span data-stu-id="1bce0-184">During a copy operation, AzCopy creates a temporary journal file, which enables AzCopy to restart the operation if it gets interrupted (for example, due to a network error).</span></span> <span data-ttu-id="1bce0-185">Asegúrese de que hay suficiente espacio en disco para almacenar los archivos de diario.</span><span class="sxs-lookup"><span data-stu-id="1bce0-185">Make sure there is enough disk space to store the journal files.</span></span> <span data-ttu-id="1bce0-186">Puede utilizar la opción /Z para especificar dónde se escriben los archivos de diario.</span><span class="sxs-lookup"><span data-stu-id="1bce0-186">You can use the /Z option to specify where the journal files are written.</span></span>

### <a name="load-data-into-sql-data-warehouse"></a><span data-ttu-id="1bce0-187">Carga de los datos en SQL Data Warehouse</span><span class="sxs-lookup"><span data-stu-id="1bce0-187">Load data into SQL Data Warehouse</span></span>

<span data-ttu-id="1bce0-188">Use [PolyBase](/sql/relational-databases/polybase/polybase-guide) para cargar los archivos de Blob Storage al almacenamiento de datos.</span><span class="sxs-lookup"><span data-stu-id="1bce0-188">Use [PolyBase](/sql/relational-databases/polybase/polybase-guide) to load the files from blob storage into the data warehouse.</span></span> <span data-ttu-id="1bce0-189">PolyBase está diseñado para aprovechar la arquitectura MPP (procesamiento masivo en paralelo) de SQL Data Warehouse, lo que lo convierte en la forma más rápida de cargar datos en SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="1bce0-189">PolyBase is designed to leverage the MPP (Massively Parallel Processing) architecture of SQL Data Warehouse, which makes it the fastest way to load data into SQL Data Warehouse.</span></span>

<span data-ttu-id="1bce0-190">La carga de datos es un proceso de dos pasos:</span><span class="sxs-lookup"><span data-stu-id="1bce0-190">Loading the data is a two-step process:</span></span>

1. <span data-ttu-id="1bce0-191">Creación de un conjunto de tablas externas para los datos.</span><span class="sxs-lookup"><span data-stu-id="1bce0-191">Create a set of external tables for the data.</span></span> <span data-ttu-id="1bce0-192">Una tabla externa es una definición de tabla que apunta a los datos almacenados fuera del almacén &mdash; en este caso, a los archivos planos en Blob Storage.</span><span class="sxs-lookup"><span data-stu-id="1bce0-192">An external table is a table definition that points to data stored outside of the warehouse &mdash; in this case, the flat files in blob storage.</span></span> <span data-ttu-id="1bce0-193">Este paso no mueve ningún dato al almacenamiento.</span><span class="sxs-lookup"><span data-stu-id="1bce0-193">This step does not move any data into the warehouse.</span></span>
2. <span data-ttu-id="1bce0-194">Creación de tablas de almacenamiento provisional y carga de los datos en las tablas de almacenamiento provisional.</span><span class="sxs-lookup"><span data-stu-id="1bce0-194">Create staging tables, and load the data into the staging tables.</span></span> <span data-ttu-id="1bce0-195">Este paso copia los datos en el almacenamiento.</span><span class="sxs-lookup"><span data-stu-id="1bce0-195">This step copies the data into the warehouse.</span></span>

<span data-ttu-id="1bce0-196">**Recomendaciones**</span><span class="sxs-lookup"><span data-stu-id="1bce0-196">**Recommendations**</span></span>

<span data-ttu-id="1bce0-197">Considere la posibilidad de usar SQL Data Warehouse cuando tenga grandes cantidades de datos (más de 1 TB) y esté ejecutando una carga de trabajo de análisis que aprovecharía el paralelismo.</span><span class="sxs-lookup"><span data-stu-id="1bce0-197">Consider SQL Data Warehouse when you have large amounts of data (more than 1 TB) and are running an analytics workload that will benefit from parallelism.</span></span> <span data-ttu-id="1bce0-198">SQL Data Warehouse no es una buena opción para cargas de trabajo OLTP o conjuntos de datos más pequeños (< 250 GB).</span><span class="sxs-lookup"><span data-stu-id="1bce0-198">SQL Data Warehouse is not a good fit for OLTP workloads or smaller data sets (< 250GB).</span></span> <span data-ttu-id="1bce0-199">Para conjuntos de datos de un tamaño inferior a 250 GB, considere la posibilidad de usar Azure SQL Database o SQL Server.</span><span class="sxs-lookup"><span data-stu-id="1bce0-199">For data sets less than 250GB, consider Azure SQL Database or SQL Server.</span></span> <span data-ttu-id="1bce0-200">Para más información, consulte el artículo sobre [Almacenamiento de datos](../../data-guide/relational-data/data-warehousing.md).</span><span class="sxs-lookup"><span data-stu-id="1bce0-200">For more information, see [Data warehousing](../../data-guide/relational-data/data-warehousing.md).</span></span>

<span data-ttu-id="1bce0-201">Cree las tablas de almacenamiento provisional como tablas de montón, que no están indexadas.</span><span class="sxs-lookup"><span data-stu-id="1bce0-201">Create the staging tables as heap tables, which are not indexed.</span></span> <span data-ttu-id="1bce0-202">Las consultas que crean las tablas de producción darán como resultado un examen completo de la tabla, así que no hay ninguna razón para indexar las tablas de almacenamiento provisional.</span><span class="sxs-lookup"><span data-stu-id="1bce0-202">The queries that create the production tables will result in a full table scan, so there is no reason to index the staging tables.</span></span>

<span data-ttu-id="1bce0-203">PolyBase aprovecha automáticamente las ventajas del paralelismo en el almacenamiento.</span><span class="sxs-lookup"><span data-stu-id="1bce0-203">PolyBase automatically takes advantage of parallelism in the warehouse.</span></span> <span data-ttu-id="1bce0-204">El rendimiento de carga se escala a medida que aumentan las unidades de almacenamiento de datos.</span><span class="sxs-lookup"><span data-stu-id="1bce0-204">The load performance scales as you increase DWUs.</span></span> <span data-ttu-id="1bce0-205">Para obtener el mejor rendimiento, utilice una operación de carga única.</span><span class="sxs-lookup"><span data-stu-id="1bce0-205">For best performance, use a single load operation.</span></span> <span data-ttu-id="1bce0-206">Dividir los datos de entrada en fragmentos y ejecutar varias cargas simultáneas no beneficia al rendimiento.</span><span class="sxs-lookup"><span data-stu-id="1bce0-206">There is no performance benefit to breaking the input data into chunks and running multiple concurrent loads.</span></span>

<span data-ttu-id="1bce0-207">PolyBase puede leer archivos comprimidos con Gzip.</span><span class="sxs-lookup"><span data-stu-id="1bce0-207">PolyBase can read Gzip compressed files.</span></span> <span data-ttu-id="1bce0-208">De todas formas, se usa un lector único por archivo comprimido, porque descomprimir el archivo es una operación de un solo subproceso.</span><span class="sxs-lookup"><span data-stu-id="1bce0-208">However, only a single reader is used per compressed file, because uncompressing the file is a single-threaded operation.</span></span> <span data-ttu-id="1bce0-209">Por ello, evite cargar un único archivo comprimido grande.</span><span class="sxs-lookup"><span data-stu-id="1bce0-209">Therefore, avoid loading a single large compressed file.</span></span> <span data-ttu-id="1bce0-210">En su lugar, divida los datos en varios archivos comprimidos, para aprovechar las ventajas del paralelismo.</span><span class="sxs-lookup"><span data-stu-id="1bce0-210">Instead, split the data into multiple compressed files, in order to take advantage of parallelism.</span></span>

<span data-ttu-id="1bce0-211">Tenga en cuenta las siguientes limitaciones:</span><span class="sxs-lookup"><span data-stu-id="1bce0-211">Be aware of the following limitations:</span></span>

- <span data-ttu-id="1bce0-212">PolyBase admite un tamaño máximo de columna de `varchar(8000)`, `nvarchar(4000)` o `varbinary(8000)`.</span><span class="sxs-lookup"><span data-stu-id="1bce0-212">PolyBase supports a maximum column size of `varchar(8000)`, `nvarchar(4000)`, or `varbinary(8000)`.</span></span> <span data-ttu-id="1bce0-213">Si tiene datos que superan estos límites, tiene la opción de dividir los datos en fragmentos al exportarlos y luego volver a ensamblar los fragmentos tras la importación.</span><span class="sxs-lookup"><span data-stu-id="1bce0-213">If you have data that exceeds these limits, one option is to break the data up into chunks when you export it, and then reassemble the chunks after import.</span></span>

- <span data-ttu-id="1bce0-214">PolyBase usa un terminador de fila fijo de \n o una línea nueva.</span><span class="sxs-lookup"><span data-stu-id="1bce0-214">PolyBase uses a fixed row terminator of \n or newline.</span></span> <span data-ttu-id="1bce0-215">Esto puede causar problemas si los caracteres de nueva línea aparecen en los datos de origen.</span><span class="sxs-lookup"><span data-stu-id="1bce0-215">This can cause problems if newline characters appear in the source data.</span></span>

- <span data-ttu-id="1bce0-216">El esquema de origen de datos podría contener tipos de datos que SQL Data Warehouse no admite.</span><span class="sxs-lookup"><span data-stu-id="1bce0-216">Your source data schema might contain data types that are not supported in SQL Data Warehouse.</span></span>

<span data-ttu-id="1bce0-217">Para evitar estas limitaciones, puede crear un procedimiento almacenado que realiza las conversiones necesarias.</span><span class="sxs-lookup"><span data-stu-id="1bce0-217">To work around these limitations, you can create a stored procedure that performs the necessary conversions.</span></span> <span data-ttu-id="1bce0-218">Haga referencia a este procedimiento almacenado cuando ejecute bcp.</span><span class="sxs-lookup"><span data-stu-id="1bce0-218">Reference this stored procedure when you run bcp.</span></span> <span data-ttu-id="1bce0-219">De forma alternativa, [Data Platform Studio de Redgate](/azure/sql-data-warehouse/sql-data-warehouse-load-with-redgate) convierte automáticamente los tipos de datos que SQL Data Warehouse no admite.</span><span class="sxs-lookup"><span data-stu-id="1bce0-219">Alternatively, [Redgate Data Platform Studio](/azure/sql-data-warehouse/sql-data-warehouse-load-with-redgate) automatically converts data types that aren’t supported in SQL Data Warehouse.</span></span>

<span data-ttu-id="1bce0-220">Para más información, consulte los siguientes artículos.</span><span class="sxs-lookup"><span data-stu-id="1bce0-220">For more information, see the following articles:</span></span>

- <span data-ttu-id="1bce0-221">[Procedimientos recomendados para la carga de datos en Azure SQL Data Warehouse](/azure/sql-data-warehouse/guidance-for-loading-data).</span><span class="sxs-lookup"><span data-stu-id="1bce0-221">[Best practices for loading data into Azure SQL Data Warehouse](/azure/sql-data-warehouse/guidance-for-loading-data).</span></span>
- [<span data-ttu-id="1bce0-222">Migración de esquemas a SQL Data Warehouse</span><span class="sxs-lookup"><span data-stu-id="1bce0-222">Migrate your schemas to SQL Data Warehouse</span></span>](/azure/sql-data-warehouse/sql-data-warehouse-migrate-schema)
- [<span data-ttu-id="1bce0-223">Guía para definir los tipos de datos para las tablas en SQL Data Warehouse</span><span class="sxs-lookup"><span data-stu-id="1bce0-223">Guidance for defining data types for tables in SQL Data Warehouse</span></span>](/azure/sql-data-warehouse/sql-data-warehouse-tables-data-types)

### <a name="transform-the-data"></a><span data-ttu-id="1bce0-224">Transformar los datos</span><span class="sxs-lookup"><span data-stu-id="1bce0-224">Transform the data</span></span>

<span data-ttu-id="1bce0-225">Transforme los datos y muévalos a tablas de producción.</span><span class="sxs-lookup"><span data-stu-id="1bce0-225">Transform the data and move it into production tables.</span></span> <span data-ttu-id="1bce0-226">En este paso, los datos se transforman en un esquema en estrella con tablas de dimensiones y tablas de hechos, adecuadas para el modelado semántico.</span><span class="sxs-lookup"><span data-stu-id="1bce0-226">In this step, the data is transformed into a star schema with dimension tables and fact tables, suitable for semantic modeling.</span></span>

<span data-ttu-id="1bce0-227">Cree las tablas de producción con índices de almacén de columnas en clúster que ofrecen el mejor rendimiento general para las consultas.</span><span class="sxs-lookup"><span data-stu-id="1bce0-227">Create the production tables with clustered columnstore indexes, which offer the best overall query performance.</span></span> <span data-ttu-id="1bce0-228">Los índices de almacén de columnas están optimizados para consultas que examinan muchos registros.</span><span class="sxs-lookup"><span data-stu-id="1bce0-228">Columnstore indexes are optimized for queries that scan many records.</span></span> <span data-ttu-id="1bce0-229">Sin embargo no funcionan tan bien para las búsquedas singleton (es decir aquellas en las que la búsqueda se reduce a una sola fila).</span><span class="sxs-lookup"><span data-stu-id="1bce0-229">Columnstore indexes don't perform as well for singleton lookups (that is, looking up a single row).</span></span> <span data-ttu-id="1bce0-230">Si tiene que realizar búsquedas singleton frecuentes, puede agregar un índice no agrupado en una tabla.</span><span class="sxs-lookup"><span data-stu-id="1bce0-230">If you need to perform frequent singleton lookups, you can add a non-clustered index to a table.</span></span> <span data-ttu-id="1bce0-231">Este tipo de búsquedas pueden ejecutarse de forma considerablemente más rápida usando un índice no agrupado.</span><span class="sxs-lookup"><span data-stu-id="1bce0-231">Singleton lookups can run significantly faster using a non-clustered index.</span></span> <span data-ttu-id="1bce0-232">De todas formas, las búsquedas singleton son normalmente menos comunes en escenarios de almacenamiento de datos que las cargas de trabajo OLTP.</span><span class="sxs-lookup"><span data-stu-id="1bce0-232">However, singleton lookups are typically less common in data warehouse scenarios than OLTP workloads.</span></span> <span data-ttu-id="1bce0-233">Para más información, consulte [Indexación de tablas en SQL Data Warehouse](/azure/sql-data-warehouse/sql-data-warehouse-tables-index).</span><span class="sxs-lookup"><span data-stu-id="1bce0-233">For more information, see [Indexing tables in SQL Data Warehouse](/azure/sql-data-warehouse/sql-data-warehouse-tables-index).</span></span>

> [!NOTE]
> <span data-ttu-id="1bce0-234">Las tablas de almacén de columnas agrupado no admiten tipos de datos `varchar(max)`, `nvarchar(max)` o `varbinary(max)`.</span><span class="sxs-lookup"><span data-stu-id="1bce0-234">Clustered columnstore tables do not support `varchar(max)`, `nvarchar(max)`, or `varbinary(max)` data types.</span></span> <span data-ttu-id="1bce0-235">En ese caso, considere la posibilidad de un índice agrupado o de montón.</span><span class="sxs-lookup"><span data-stu-id="1bce0-235">In that case, consider a heap or clustered index.</span></span> <span data-ttu-id="1bce0-236">Puede colocar esas columnas en una tabla independiente.</span><span class="sxs-lookup"><span data-stu-id="1bce0-236">You might put those columns into a separate table.</span></span>

<span data-ttu-id="1bce0-237">Dado que la base de datos de ejemplo no es muy grande, hemos creado las tablas replicadas sin particiones.</span><span class="sxs-lookup"><span data-stu-id="1bce0-237">Because the sample database is not very large, we created replicated tables with no partitions.</span></span> <span data-ttu-id="1bce0-238">Para las cargas de trabajo de producción, el uso de tablas distribuidas probablemente mejore el rendimiento de las consultas.</span><span class="sxs-lookup"><span data-stu-id="1bce0-238">For production workloads, using distributed tables is likely to improve query performance.</span></span> <span data-ttu-id="1bce0-239">Consulte [Instrucciones para diseñar tablas distribuidas en Azure SQL Data Warehouse](/azure/sql-data-warehouse/sql-data-warehouse-tables-distribute).</span><span class="sxs-lookup"><span data-stu-id="1bce0-239">See [Guidance for designing distributed tables in Azure SQL Data Warehouse](/azure/sql-data-warehouse/sql-data-warehouse-tables-distribute).</span></span> <span data-ttu-id="1bce0-240">Los scripts de ejemplo ejecutan las consultas utilizando una [clase de recursos](/azure/sql-data-warehouse/resource-classes-for-workload-management) estática.</span><span class="sxs-lookup"><span data-stu-id="1bce0-240">Our example scripts run the queries using a static [resource class](/azure/sql-data-warehouse/resource-classes-for-workload-management).</span></span>

### <a name="load-the-semantic-model"></a><span data-ttu-id="1bce0-241">Carga del modelo semántico</span><span class="sxs-lookup"><span data-stu-id="1bce0-241">Load the semantic model</span></span>

<span data-ttu-id="1bce0-242">Cargue los datos en un modelo tabular en Azure Analysis Services.</span><span class="sxs-lookup"><span data-stu-id="1bce0-242">Load the data into a tabular model in Azure Analysis Services.</span></span> <span data-ttu-id="1bce0-243">En este paso, creará un modelo de datos semánticos usando SQL Server Data Tools (SSDT).</span><span class="sxs-lookup"><span data-stu-id="1bce0-243">In this step, you create a semantic data model by using SQL Server Data Tools (SSDT).</span></span> <span data-ttu-id="1bce0-244">También puede crear un modelo mediante la importación desde un archivo de Power BI Desktop.</span><span class="sxs-lookup"><span data-stu-id="1bce0-244">You can also create a model by importing it from a Power BI Desktop file.</span></span> <span data-ttu-id="1bce0-245">Teniendo en cuenta que SQL Data Warehouse no admite las claves externas, tiene que agregar las relaciones al modelo semántico para que se puedan realizar uniones entre las tablas.</span><span class="sxs-lookup"><span data-stu-id="1bce0-245">Because SQL Data Warehouse does not support foreign keys, you must add the relationships to the semantic model, so that you can join across tables.</span></span>

### <a name="use-power-bi-to-visualize-the-data"></a><span data-ttu-id="1bce0-246">Uso de Power BI para visualizar los datos</span><span class="sxs-lookup"><span data-stu-id="1bce0-246">Use Power BI to visualize the data</span></span>

<span data-ttu-id="1bce0-247">Power BI admite dos opciones para la conexión a Azure Analysis Services:</span><span class="sxs-lookup"><span data-stu-id="1bce0-247">Power BI supports two options for connecting to Azure Analysis Services:</span></span>

- <span data-ttu-id="1bce0-248">Importación.</span><span class="sxs-lookup"><span data-stu-id="1bce0-248">Import.</span></span> <span data-ttu-id="1bce0-249">Se importan los datos en el modelo BI.</span><span class="sxs-lookup"><span data-stu-id="1bce0-249">The data is imported into the Power BI model.</span></span>
- <span data-ttu-id="1bce0-250">Conexión dinámica.</span><span class="sxs-lookup"><span data-stu-id="1bce0-250">Live Connection.</span></span> <span data-ttu-id="1bce0-251">Se extraen los datos directamente desde Analysis Services.</span><span class="sxs-lookup"><span data-stu-id="1bce0-251">Data is pulled directly from Analysis Services.</span></span>

<span data-ttu-id="1bce0-252">Se recomienda la conexión dinámica, ya que no requiere copiar los datos en el modelo de Power BI.</span><span class="sxs-lookup"><span data-stu-id="1bce0-252">We recommend Live Connection because it doesn't require copying data into the Power BI model.</span></span> <span data-ttu-id="1bce0-253">Además, al usar DirectQuery se garantiza que los resultados siempre sean coherentes con los últimos datos de origen.</span><span class="sxs-lookup"><span data-stu-id="1bce0-253">Also, using DirectQuery ensures that results are always consistent with the latest source data.</span></span> <span data-ttu-id="1bce0-254">Para más información, consulte [Conexión con Power BI](/azure/analysis-services/analysis-services-connect-pbi).</span><span class="sxs-lookup"><span data-stu-id="1bce0-254">For more information, see [Connect with Power BI](/azure/analysis-services/analysis-services-connect-pbi).</span></span>

<span data-ttu-id="1bce0-255">**Recomendaciones**</span><span class="sxs-lookup"><span data-stu-id="1bce0-255">**Recommendations**</span></span>

<span data-ttu-id="1bce0-256">Evite ejecutar consultas de panel de BI directamente en el almacenamiento de datos.</span><span class="sxs-lookup"><span data-stu-id="1bce0-256">Avoid running BI dashboard queries directly against the data warehouse.</span></span> <span data-ttu-id="1bce0-257">Los paneles BI requieren tiempos de respuesta muy bajos, es posible que las consultas directas realizadas en el almacenamiento no pueden satisfacer esta necesidad.</span><span class="sxs-lookup"><span data-stu-id="1bce0-257">BI dashboards require very low response times, which direct queries against the warehouse may be unable to satisfy.</span></span> <span data-ttu-id="1bce0-258">Además, la actualización del panel se reflejará en el número de consultas simultáneas, lo que podría afectar al rendimiento.</span><span class="sxs-lookup"><span data-stu-id="1bce0-258">Also, refreshing the dashboard will count against the number of concurrent queries, which could impact performance.</span></span>

<span data-ttu-id="1bce0-259">Azure Analysis Services está diseñado para controlar los requisitos de consulta de un panel de BI, por lo que es el método recomendado es consultar Analysis Services desde Power BI.</span><span class="sxs-lookup"><span data-stu-id="1bce0-259">Azure Analysis Services is designed to handle the query requirements of a BI dashboard, so the recommended practice is to query Analysis Services from Power BI.</span></span>

## <a name="scalability-considerations"></a><span data-ttu-id="1bce0-260">Consideraciones sobre escalabilidad</span><span class="sxs-lookup"><span data-stu-id="1bce0-260">Scalability considerations</span></span>

### <a name="sql-data-warehouse"></a><span data-ttu-id="1bce0-261">SQL Data Warehouse</span><span class="sxs-lookup"><span data-stu-id="1bce0-261">SQL Data Warehouse</span></span>

<span data-ttu-id="1bce0-262">Con SQL Data Warehouse, puede escalar horizontalmente los recursos de proceso a petición.</span><span class="sxs-lookup"><span data-stu-id="1bce0-262">With SQL Data Warehouse, you can scale out your compute resources on demand.</span></span> <span data-ttu-id="1bce0-263">El motor de consultas optimiza las consultas para el procesamiento paralelo en función del número de nodos de ejecución y mueve los datos entre los nodos según sea necesario.</span><span class="sxs-lookup"><span data-stu-id="1bce0-263">The query engine optimizes queries for parallel processing based on the number of compute nodes, and moves data between nodes as necessary.</span></span> <span data-ttu-id="1bce0-264">Para más información consulte [Administración de proceso en Azure SQL Data Warehouse](/azure/sql-data-warehouse/sql-data-warehouse-manage-compute-overview).</span><span class="sxs-lookup"><span data-stu-id="1bce0-264">For more information, see [Manage compute in Azure SQL Data Warehouse](/azure/sql-data-warehouse/sql-data-warehouse-manage-compute-overview).</span></span>

### <a name="analysis-services"></a><span data-ttu-id="1bce0-265">Analysis Services</span><span class="sxs-lookup"><span data-stu-id="1bce0-265">Analysis Services</span></span>

<span data-ttu-id="1bce0-266">Para las cargas de trabajo de producción, se recomienda el nivel estándar para Azure Analysis Services, ya que admite la creación de particiones y DirectQuery.</span><span class="sxs-lookup"><span data-stu-id="1bce0-266">For production workloads, we recommend the Standard Tier for Azure Analysis Services, because it supports partitioning and DirectQuery.</span></span> <span data-ttu-id="1bce0-267">Dentro de un nivel, el tamaño de la instancia determina la memoria y potencia de procesamiento.</span><span class="sxs-lookup"><span data-stu-id="1bce0-267">Within a tier, the instance size determines the memory and processing power.</span></span> <span data-ttu-id="1bce0-268">La capacidad de procesamiento se mide en unidades de procesamiento de consultas (QPU).</span><span class="sxs-lookup"><span data-stu-id="1bce0-268">Processing power is measured in Query Processing Units (QPUs).</span></span> <span data-ttu-id="1bce0-269">Supervise el uso de las QPU para seleccionar el tamaño adecuado.</span><span class="sxs-lookup"><span data-stu-id="1bce0-269">Monitor your QPU usage to select the appropriate size.</span></span> <span data-ttu-id="1bce0-270">Para más información, consulte [Supervisión de las métricas del servidor](/azure/analysis-services/analysis-services-monitor).</span><span class="sxs-lookup"><span data-stu-id="1bce0-270">For more information, see [Monitor server metrics](/azure/analysis-services/analysis-services-monitor).</span></span>

<span data-ttu-id="1bce0-271">Bajo una carga alta, el rendimiento de las consultas se puede ver degradado debido a la simultaneidad de las mismas.</span><span class="sxs-lookup"><span data-stu-id="1bce0-271">Under high load, query performance can become degraded due to query concurrency.</span></span> <span data-ttu-id="1bce0-272">Puede escalar horizontalmente Analysis Services mediante la creación de un grupo de réplicas para procesar las consultas, para que se pueden realizar más consultas simultáneamente.</span><span class="sxs-lookup"><span data-stu-id="1bce0-272">You can scale out Analysis Services by creating a pool of replicas to process queries, so that more queries can be performed concurrently.</span></span> <span data-ttu-id="1bce0-273">El trabajo de procesar el modelo de datos siempre se produce en el servidor principal.</span><span class="sxs-lookup"><span data-stu-id="1bce0-273">The work of processing the data model always happens on the primary server.</span></span> <span data-ttu-id="1bce0-274">De forma predeterminada, el servidor principal también controla las consultas.</span><span class="sxs-lookup"><span data-stu-id="1bce0-274">By default, the primary server also handles queries.</span></span> <span data-ttu-id="1bce0-275">Si lo desea, puede designar al servidor principal para que ejecute el procesamiento de modo exclusivo, de modo que el grupo de consulta controle todas las consultas.</span><span class="sxs-lookup"><span data-stu-id="1bce0-275">Optionally, you can designate the primary server to run processing exclusively, so that the query pool handles all queries.</span></span> <span data-ttu-id="1bce0-276">Si los requisitos de procesamiento son altos, debe separar el procesamiento del grupo de consulta.</span><span class="sxs-lookup"><span data-stu-id="1bce0-276">If you have high processing requirements, you should separate the processing from the query pool.</span></span> <span data-ttu-id="1bce0-277">Si tiene cargas de consulta elevadas, y un procesamiento relativamente ligero, puede incluir el servidor principal en el grupo de consulta.</span><span class="sxs-lookup"><span data-stu-id="1bce0-277">If you have high query loads, and relatively light processing, you can include the primary server in the query pool.</span></span> <span data-ttu-id="1bce0-278">Para más información consulte [Escalabilidad horizontal de Azure Analysis Services](/azure/analysis-services/analysis-services-scale-out).</span><span class="sxs-lookup"><span data-stu-id="1bce0-278">For more information, see [Azure Analysis Services scale-out](/azure/analysis-services/analysis-services-scale-out).</span></span>

<span data-ttu-id="1bce0-279">Para reducir la cantidad de procesamiento innecesario, considere la posibilidad de utilizar particiones para dividir el modelo tabular en partes lógicas.</span><span class="sxs-lookup"><span data-stu-id="1bce0-279">To reduce the amount of unnecessary processing, consider using partitions to divide the tabular model into logical parts.</span></span> <span data-ttu-id="1bce0-280">Cada partición se puede procesar por separado.</span><span class="sxs-lookup"><span data-stu-id="1bce0-280">Each partition can be processed separately.</span></span> <span data-ttu-id="1bce0-281">Para más información consulte [Particiones](/sql/analysis-services/tabular-models/partitions-ssas-tabular).</span><span class="sxs-lookup"><span data-stu-id="1bce0-281">For more information, see [Partitions](/sql/analysis-services/tabular-models/partitions-ssas-tabular).</span></span>

## <a name="security-considerations"></a><span data-ttu-id="1bce0-282">Consideraciones sobre la seguridad</span><span class="sxs-lookup"><span data-stu-id="1bce0-282">Security considerations</span></span>

### <a name="ip-whitelisting-of-analysis-services-clients"></a><span data-ttu-id="1bce0-283">Creación de listas de direcciones IP permitidas de clientes de Analysis Services</span><span class="sxs-lookup"><span data-stu-id="1bce0-283">IP whitelisting of Analysis Services clients</span></span>

<span data-ttu-id="1bce0-284">Considere el uso de la característica de firewall de Analysis Services para crear una lista de direcciones IP permitidas de clientes.</span><span class="sxs-lookup"><span data-stu-id="1bce0-284">Consider using the Analysis Services firewall feature to whitelist client IP addresses.</span></span> <span data-ttu-id="1bce0-285">Cuando está habilitada, la característica de firewall bloquea todas las conexiones de cliente a excepción de las especificadas en las reglas de firewall.</span><span class="sxs-lookup"><span data-stu-id="1bce0-285">If enabled, the firewall blocks all client connections other than those specified in the firewall rules.</span></span> <span data-ttu-id="1bce0-286">El servicio Power BI se encuentra en la lista de permitidos de forma predeterminada, pero se puede deshabilitar esta regla si lo desea.</span><span class="sxs-lookup"><span data-stu-id="1bce0-286">The default rules whitelist the Power BI service, but you can disable this rule if desired.</span></span> <span data-ttu-id="1bce0-287">Para más información, consulte [Hardening Azure Analysis Services with the new firewall capability](https://azure.microsoft.com/blog/hardening-azure-analysis-services-with-the-new-firewall-capability/) (Protección de Azure Analysis Services con la nueva funcionalidad de firewall).</span><span class="sxs-lookup"><span data-stu-id="1bce0-287">For more information, see [Hardening Azure Analysis Services with the new firewall capability](https://azure.microsoft.com/blog/hardening-azure-analysis-services-with-the-new-firewall-capability/).</span></span>

### <a name="authorization"></a><span data-ttu-id="1bce0-288">Autorización</span><span class="sxs-lookup"><span data-stu-id="1bce0-288">Authorization</span></span>

<span data-ttu-id="1bce0-289">Azure Analysis Services usa Azure Active Directory (Azure AD) para autenticar a los usuarios que se conectan a un servidor de Analysis Services.</span><span class="sxs-lookup"><span data-stu-id="1bce0-289">Azure Analysis Services uses Azure Active Directory (Azure AD) to authenticate users who connect to an Analysis Services server.</span></span> <span data-ttu-id="1bce0-290">Puede restringir los datos que un usuario determinado puede ver mediante la creación de roles, y después asignar grupos o usuarios de Azure AD a esos roles.</span><span class="sxs-lookup"><span data-stu-id="1bce0-290">You can restrict what data a particular user is able to view, by creating roles and then assigning Azure AD users or groups to those roles.</span></span> <span data-ttu-id="1bce0-291">Para cada rol puede hacer lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="1bce0-291">For each role, you can:</span></span>

- <span data-ttu-id="1bce0-292">Proteger las tablas o columnas individuales.</span><span class="sxs-lookup"><span data-stu-id="1bce0-292">Protect tables or individual columns.</span></span>
- <span data-ttu-id="1bce0-293">Proteger filas individuales en base a expresiones de filtro.</span><span class="sxs-lookup"><span data-stu-id="1bce0-293">Protect individual rows based on filter expressions.</span></span>

<span data-ttu-id="1bce0-294">Para más información, consulte [Administración de usuarios y roles de base de datos](/azure/analysis-services/analysis-services-database-users).</span><span class="sxs-lookup"><span data-stu-id="1bce0-294">For more information, see [Manage database roles and users](/azure/analysis-services/analysis-services-database-users).</span></span>

## <a name="deploy-the-solution"></a><span data-ttu-id="1bce0-295">Implementación de la solución</span><span class="sxs-lookup"><span data-stu-id="1bce0-295">Deploy the solution</span></span>

<span data-ttu-id="1bce0-296">Para la implementación y ejecución de la implementación de referencia, siga los pasos del [Léame de GitHub][github-folder].</span><span class="sxs-lookup"><span data-stu-id="1bce0-296">To the deploy and run the reference implementation, follow the steps in the [GitHub readme][github-folder].</span></span> <span data-ttu-id="1bce0-297">Implementa lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="1bce0-297">It deploys the following:</span></span>

- <span data-ttu-id="1bce0-298">Una máquina virtual Windows para simular un servidor de bases de datos local.</span><span class="sxs-lookup"><span data-stu-id="1bce0-298">A Windows VM to simulate an on-premises database server.</span></span> <span data-ttu-id="1bce0-299">Incluye SQL Server 2017 y herramientas relacionadas, junto con Power BI Desktop.</span><span class="sxs-lookup"><span data-stu-id="1bce0-299">It includes SQL Server 2017 and related tools, along with Power BI Desktop.</span></span>
- <span data-ttu-id="1bce0-300">Una cuenta de almacenamiento de Azure que proporciona almacenamiento de blobs para almacenar los datos exportados de la base de datos de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="1bce0-300">An Azure storage account that provides Blob storage to hold data exported from the SQL Server database.</span></span>
- <span data-ttu-id="1bce0-301">Una instancia de Azure SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="1bce0-301">An Azure SQL Data Warehouse instance.</span></span>
- <span data-ttu-id="1bce0-302">Una instancia de Azure Analysis Services.</span><span class="sxs-lookup"><span data-stu-id="1bce0-302">An Azure Analysis Services instance.</span></span>

## <a name="next-steps"></a><span data-ttu-id="1bce0-303">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="1bce0-303">Next steps</span></span>

- <span data-ttu-id="1bce0-304">Use Azure Data Factory para automatizar la canalización de ELT.</span><span class="sxs-lookup"><span data-stu-id="1bce0-304">Use Azure Data Factory to automate the ELT pipeline.</span></span> <span data-ttu-id="1bce0-305">Consulte [Inteligencia empresarial automatizada con SQL Data Warehouse y Azure Data Factory][adf-ra].</span><span class="sxs-lookup"><span data-stu-id="1bce0-305">See [Automated enterprise BI with SQL Data Warehouse and Azure Data Factory][adf-ra].</span></span>

## <a name="related-resources"></a><span data-ttu-id="1bce0-306">Recursos relacionados</span><span class="sxs-lookup"><span data-stu-id="1bce0-306">Related resources</span></span>

<span data-ttu-id="1bce0-307">Puede examinar los siguientes [escenarios de ejemplo de Azure](/azure/architecture/example-scenario) que muestran soluciones específicas que usan algunas tecnologías similares:</span><span class="sxs-lookup"><span data-stu-id="1bce0-307">You may want to review the following [Azure example scenarios](/azure/architecture/example-scenario) that demonstrate specific solutions using some of the same technologies:</span></span>

- [<span data-ttu-id="1bce0-308">Almacenamiento de datos y análisis de ventas y marketing</span><span class="sxs-lookup"><span data-stu-id="1bce0-308">Data warehousing and analytics for sales and marketing</span></span>](/azure/architecture/example-scenario/data/data-warehouse)
- [<span data-ttu-id="1bce0-309">Extracción, transformación y carga de datos híbrida con instancias locales ya existentes de SQL Server Integration Services y Azure Data Factory</span><span class="sxs-lookup"><span data-stu-id="1bce0-309">Hybrid ETL with existing on-premises SSIS and Azure Data Factory</span></span>](/azure/architecture/example-scenario/data/hybrid-etl-with-adf)

<!-- links -->

[adf-ra]: ./enterprise-bi-adf.md
[github-folder]: https://github.com/mspnp/reference-architectures/tree/master/data/enterprise_bi_sqldw
[wwi]: /sql/sample/world-wide-importers/wide-world-importers-oltp-database
