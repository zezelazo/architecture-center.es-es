---
title: SAP S/4HANA para Linux Virtual Machines en Azure
titleSuffix: Azure Reference Architectures
description: Prácticas probadas para ejecutar SAP S/4HANA en un entorno de Linux en Azure con alta disponibilidad.
author: lbrader
ms.date: 05/11/2018
ms.custom: seodec18
ms.openlocfilehash: 9eb73ddaf5b1cb815f037f46c7e187f61d126876
ms.sourcegitcommit: bb7fcffbb41e2c26a26f8781df32825eb60df70c
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 12/20/2018
ms.locfileid: "53644179"
---
# <a name="sap-s4hana-for-linux-virtual-machines-on-azure"></a><span data-ttu-id="0eac4-103">SAP S/4HANA para máquinas virtuales Linux en Azure</span><span class="sxs-lookup"><span data-stu-id="0eac4-103">SAP S/4HANA for Linux virtual machines on Azure</span></span>

<span data-ttu-id="0eac4-104">Esta arquitectura de referencia muestra un conjunto de procedimientos probados para ejecutar S/4HANA en un entorno de alta disponibilidad que admita recuperación ante desastres en Azure.</span><span class="sxs-lookup"><span data-stu-id="0eac4-104">This reference architecture shows a set of proven practices for running S/4HANA in a high availability environment that supports disaster recovery on Azure.</span></span> <span data-ttu-id="0eac4-105">Esta arquitectura se implementa con tamaños de máquina virtual (VM) específicos que se pueden cambiar para acomodarse a las necesidades de la organización.</span><span class="sxs-lookup"><span data-stu-id="0eac4-105">This architecture is deployed with specific virtual machine (VM) sizes that can be changed to accommodate your organization's needs.</span></span>

![Arquitectura de referencia para SAP S/4HANA para Linux Virtual Machines en Azure](./images/sap-s4hana.png)

<span data-ttu-id="0eac4-107">*Descargue un [archivo Visio][visio-download] de esta arquitectura.*</span><span class="sxs-lookup"><span data-stu-id="0eac4-107">*Download a [Visio file][visio-download] of this architecture.*</span></span>

> [!NOTE]
> <span data-ttu-id="0eac4-108">La implementación de esta arquitectura de referencia requiere licencias adecuadas de los productos de SAP y de otras tecnologías que no son de Microsoft.</span><span class="sxs-lookup"><span data-stu-id="0eac4-108">Deploying this reference architecture requires appropriate licensing of SAP products and other non-Microsoft technologies.</span></span>

## <a name="architecture"></a><span data-ttu-id="0eac4-109">Arquitectura</span><span class="sxs-lookup"><span data-stu-id="0eac4-109">Architecture</span></span>

<span data-ttu-id="0eac4-110">Esta arquitectura de referencia describe un sistema de producción de nivel empresarial.</span><span class="sxs-lookup"><span data-stu-id="0eac4-110">This reference architecture describes a enterprise-grade, production-level system.</span></span> <span data-ttu-id="0eac4-111">Para adaptarse a las necesidades de su empresa, esta configuración se puede reducir a una sola máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="0eac4-111">To suit your business needs, this configuration can be reduced to a single virtual machine.</span></span> <span data-ttu-id="0eac4-112">Sin embargo, se requieren los siguientes componentes:</span><span class="sxs-lookup"><span data-stu-id="0eac4-112">However, the following components are required:</span></span>

<span data-ttu-id="0eac4-113">**Red virtual**.</span><span class="sxs-lookup"><span data-stu-id="0eac4-113">**Virtual network**.</span></span> <span data-ttu-id="0eac4-114">El servicio [Azure Virtual Network](/azure/virtual-network/virtual-networks-overview) conecta los recursos de Azure entre sí de forma segura.</span><span class="sxs-lookup"><span data-stu-id="0eac4-114">The [Azure Virtual Network](/azure/virtual-network/virtual-networks-overview) service securely connects Azure resources to each other.</span></span> <span data-ttu-id="0eac4-115">En esta arquitectura, la red virtual se conecta a un entorno local a través de una puerta de enlace implementada en el concentrador de una [topología en estrella tipo hub-and-spoke](../hybrid-networking/hub-spoke.md).</span><span class="sxs-lookup"><span data-stu-id="0eac4-115">In this architecture, the virtual network connects to an on-premises environment through a gateway deployed in the hub of a [hub-spoke topology](../hybrid-networking/hub-spoke.md).</span></span> <span data-ttu-id="0eac4-116">El radio es la red virtual que se usa para las aplicaciones de SAP.</span><span class="sxs-lookup"><span data-stu-id="0eac4-116">The spoke is the virtual network used for the SAP applications.</span></span>

<span data-ttu-id="0eac4-117">**Subredes**.</span><span class="sxs-lookup"><span data-stu-id="0eac4-117">**Subnets**.</span></span> <span data-ttu-id="0eac4-118">La red virtual se subdivide en diferentes [subredes](/azure/virtual-network/virtual-network-manage-subnet) para cada nivel: puerta de enlace, aplicación, base de datos y servicios compartidos.</span><span class="sxs-lookup"><span data-stu-id="0eac4-118">The virtual network is subdivided into separate [subnets](/azure/virtual-network/virtual-network-manage-subnet) for each tier: gateway, application, database, and shared services.</span></span>

<span data-ttu-id="0eac4-119">**Máquinas virtuales**.</span><span class="sxs-lookup"><span data-stu-id="0eac4-119">**Virtual machines**.</span></span> <span data-ttu-id="0eac4-120">Esta arquitectura usa máquinas virtuales que ejecutan Linux en la capa de aplicación y el nivel de base de datos, agrupadas como se indica a continuación:</span><span class="sxs-lookup"><span data-stu-id="0eac4-120">This architecture uses virtual machines running Linux for the application tier and database tier, grouped as follows:</span></span>

- <span data-ttu-id="0eac4-121">**Capa de aplicación**.</span><span class="sxs-lookup"><span data-stu-id="0eac4-121">**Application tier**.</span></span> <span data-ttu-id="0eac4-122">Incluye el clúster de servidores front-end Fiori, el grupo de SAP Web Dispatcher, el clúster de servidores de aplicaciones y el clúster de SAP Central Services.</span><span class="sxs-lookup"><span data-stu-id="0eac4-122">Includes the Fiori Front-end Server pool, SAP Web Dispatcher pool, application server pool, and SAP Central Services cluster.</span></span> <span data-ttu-id="0eac4-123">Para lograr la alta disponibilidad de Central Services en máquinas virtuales Linux de Azure, se requiere un servicio Network File System (NFS) con alta disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="0eac4-123">For high availability of Central Services on Azure Linux virtual machines, a highly available Network File System (NFS) service is required.</span></span>
- <span data-ttu-id="0eac4-124">**Clúster NFS**.</span><span class="sxs-lookup"><span data-stu-id="0eac4-124">**NFS cluster**.</span></span> <span data-ttu-id="0eac4-125">Esta arquitectura utiliza un servidor [NFS](/azure/virtual-machines/workloads/sap/high-availability-guide-suse-nfs) que se ejecuta en un clúster de Linux para almacenar datos compartidos entre los sistemas SAP.</span><span class="sxs-lookup"><span data-stu-id="0eac4-125">This architecture uses an [NFS](/azure/virtual-machines/workloads/sap/high-availability-guide-suse-nfs) server running on a Linux cluster to store data shared between SAP systems.</span></span> <span data-ttu-id="0eac4-126">Este clúster centralizado se puede compartir entre varios sistemas SAP.</span><span class="sxs-lookup"><span data-stu-id="0eac4-126">This centralized cluster can be shared across multiple SAP systems.</span></span> <span data-ttu-id="0eac4-127">Para lograr la alta disponibilidad del servicio NFS, se utiliza la extensión de alta disponibilidad adecuada para la distribución de Linux seleccionada.</span><span class="sxs-lookup"><span data-stu-id="0eac4-127">For high availability of the NFS service, the appropriate High Availability Extension for the selected Linux distribution is used.</span></span>
- <span data-ttu-id="0eac4-128">**SAP HANA**.</span><span class="sxs-lookup"><span data-stu-id="0eac4-128">**SAP HANA**.</span></span> <span data-ttu-id="0eac4-129">El nivel de base de datos usa dos o más máquinas virtuales de Linux en un clúster para conseguir alta disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="0eac4-129">The database tier uses two or more Linux virtual machines in a cluster to achieve high availability.</span></span> <span data-ttu-id="0eac4-130">La replicación del sistema de HANA (HSR) se usa para replicar contenidos entre los sistemas HANA principal y secundario.</span><span class="sxs-lookup"><span data-stu-id="0eac4-130">HANA System Replication (HSR) is used to replicate contents between primary and secondary HANA systems.</span></span> <span data-ttu-id="0eac4-131">La agrupación en clústeres de Linux se usa para detectar errores del sistema y facilitar la conmutación automática por error.</span><span class="sxs-lookup"><span data-stu-id="0eac4-131">Linux clustering is used to detect system failures and facilitate automatic failover.</span></span> <span data-ttu-id="0eac4-132">Se puede usar un mecanismo de barrera basado en almacenamiento o basado en la nube para garantizar que el sistema con errores se aísla o se cierra para evitar el síndrome de cerebro dividido.</span><span class="sxs-lookup"><span data-stu-id="0eac4-132">A storage-based or cloud-based fencing mechanism can be used to ensure the failed system is isolated or shut down to avoid the cluster split-brain condition.</span></span>
- <span data-ttu-id="0eac4-133">**JumpBox**.</span><span class="sxs-lookup"><span data-stu-id="0eac4-133">**Jumpbox**.</span></span> <span data-ttu-id="0eac4-134">También se denomina bastion host.</span><span class="sxs-lookup"><span data-stu-id="0eac4-134">Also called a bastion host.</span></span> <span data-ttu-id="0eac4-135">Se trata de una máquina virtual segura en la red que usan los administradores para conectarse al resto de máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="0eac4-135">This is a secure virtual machine on the network that administrators use to connect to the other virtual machines.</span></span> <span data-ttu-id="0eac4-136">Se puede ejecutar en Windows o Linux.</span><span class="sxs-lookup"><span data-stu-id="0eac4-136">It can run Windows or Linux.</span></span> <span data-ttu-id="0eac4-137">Utilice un jumpbox de Windows para una mejor navegación web al usar las herramientas de administración de HANA Cockpit o HANA Studio.</span><span class="sxs-lookup"><span data-stu-id="0eac4-137">Use a Windows jumpbox for web browsing convenience when using HANA Cockpit or HANA Studio management tools.</span></span>

<span data-ttu-id="0eac4-138">**Equilibradores de carga.**</span><span class="sxs-lookup"><span data-stu-id="0eac4-138">**Load balancers**.</span></span> <span data-ttu-id="0eac4-139">Tanto los equilibradores de carga de SAP integrados como [Azure Load Balancer](/azure/load-balancer/load-balancer-overview) se utilizan para lograr alta disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="0eac4-139">Both built-in SAP load balancers and [Azure Load Balancer](/azure/load-balancer/load-balancer-overview) are used to achieve HA.</span></span> <span data-ttu-id="0eac4-140">Las instancias de Azure Load Balancer se utilizan para distribuir el tráfico a las máquinas virtuales en la subred de la capa de aplicación.</span><span class="sxs-lookup"><span data-stu-id="0eac4-140">Azure Load Balancer instances are used to distribute traffic to virtual machines in the application tier subnet.</span></span>

<span data-ttu-id="0eac4-141">**Conjuntos de disponibilidad**.</span><span class="sxs-lookup"><span data-stu-id="0eac4-141">**Availability sets**.</span></span> <span data-ttu-id="0eac4-142">En las máquinas virtuales de todos los grupos y clústeres (Web Dispatcher, el servidor de aplicaciones de SAP, Central Services, NFS y HANA), los roles se agrupan en [conjuntos de disponibilidad](/azure/virtual-machines/windows/tutorial-availability-sets) independientes y se aprovisionan un mínimo de dos máquinas virtuales por rol,</span><span class="sxs-lookup"><span data-stu-id="0eac4-142">Virtual machines for all pools and clusters (Web Dispatcher, SAP application servers, Central Services, NFS, and HANA) are grouped into separate [availability sets](/azure/virtual-machines/windows/tutorial-availability-sets), and at least two virtual machines are provisioned per role.</span></span> <span data-ttu-id="0eac4-143">lo que hace que las máquinas virtuales sean aptas para un [Acuerdo de Nivel de Servicio](https://azure.microsoft.com/support/legal/sla/virtual-machines) (SLA) mayor.</span><span class="sxs-lookup"><span data-stu-id="0eac4-143">This makes the virtual machines eligible for a higher [service level agreement](https://azure.microsoft.com/support/legal/sla/virtual-machines) (SLA).</span></span>

<span data-ttu-id="0eac4-144">**NIC**.</span><span class="sxs-lookup"><span data-stu-id="0eac4-144">**NICs**.</span></span> <span data-ttu-id="0eac4-145">Las [tarjetas de interfaz de red](/azure/virtual-network/virtual-network-network-interface) (NIC) permiten la comunicación de las máquinas virtuales en una red virtual.</span><span class="sxs-lookup"><span data-stu-id="0eac4-145">[Network interface cards](/azure/virtual-network/virtual-network-network-interface) (NICs) enable all communication of virtual machines on a virtual network.</span></span>

<span data-ttu-id="0eac4-146">**Grupos de seguridad de red**.</span><span class="sxs-lookup"><span data-stu-id="0eac4-146">**Network security groups**.</span></span> <span data-ttu-id="0eac4-147">Para restringir el tráfico entrante, saliente y de la intra-subnet en la red virtual, se usan [grupos de seguridad de red](/azure/virtual-network/virtual-networks-nsg) (NSG).</span><span class="sxs-lookup"><span data-stu-id="0eac4-147">To restrict incoming, outgoing, and intra-subnet traffic in the virtual network, [network security groups](/azure/virtual-network/virtual-networks-nsg) (NSGs) are used.</span></span>

<span data-ttu-id="0eac4-148">**Puerta de enlace**.</span><span class="sxs-lookup"><span data-stu-id="0eac4-148">**Gateway**.</span></span> <span data-ttu-id="0eac4-149">Una puerta de enlace extiende una red local a la red virtual de Azure.</span><span class="sxs-lookup"><span data-stu-id="0eac4-149">A gateway extends your on-premises network to the Azure virtual network.</span></span> <span data-ttu-id="0eac4-150">[ExpressRoute](/azure/architecture/reference-architectures/hybrid-networking/expressroute) es el servicio de Azure recomendado para crear conexiones privadas que no atraviesen Internet, pero también se puede usar una conexión de [sitio a sitio](/azure/vpn-gateway/vpn-gateway-howto-site-to-site-resource-manager-portal).</span><span class="sxs-lookup"><span data-stu-id="0eac4-150">[ExpressRoute](/azure/architecture/reference-architectures/hybrid-networking/expressroute) is the recommended Azure service for creating private connections that do not go over the public Internet, but a [Site-to-Site](/azure/vpn-gateway/vpn-gateway-howto-site-to-site-resource-manager-portal) connection can also be used.</span></span>

<span data-ttu-id="0eac4-151">**Azure Storage**.</span><span class="sxs-lookup"><span data-stu-id="0eac4-151">**Azure Storage**.</span></span> <span data-ttu-id="0eac4-152">Para proporcionar un almacenamiento persistente de disco duro virtual (VHD) de una máquina virtual, se requiere [Azure Storage](/azure/storage/).</span><span class="sxs-lookup"><span data-stu-id="0eac4-152">To provide persistent storage of a virtual machine's virtual hard disk (VHD), [Azure Storage](/azure/storage/) is required.</span></span>

## <a name="recommendations"></a><span data-ttu-id="0eac4-153">Recomendaciones</span><span class="sxs-lookup"><span data-stu-id="0eac4-153">Recommendations</span></span>

<span data-ttu-id="0eac4-154">Esta arquitectura describe una pequeña implementación empresarial en el nivel de producción.</span><span class="sxs-lookup"><span data-stu-id="0eac4-154">This architecture describes a small production-level enterprise deployment.</span></span> <span data-ttu-id="0eac4-155">La implementación será diferente en función de sus requisitos empresariales.</span><span class="sxs-lookup"><span data-stu-id="0eac4-155">Your deployment will differ based on your business requirements.</span></span> <span data-ttu-id="0eac4-156">Use estas recomendaciones como punto de partida.</span><span class="sxs-lookup"><span data-stu-id="0eac4-156">Use these recommendations as a starting point.</span></span>

### <a name="virtual-machines"></a><span data-ttu-id="0eac4-157">Máquinas virtuales</span><span class="sxs-lookup"><span data-stu-id="0eac4-157">Virtual machines</span></span>

<span data-ttu-id="0eac4-158">En las granjas y clústeres de servidores de aplicaciones, ajuste el número de máquinas virtuales según sus requisitos.</span><span class="sxs-lookup"><span data-stu-id="0eac4-158">In application server pools and clusters, adjust the number of virtual machines based on your requirements.</span></span> <span data-ttu-id="0eac4-159">La [guía de planeación e implementación de Azure Virtual Machines](/azure/virtual-machines/workloads/sap/planning-guide) incluye detalles sobre cómo ejecutar SAP NetWeaver en máquinas virtuales, pero la información también se puede aplicar a SAP S/4HANA.</span><span class="sxs-lookup"><span data-stu-id="0eac4-159">The [Azure Virtual Machines planning and implementation guide](/azure/virtual-machines/workloads/sap/planning-guide) includes details about running SAP NetWeaver on virtual machines, but the information applies to SAP S/4HANA as well.</span></span>

<span data-ttu-id="0eac4-160">Para más información acerca de la compatibilidad de SAP con Azure y las métricas de rendimiento (SAPS), consulte la [nota de SAP 1928533](https://launchpad.support.sap.com/#/notes/1928533).</span><span class="sxs-lookup"><span data-stu-id="0eac4-160">For details about SAP support for Azure virtual machine types and throughput metrics (SAPS), see [SAP Note 1928533](https://launchpad.support.sap.com/#/notes/1928533).</span></span>

### <a name="sap-web-dispatcher-pool"></a><span data-ttu-id="0eac4-161">Grupo de SAP Web Dispatcher</span><span class="sxs-lookup"><span data-stu-id="0eac4-161">SAP Web Dispatcher pool</span></span>

<span data-ttu-id="0eac4-162">El componente Web Dispatcher se usa como equilibrador de carga para el tráfico SAP que circula entre los servidores de aplicaciones de SAP.</span><span class="sxs-lookup"><span data-stu-id="0eac4-162">The Web Dispatcher component is used as a load balancer for SAP traffic among the SAP application servers.</span></span> <span data-ttu-id="0eac4-163">Para lograr una alta disponibilidad para el componente de Web Dispatcher, se usa Azure Load Balancer para implementar la configuración paralela de Web Dispatcher en una configuración round-robin para la distribución del tráfico HTTP(S) entre las instancias disponibles de Web Dispatcher del grupo back-end de equilibradores de carga.</span><span class="sxs-lookup"><span data-stu-id="0eac4-163">To achieve high availability for the Web Dispatcher component, Azure Load Balancer is used to implement the parallel Web Dispatcher setup in a round-robin configuration for HTTP(S) traffic distribution among the available Web Dispatchers in the balancers back-end pool.</span></span>

### <a name="fiori-front-end-server"></a><span data-ttu-id="0eac4-164">Servidor front-end de Fiori</span><span class="sxs-lookup"><span data-stu-id="0eac4-164">Fiori Front-end Server</span></span>

<span data-ttu-id="0eac4-165">El servidor front-end de Fiori utiliza una [puerta de enlace de NetWeaver](https://help.sap.com/doc/saphelp_gateway20sp12/2.0/en-US/76/08828d832e4aa78748e9f82204a864/content.htm?no_cache=true).</span><span class="sxs-lookup"><span data-stu-id="0eac4-165">The Fiori Front-end Server uses a [NetWeaver Gateway](https://help.sap.com/doc/saphelp_gateway20sp12/2.0/en-US/76/08828d832e4aa78748e9f82204a864/content.htm?no_cache=true).</span></span> <span data-ttu-id="0eac4-166">Para pequeñas implementaciones, se puede cargar en el servidor Fiori.</span><span class="sxs-lookup"><span data-stu-id="0eac4-166">For small deployments, it can be loaded on the Fiori server.</span></span> <span data-ttu-id="0eac4-167">Para implementaciones grandes, se puede implementar un servidor independiente para la puerta de enlace de NetWeaver delante del clúster de servidores front-end de Fiori.</span><span class="sxs-lookup"><span data-stu-id="0eac4-167">For large deployments, a separate server for the NetWeaver Gateway may be deployed in front of the Fiori Front-end Server pool.</span></span>

### <a name="application-servers-pool"></a><span data-ttu-id="0eac4-168">Grupo de servidores de aplicaciones</span><span class="sxs-lookup"><span data-stu-id="0eac4-168">Application servers pool</span></span>

<span data-ttu-id="0eac4-169">Para administrar grupos de inicio de sesión para servidores de aplicaciones de ABAP, se utiliza la transacción SMLG.</span><span class="sxs-lookup"><span data-stu-id="0eac4-169">To manage logon groups for ABAP application servers, the SMLG transaction is used.</span></span> <span data-ttu-id="0eac4-170">Usa la función de equilibrio de carga en el servidor de mensajes de Central Services para distribuir la carga de trabajo entre el grupo de servidores de aplicaciones de SAP para SAPGUI y el tráfico de RFC.</span><span class="sxs-lookup"><span data-stu-id="0eac4-170">It uses the load balancing function within the message server of the Central Services to distribute workload among SAP application servers pool for SAPGUIs and RFC traffic.</span></span> <span data-ttu-id="0eac4-171">La conexión de servidor de aplicaciones para Central Services de alta disponibilidad se realiza a través del nombre de la red virtual del clúster.</span><span class="sxs-lookup"><span data-stu-id="0eac4-171">The application server connection to the highly available Central Services is through the cluster virtual network name.</span></span> <span data-ttu-id="0eac4-172">Esto evita la necesidad de cambiar el perfil del servidor de aplicaciones para la conectividad de Central Services después de una conmutación por error local.</span><span class="sxs-lookup"><span data-stu-id="0eac4-172">This avoids the need to change the application server profile for Central Services connectivity after a local failover.</span></span>

### <a name="sap-central-services-cluster"></a><span data-ttu-id="0eac4-173">Clúster de SAP Central Services</span><span class="sxs-lookup"><span data-stu-id="0eac4-173">SAP Central Services cluster</span></span>

<span data-ttu-id="0eac4-174">Central Services se puede implementar en una única máquina virtual si la alta disponibilidad no es un requisito.</span><span class="sxs-lookup"><span data-stu-id="0eac4-174">Central Services can be deployed to a single virtual machine when high availability is not a requirement.</span></span> <span data-ttu-id="0eac4-175">Sin embargo, la máquina virtual única se convierte en un único punto de error (SPOF) para el entorno de SAP.</span><span class="sxs-lookup"><span data-stu-id="0eac4-175">However, the single virtual machine becomes a potential single point of failure (SPOF) for the SAP environment.</span></span> <span data-ttu-id="0eac4-176">Para una implementación de Central Services de alta disponibilidad, se utilizan un clúster NFS de alta disponibilidad y un clúster de Central Services de alta disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="0eac4-176">For a highly available Central Services deployment, a highly available NFS cluster and a highly available Central Services cluster are used.</span></span>

### <a name="nfs-cluster"></a><span data-ttu-id="0eac4-177">Clúster NFS</span><span class="sxs-lookup"><span data-stu-id="0eac4-177">NFS cluster</span></span>

<span data-ttu-id="0eac4-178">Se usa DRBD (Distributed Replicated Block Device) para la replicación entre los nodos del clúster NFS.</span><span class="sxs-lookup"><span data-stu-id="0eac4-178">DRBD (Distributed Replicated Block Device) is used for replication between the nodes of the NFS cluster.</span></span>

### <a name="availability-sets"></a><span data-ttu-id="0eac4-179">Conjuntos de disponibilidad</span><span class="sxs-lookup"><span data-stu-id="0eac4-179">Availability sets</span></span>

<span data-ttu-id="0eac4-180">Los conjuntos de disponibilidad distribuyen los servidores en distintos grupos físicos de actualización y de infraestructura físicos para mejorar la disponibilidad del servicio.</span><span class="sxs-lookup"><span data-stu-id="0eac4-180">Availability sets distribute servers to different physical infrastructure and update groups to improve service availability.</span></span> <span data-ttu-id="0eac4-181">La colocación de máquinas virtuales que realicen el mismo rol en conjuntos de disponibilidad ayudan a protegerse contra el tiempo de inactividad que provoca el mantenimiento de la infraestructura de Azure y a cumplir los[Acuerdos de Nivel de Servicio](https://azure.microsoft.com/support/legal/sla/virtual-machines).</span><span class="sxs-lookup"><span data-stu-id="0eac4-181">Put virtual machines that perform the same role into an availability sets to help guard against downtime caused by Azure infrastructure maintenance and to meet [SLAs](https://azure.microsoft.com/support/legal/sla/virtual-machines).</span></span> <span data-ttu-id="0eac4-182">Se recomiendan dos, o más, máquinas virtuales por conjunto de disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="0eac4-182">Two or more virtual machines per availability set is recommended.</span></span>

<span data-ttu-id="0eac4-183">Todas las máquinas virtuales de un conjunto deben realizar el misma rol.</span><span class="sxs-lookup"><span data-stu-id="0eac4-183">All virtual machines in a set must perform the same role.</span></span> <span data-ttu-id="0eac4-184">No mezcle servidores de distintos roles en el mismo conjunto de disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="0eac4-184">Do not mix servers of different roles in the same availability set.</span></span> <span data-ttu-id="0eac4-185">Por ejemplo, no coloque un nodo de ASCS en el mismo conjunto de disponibilidad que el servidor de aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="0eac4-185">For example, don't place a ASCS node in the same availability set with the application server.</span></span>

### <a name="nics"></a><span data-ttu-id="0eac4-186">Tarjetas de red</span><span class="sxs-lookup"><span data-stu-id="0eac4-186">NICs</span></span>

<span data-ttu-id="0eac4-187">En las implementaciones de entornos de SAP locales tradicionales se implementan varias tarjetas de interfaz de red (NIC) por máquina para aislar el tráfico administrativo del tráfico del negocio.</span><span class="sxs-lookup"><span data-stu-id="0eac4-187">Traditional on-premises SAP landscapes implement multiple network interface cards (NICs) per machine to segregate administrative traffic from business traffic.</span></span> <span data-ttu-id="0eac4-188">En Azure, la red virtual es una red definida por el software que envía todo el tráfico a través del mismo tejido de red.</span><span class="sxs-lookup"><span data-stu-id="0eac4-188">On Azure, the virtual network is a software-defined network that sends all traffic through the same network fabric.</span></span> <span data-ttu-id="0eac4-189">Por tanto, no es necesario el uso de varias tarjetas de interfaz de red.</span><span class="sxs-lookup"><span data-stu-id="0eac4-189">Therefore, the use of multiple NICs is unnecessary.</span></span> <span data-ttu-id="0eac4-190">Sin embargo, si su organización necesita separar el tráfico, puede implementar varias tarjetas de interfaz de red por máquina virtual, conecte cada una de ellas a una subred diferente y, después, use los grupos de seguridad de red para aplicar las distintas directivas de control de acceso.</span><span class="sxs-lookup"><span data-stu-id="0eac4-190">However, if your organization needs to segregate traffic, you can deploy multiple NICs per VM, connect each NIC to a different subnet, and then use NSGs to enforce different access control policies.</span></span>

### <a name="subnets-and-nsgs"></a><span data-ttu-id="0eac4-191">Subredes y grupos de seguridad de red</span><span class="sxs-lookup"><span data-stu-id="0eac4-191">Subnets and NSGs</span></span>

<span data-ttu-id="0eac4-192">Esta arquitectura divide el espacio de direcciones de la red virtual en subredes.</span><span class="sxs-lookup"><span data-stu-id="0eac4-192">This architecture subdivides the virtual network address space into subnets.</span></span> <span data-ttu-id="0eac4-193">Cada subred se puede asociar con un grupo de seguridad de red que define las directivas de acceso para la subred.</span><span class="sxs-lookup"><span data-stu-id="0eac4-193">Each subnet can be associated with a NSG that defines the access policies for the subnet.</span></span> <span data-ttu-id="0eac4-194">Coloque los servidores de aplicaciones en una subred independiente para poder protegerlos más fácilmente mediante la administración de las directivas de seguridad de la subred, no de los servidores individuales.</span><span class="sxs-lookup"><span data-stu-id="0eac4-194">Place application servers on a separate subnet so you can secure them more easily by managing the subnet security policies, not the individual servers.</span></span>

<span data-ttu-id="0eac4-195">Cuando un grupo de seguridad de red se asocia a una subred, se aplica a todos los servidores de esta.</span><span class="sxs-lookup"><span data-stu-id="0eac4-195">When a NSG is associated with a subnet, it then applies to all the servers within the subnet.</span></span> <span data-ttu-id="0eac4-196">Para más información acerca del uso de los grupos de seguridad de red para tener un control específico sobre los servidores de una subred, consulte [Filtro del tráfico de red con grupos de seguridad de red](https://azure.microsoft.com/blog/multiple-vm-nics-and-network-virtual-appliances-in-azure/).</span><span class="sxs-lookup"><span data-stu-id="0eac4-196">For more information about using NSGs for fine-grained control over the servers in a subnet, see [Filter network traffic with network security groups](https://azure.microsoft.com/blog/multiple-vm-nics-and-network-virtual-appliances-in-azure/).</span></span>

<span data-ttu-id="0eac4-197">Consulte también, [Planeamiento y diseño de VPN Gateway](/azure/vpn-gateway/vpn-gateway-plan-design).</span><span class="sxs-lookup"><span data-stu-id="0eac4-197">See also [Planning and design for VPN Gateway](/azure/vpn-gateway/vpn-gateway-plan-design).</span></span>

### <a name="load-balancers"></a><span data-ttu-id="0eac4-198">Equilibradores de carga</span><span class="sxs-lookup"><span data-stu-id="0eac4-198">Load balancers</span></span>

<span data-ttu-id="0eac4-199">[SAP Web Dispatcher](https://help.sap.com/doc/saphelp_nw73ehp1/7.31.19/en-US/48/8fe37933114e6fe10000000a421937/frameset.htm) controla el equilibrio de carga del tráfico HTTP(S), incluido el de las aplicaciones de estilo Fiori, en un grupo de servidores de aplicaciones SAP.</span><span class="sxs-lookup"><span data-stu-id="0eac4-199">[SAP Web Dispatcher](https://help.sap.com/doc/saphelp_nw73ehp1/7.31.19/en-US/48/8fe37933114e6fe10000000a421937/frameset.htm) handles load balancing of HTTP(S) traffic including Fiori style applications to a pool of SAP application servers.</span></span>

<span data-ttu-id="0eac4-200">Para el tráfico de clientes de la GUI de SAP que se conectan a un servidor SAP a través del protocolo DIAG o de instancias de Remote Function Call (RFC), el servidor de mensajes de Central Services equilibra la carga a través de los [grupos de inicio de sesión](https://wiki.scn.sap.com/wiki/display/SI/ABAP+Logon+Group+based+Load+Balancing) del servidor de aplicaciones de SAP, por lo que se necesita un equilibrador de carga adicional.</span><span class="sxs-lookup"><span data-stu-id="0eac4-200">For traffic from SAP GUI clients connecting a SAP server via DIAG or Remote Function Calls (RFC), the Central Service message server balances the load through SAP application server [logon groups](https://wiki.scn.sap.com/wiki/display/SI/ABAP+Logon+Group+based+Load+Balancing), so no additional load balancer is needed.</span></span>

### <a name="azure-storage"></a><span data-ttu-id="0eac4-201">Azure Storage</span><span class="sxs-lookup"><span data-stu-id="0eac4-201">Azure Storage</span></span>

<span data-ttu-id="0eac4-202">Se recomienda utilizar Azure Premium Storage para las máquinas virtuales del servidor de bases de datos.</span><span class="sxs-lookup"><span data-stu-id="0eac4-202">We recommend using Azure Premium Storage for the database server virtual machines.</span></span> <span data-ttu-id="0eac4-203">Premium Storage proporciona latencias de lectura-escritura coherentes.</span><span class="sxs-lookup"><span data-stu-id="0eac4-203">Premium storage provides consistent read/write latency.</span></span> <span data-ttu-id="0eac4-204">Para más información sobre el uso de Premium Storage para todos los discos del sistema operativo y discos de datos, consulte [Contrato de nivel de servicio para Virtual Machines](https://azure.microsoft.com/support/legal/sla/virtual-machines/).</span><span class="sxs-lookup"><span data-stu-id="0eac4-204">For details about using Premium Storage for the operating system disks and data disks of a single-instance virtual machine, see [SLA for Virtual Machines](https://azure.microsoft.com/support/legal/sla/virtual-machines/).</span></span>

<span data-ttu-id="0eac4-205">Para todos los sistemas SAP de producción, es aconsejable usar [Azure Managed Disks](/azure/storage/storage-managed-disks-overview) Premium.</span><span class="sxs-lookup"><span data-stu-id="0eac4-205">For all production SAP systems, we recommend using Premium [Azure Managed Disks](/azure/storage/storage-managed-disks-overview).</span></span> <span data-ttu-id="0eac4-206">Se usan discos administrados para administrar los archivos de VHD en los discos, lo cual proporciona confiabillidad.</span><span class="sxs-lookup"><span data-stu-id="0eac4-206">Managed Disks are used to manage the VHD files for the disks, adding reliability.</span></span> <span data-ttu-id="0eac4-207">Estos también garantizan que los discos de las máquinas virtuales de un conjunto de disponibilidad están aislados, con el fin de evitar únicos puntos de error.</span><span class="sxs-lookup"><span data-stu-id="0eac4-207">They also ensure that the disks for virtual machines within an availability set are isolated to avoid single points of failure.</span></span>

<span data-ttu-id="0eac4-208">En el caso de los servidores de aplicaciones SAP, lo que incluye las máquinas virtuales de Central Services, puede usar Azure Standard Storage para reducir el costo, ya que la aplicación se ejecuta en la memoria y los discos solo se usan para el registro.</span><span class="sxs-lookup"><span data-stu-id="0eac4-208">For SAP application servers, including the Central Services virtual machines, you can use Azure Standard Storage to reduce cost, because application execution takes place in memory and uses disks for logging only.</span></span> <span data-ttu-id="0eac4-209">Sin embargo, en este momento, Standard Storage solo está certificado para el almacenamiento no administrado.</span><span class="sxs-lookup"><span data-stu-id="0eac4-209">However, at this time, Standard Storage is only certified for unmanaged storage.</span></span> <span data-ttu-id="0eac4-210">Puesto que los servidores de aplicaciones no hospeda ningún dato, también puede usar los discos de P4 y almacenamiento de Premium P6 más pequeños para ayudar a minimizar el costo.</span><span class="sxs-lookup"><span data-stu-id="0eac4-210">Since application servers do not host any data, you can also use the smaller P4 and P6 Premium Storage disks to help minimize cost.</span></span>

<span data-ttu-id="0eac4-211">En el almacén de datos de copia de seguridad, se recomienda utilizar el [nivel de almacenamiento de acceso esporádico y el almacenamiento de nivel de acceso de archivo de Azure](/azure/storage/storage-blob-storage-tiers).</span><span class="sxs-lookup"><span data-stu-id="0eac4-211">For the backup data store, we recommend using Azure [cool access tier storage and/or archive access tier storage](/azure/storage/storage-blob-storage-tiers).</span></span> <span data-ttu-id="0eac4-212">Estos niveles de almacenamiento son formas rentables de almacenamiento de datos de larga duración a los que se accede con poca frecuencia.</span><span class="sxs-lookup"><span data-stu-id="0eac4-212">These storage tiers are cost-effective ways to store long-lived data that is less frequently accessed.</span></span>

## <a name="performance-considerations"></a><span data-ttu-id="0eac4-213">Consideraciones sobre rendimiento</span><span class="sxs-lookup"><span data-stu-id="0eac4-213">Performance considerations</span></span>

<span data-ttu-id="0eac4-214">Los servidores de aplicaciones SAP establecen comunicaciones constantes con los servidores de bases de datos.</span><span class="sxs-lookup"><span data-stu-id="0eac4-214">SAP application servers carry on constant communications with the database servers.</span></span> <span data-ttu-id="0eac4-215">Para las máquinas virtuales de base de datos HANA, considere la posibilidad de habilitar el [acelerador de escritura](/azure/virtual-machines/linux/how-to-enable-write-accelerator) para mejorar la latencia de la escritura de registro.</span><span class="sxs-lookup"><span data-stu-id="0eac4-215">For the HANA database virtual machines, consider enabling [Write Accelerator](/azure/virtual-machines/linux/how-to-enable-write-accelerator) to improve log write latency.</span></span> <span data-ttu-id="0eac4-216">Para optimizar las comunicaciones entre servidores, utilice la [red acelerada](https://azure.microsoft.com/blog/linux-and-windows-networking-performance-enhancements-accelerated-networking/).</span><span class="sxs-lookup"><span data-stu-id="0eac4-216">To optimize inter-server communications, use the [Accelerated Network](https://azure.microsoft.com/blog/linux-and-windows-networking-performance-enhancements-accelerated-networking/).</span></span> <span data-ttu-id="0eac4-217">Tenga en cuenta que estos aceleradores solo están disponibles para determinadas series de máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="0eac4-217">Note that these accelerators are available only for certain VM series.</span></span>

<span data-ttu-id="0eac4-218">Para lograr un rendimiento del ancho de banda de disco y un IOPS altos, las prácticas habituales de [optimización del rendimiento](/azure/virtual-machines/linux/premium-storage-performance) del volumen de almacenamiento se aplican al diseño de Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="0eac4-218">To achieve high IOPS and disk bandwidth throughput, the common practices in storage volume [performance optimization](/azure/virtual-machines/linux/premium-storage-performance) apply to Azure storage layout.</span></span> <span data-ttu-id="0eac4-219">Por ejemplo, la combinación de varios discos para crear un volumen de disco con secciones mejora el rendimiento de E/S.</span><span class="sxs-lookup"><span data-stu-id="0eac4-219">For example, combining multiple disks together to create a striped disk volume improves IO performance.</span></span> <span data-ttu-id="0eac4-220">La habilitación de la caché de lectura en el contenido de almacenamiento que cambia con poca frecuencia mejora la velocidad de recuperación de datos.</span><span class="sxs-lookup"><span data-stu-id="0eac4-220">Enabling the read cache on storage content that changes infrequently enhances the speed of data retrieval.</span></span> <span data-ttu-id="0eac4-221">Para más información acerca de los requisitos de rendimiento, consulte [SAP note 1943937 - Hardware Configuration Check Tool](https://launchpad.support.sap.com/#/notes/1943937) (SAP nota 1943937: Herramienta de comprobación de la configuración del hardware). Se requiere una cuenta de SAP Service Marketplace para acceder.</span><span class="sxs-lookup"><span data-stu-id="0eac4-221">For details about performance requirements, see [SAP note 1943937 - Hardware Configuration Check Tool](https://launchpad.support.sap.com/#/notes/1943937) (SAP Service Marketplace account required for access).</span></span>

## <a name="scalability-considerations"></a><span data-ttu-id="0eac4-222">Consideraciones sobre escalabilidad</span><span class="sxs-lookup"><span data-stu-id="0eac4-222">Scalability considerations</span></span>

<span data-ttu-id="0eac4-223">En el nivel de aplicación de SAP, Azure ofrece una amplia variedad de tamaños de máquina virtual tanto para el escalado vertical como para el horizontal. Para ver una lista inclusiva, consulte [Nota de SAP 1928533](https://launchpad.support.sap.com/#/notes/1928533): SAP Applications on Azure: Supported Products and Azure VM types (Aplicaciones de SAP en Azure: productos y tipos de máquina virtual de Azure compatibles) (es necesaria una cuenta de SAP Service Marketplace para el acceso).</span><span class="sxs-lookup"><span data-stu-id="0eac4-223">At the SAP application layer, Azure offers a wide range of virtual machine sizes for scaling up and scaling out. For an inclusive list, see [SAP Note 1928533](https://launchpad.support.sap.com/#/notes/1928533) - SAP Applications on Azure: Supported Products and Azure VM types (SAP Service Marketplace account required for access).</span></span> <span data-ttu-id="0eac4-224">A medida que continuamos certificando más tipos de máquinas virtuales, puede escalar o reducir verticalmente con la misma implementación en la nube.</span><span class="sxs-lookup"><span data-stu-id="0eac4-224">As we continue to certify more virtual machines types, you can scale up or down with the same cloud deployment.</span></span>

<span data-ttu-id="0eac4-225">En la capa de base de datos, esta arquitectura ejecuta HANA en máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="0eac4-225">At the database layer, this architecture runs HANA on VMs.</span></span> <span data-ttu-id="0eac4-226">Si la carga de trabajo supera el tamaño máximo de las máquinas virtuales, Microsoft también ofrece [Azure Large Instances](/azure/virtual-machines/workloads/sap/hana-overview-architecture) para SAP HANA.</span><span class="sxs-lookup"><span data-stu-id="0eac4-226">If your workload exceeds the maximum VM size, Microsoft also offers [Azure Large Instances](/azure/virtual-machines/workloads/sap/hana-overview-architecture) for SAP HANA.</span></span> <span data-ttu-id="0eac4-227">Estos servidores físicos se ubican en un centro de datos certificado de Microsoft Azure y, en el momento en que se redactó este documento, proporcionaban hasta 20 TB de capacidad de memoria para una sola instancia.</span><span class="sxs-lookup"><span data-stu-id="0eac4-227">These physical servers are co-located in a Microsoft Azure certified datacenter and as of this writing, provide up to 20 TB of memory capacity for a single instance.</span></span> <span data-ttu-id="0eac4-228">La configuración con varios nodos también es posible con una capacidad de memoria total de hasta 60 TB.</span><span class="sxs-lookup"><span data-stu-id="0eac4-228">Multi-node configuration is also possible with a total memory capacity of up to 60 TB.</span></span>

## <a name="availability-considerations"></a><span data-ttu-id="0eac4-229">Consideraciones sobre disponibilidad</span><span class="sxs-lookup"><span data-stu-id="0eac4-229">Availability considerations</span></span>

<span data-ttu-id="0eac4-230">La redundancia de recursos es el tema general en las soluciones de infraestructura de alta disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="0eac4-230">Resource redundancy is the general theme in highly available infrastructure solutions.</span></span> <span data-ttu-id="0eac4-231">Para las empresas que tienen un Acuerdo de Nivel de Servicio menos estrictos, las máquinas virtuales de Azure de instancia única ofrecen un SLA de tiempo de actividad.</span><span class="sxs-lookup"><span data-stu-id="0eac4-231">For enterprises that have a less stringent SLA, single-instance Azure VMs offer an uptime SLA.</span></span> <span data-ttu-id="0eac4-232">Para más información, consulte [Contratos de nivel de servicio](https://azure.microsoft.com/support/legal/sla/).</span><span class="sxs-lookup"><span data-stu-id="0eac4-232">For more information, see [Azure Service Level Agreement](https://azure.microsoft.com/support/legal/sla/).</span></span>

<span data-ttu-id="0eac4-233">En esta instalación distribuida de la aplicación SAP, la instalación base se replica para lograr una alta disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="0eac4-233">In this distributed installation of the SAP application, the base installation is replicated to achieve high availability.</span></span> <span data-ttu-id="0eac4-234">Para cada capa de la arquitectura, el diseño de la alta disponibilidad varía.</span><span class="sxs-lookup"><span data-stu-id="0eac4-234">For each layer of the architecture, the high availability design varies.</span></span>

### <a name="application-tier"></a><span data-ttu-id="0eac4-235">Capa de aplicación</span><span class="sxs-lookup"><span data-stu-id="0eac4-235">Application tier</span></span>

- <span data-ttu-id="0eac4-236">Web Dispatcher.</span><span class="sxs-lookup"><span data-stu-id="0eac4-236">Web Dispatcher.</span></span> <span data-ttu-id="0eac4-237">La alta disponibilidad se logra mediante instancias redundantes de Web Dispatcher.</span><span class="sxs-lookup"><span data-stu-id="0eac4-237">High availability is achieved with redundant Web Dispatcher instances.</span></span> <span data-ttu-id="0eac4-238">Consulte [SAP Web Dispatcher](https://help.sap.com/doc/saphelp_nw70ehp2/7.02.16/en-us/48/8fe37933114e6fe10000000a421937/frameset.htm) en la documentación de SAP.</span><span class="sxs-lookup"><span data-stu-id="0eac4-238">See [SAP Web Dispatcher](https://help.sap.com/doc/saphelp_nw70ehp2/7.02.16/en-us/48/8fe37933114e6fe10000000a421937/frameset.htm) in the SAP documentation.</span></span>
- <span data-ttu-id="0eac4-239">Servidores Fiori.</span><span class="sxs-lookup"><span data-stu-id="0eac4-239">Fiori servers.</span></span> <span data-ttu-id="0eac4-240">La alta disponibilidad se logra mediante el equilibrio de la carga de tráfico dentro de un grupo de servidores.</span><span class="sxs-lookup"><span data-stu-id="0eac4-240">High availability is achieved by load balancing traffic within a pool of servers.</span></span>
- <span data-ttu-id="0eac4-241">Central Services.</span><span class="sxs-lookup"><span data-stu-id="0eac4-241">Central Services.</span></span> <span data-ttu-id="0eac4-242">Para lograr la alta disponibilidad de Central Services en máquinas virtuales Linux de Azure, se utiliza la extensión de alta disponibilidad adecuada para la distribución de Linux seleccionada y el clúster NFS de alta disponibilidad hospeda el almacenamiento DRBD.</span><span class="sxs-lookup"><span data-stu-id="0eac4-242">For high availability of Central Services on Azure Linux virtual machines, the appropriate High Availability Extension for the selected Linux distribution is used, and the highly available NFS cluster hosts DRBD storage.</span></span>
- <span data-ttu-id="0eac4-243">Servidores de aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="0eac4-243">Application servers.</span></span> <span data-ttu-id="0eac4-244">La alta disponibilidad se logra mediante el equilibrio de la carga de tráfico dentro de un grupo de servidores de aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="0eac4-244">High availability is achieved by load balancing traffic within a pool of application servers.</span></span>

### <a name="database-tier"></a><span data-ttu-id="0eac4-245">Nivel de base de datos</span><span class="sxs-lookup"><span data-stu-id="0eac4-245">Database tier</span></span>

<span data-ttu-id="0eac4-246">Esta arquitectura de referencia muestra un sistema de base de datos de SAP HANA de alta disponibilidad que consiste en dos máquinas virtuales de Azure.</span><span class="sxs-lookup"><span data-stu-id="0eac4-246">This reference architecture depicts a highly available SAP HANA database system consisting of two Azure virtual machines.</span></span> <span data-ttu-id="0eac4-247">La característica de replicación del sistema nativa del nivel de base de datos proporciona conmutación automática por error manual o automática entre los nodos replicados:</span><span class="sxs-lookup"><span data-stu-id="0eac4-247">The database tier's native system replication feature provides either manual or automatic failover between replicated nodes:</span></span>

- <span data-ttu-id="0eac4-248">Para la conmutación por error manual, implemente más de una instancia de HANA y utilice la replicación del sistema de HANA (HSR).</span><span class="sxs-lookup"><span data-stu-id="0eac4-248">For manual failover, deploy more than one HANA instance and use HANA System Replication (HSR).</span></span>
- <span data-ttu-id="0eac4-249">Para la conmutación automática por error, use HSR y la extensión de alta disponibilidad (HAE) de Linux adecuada para su distribución de Linux.</span><span class="sxs-lookup"><span data-stu-id="0eac4-249">For automatic failover, use both HSR and Linux High Availability Extension (HAE) for your Linux distribution.</span></span> <span data-ttu-id="0eac4-250">Linux HAE proporciona los servicios de clúster a los recursos de HANA, detecta eventos de error y orquesta la conmutación por error de los servicios errantes en el nodo en buen estado.</span><span class="sxs-lookup"><span data-stu-id="0eac4-250">Linux HAE provides the cluster services to the HANA resources, detecting failure events and orchestrating the failover of errant services to the healthy node.</span></span>

<span data-ttu-id="0eac4-251">Consulte [Configuraciones y certificaciones de SAP que se ejecutan en Microsoft Azure](/azure/virtual-machines/workloads/sap/sap-certifications).</span><span class="sxs-lookup"><span data-stu-id="0eac4-251">See [SAP certifications and configurations running on Microsoft Azure](/azure/virtual-machines/workloads/sap/sap-certifications).</span></span>

### <a name="disaster-recovery-considerations"></a><span data-ttu-id="0eac4-252">Consideraciones acerca de la recuperación ante desastres</span><span class="sxs-lookup"><span data-stu-id="0eac4-252">Disaster recovery considerations</span></span>

<span data-ttu-id="0eac4-253">Cada nivel utiliza una estrategia diferente para proporcionar protección mediante la recuperación ante desastres (DR).</span><span class="sxs-lookup"><span data-stu-id="0eac4-253">Each tier uses a different strategy to provide disaster recovery (DR) protection.</span></span>

- <span data-ttu-id="0eac4-254">**Nivel de servidores de aplicaciones**.</span><span class="sxs-lookup"><span data-stu-id="0eac4-254">**Application servers tier**.</span></span> <span data-ttu-id="0eac4-255">Los servidores de aplicaciones de SAP no contienen datos empresariales.</span><span class="sxs-lookup"><span data-stu-id="0eac4-255">SAP application servers do not contain business data.</span></span> <span data-ttu-id="0eac4-256">En Azure, una estrategia de recuperación ante desastres simple es crear servidores de aplicaciones SAP en la región secundaria y apagarlos.</span><span class="sxs-lookup"><span data-stu-id="0eac4-256">On Azure, a simple DR strategy is to create SAP application servers in the secondary region, then shut them down.</span></span> <span data-ttu-id="0eac4-257">Tras cualquier cambio de configuración o actualización del kernel en el servidor de aplicaciones principal, los mismos cambios se deben aplicar a las máquinas virtuales de la región secundaria.</span><span class="sxs-lookup"><span data-stu-id="0eac4-257">Upon any configuration changes or kernel updates on the primary application server, the same changes must be applied to the virtual machines in the secondary region.</span></span> <span data-ttu-id="0eac4-258">Por ejemplo, copie los archivos ejecutables del kernel de SAP en las máquinas virtuales de recuperación ante desastres.</span><span class="sxs-lookup"><span data-stu-id="0eac4-258">For example, copy the SAP kernel executables to the DR virtual machines.</span></span> <span data-ttu-id="0eac4-259">Para la replicación automática de los servidores de aplicaciones en una región secundaria, [Azure Site Recovery](/azure/site-recovery/site-recovery-overview) es la solución recomendada.</span><span class="sxs-lookup"><span data-stu-id="0eac4-259">For automatic replication of application servers to a secondary region, [Azure Site Recovery](/azure/site-recovery/site-recovery-overview) is the recommended solution.</span></span> <span data-ttu-id="0eac4-260">Al redactar este documento, ASR aún no admite la replicación de la configuración de la red acelerada en máquinas virtuales de Azure.</span><span class="sxs-lookup"><span data-stu-id="0eac4-260">As of the writing of this paper, ASR doesn't yet support the replication of the Accelerated Network configuration setting in Azure VMs.</span></span>

- <span data-ttu-id="0eac4-261">**Central Services**.</span><span class="sxs-lookup"><span data-stu-id="0eac4-261">**Central Services**.</span></span> <span data-ttu-id="0eac4-262">Este componente de la pila de aplicaciones SAP tampoco conserva los datos empresariales.</span><span class="sxs-lookup"><span data-stu-id="0eac4-262">This component of the SAP application stack also does not persist business data.</span></span> <span data-ttu-id="0eac4-263">Puede crear una máquina virtual en la región secundaria para ejecutar el rol de Central Services.</span><span class="sxs-lookup"><span data-stu-id="0eac4-263">You can build a VM in the secondary region to run the Central Services role.</span></span> <span data-ttu-id="0eac4-264">El único contenido del nodo de Central Services principal que se sincroniza es el del recurso compartido /sapmnt.</span><span class="sxs-lookup"><span data-stu-id="0eac4-264">The only content from the primary Central Services node to synchronize is the /sapmnt share content.</span></span> <span data-ttu-id="0eac4-265">Además, si los cambios de configuración o las actualizaciones del kernel tienen lugar en los servidores principales de Central Services, se deben repetir en la máquina virtual de la región secundaria que ejecuta Central Services.</span><span class="sxs-lookup"><span data-stu-id="0eac4-265">Also, if configuration changes or kernel updates take place on the primary Central Services servers, they must be repeated on the VM in the secondary region running Central Services.</span></span> <span data-ttu-id="0eac4-266">Para sincronizar los dos servidores, puede usar Azure Site Recovery para replicar los nodos del clúster o simplemente usar un trabajo de copia programado regularmente para copiar /sapmnt en el lado de la recuperación ante desastres.</span><span class="sxs-lookup"><span data-stu-id="0eac4-266">To synchronize the two servers, you can use either Azure Site Recovery, to replicate the cluster nodes, or simply use a regularly scheduled copy job to copy /sapmnt to the DR side.</span></span> <span data-ttu-id="0eac4-267">Para más información acerca de la creación, copia y el proceso de conmutación por error de prueba, descargue [SAP NetWeaver: Building a Hyper-V and Microsoft Azure–based Disaster Recovery Solution](https://download.microsoft.com/download/9/5/6/956FEDC3-702D-4EFB-A7D3-2DB7505566B6/SAP%20NetWeaver%20-%20Building%20an%20Azure%20based%20Disaster%20Recovery%20Solution%20V1_5%20.docx) (SAP NetWeaver: creación de una solución de recuperación ante desastres basada en Hyper-V y Microsoft Azure) y consulte la sección 4.3, "Capa de SPOF de SAP (ASCS)".</span><span class="sxs-lookup"><span data-stu-id="0eac4-267">For details about the build, copy, and test failover process, download [SAP NetWeaver: Building a Hyper-V and Microsoft Azure–based Disaster Recovery Solution](https://download.microsoft.com/download/9/5/6/956FEDC3-702D-4EFB-A7D3-2DB7505566B6/SAP%20NetWeaver%20-%20Building%20an%20Azure%20based%20Disaster%20Recovery%20Solution%20V1_5%20.docx), and refer to section 4.3, "SAP SPOF layer (ASCS)."</span></span> <span data-ttu-id="0eac4-268">Este documento se aplica a la instancia de NetWeaver que se ejecuta en Windows, pero puede crear una configuración equivalente para Linux.</span><span class="sxs-lookup"><span data-stu-id="0eac4-268">This paper applies to NetWeaver running on Windows, but you can create the equivalent configuration for Linux.</span></span> <span data-ttu-id="0eac4-269">Para Central Services, use [Azure Site Recovery](/en-us/azure/site-recovery/site-recovery-overview) para replicar los nodos y el almacenamiento de clúster.</span><span class="sxs-lookup"><span data-stu-id="0eac4-269">For Central Services, use [Azure Site Recovery](/en-us/azure/site-recovery/site-recovery-overview) to replicate the cluster nodes and storage.</span></span> <span data-ttu-id="0eac4-270">Para Linux, cree un clúster de replicación geográfica de tres nodos mediante una extensión de alta disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="0eac4-270">For Linux, create a three node geo-cluster using a High Availability Extension.</span></span>

- <span data-ttu-id="0eac4-271">**Nivel de base de datos de SAP**.</span><span class="sxs-lookup"><span data-stu-id="0eac4-271">**SAP database tier**.</span></span> <span data-ttu-id="0eac4-272">Usar HSR para la replicación compatible con HANA.</span><span class="sxs-lookup"><span data-stu-id="0eac4-272">Use HSR for HANA-supported replication.</span></span> <span data-ttu-id="0eac4-273">Además de una configuración local de dos nodos de alta disponibilidad, HSR admite la replicación multinivel, en la que un tercer nodo de una región de Azure independiente que actúa como una entidad externa, que no forma parte del clúster, se registra en la réplica secundaria del par HSR con clústeres como su destino de replicación.</span><span class="sxs-lookup"><span data-stu-id="0eac4-273">In addition to a local, two-node high availability setup, HSR supports multi-tier replication where a third node in a separate Azure region acts as a foreign entity, not part of the cluster, and registers to the secondary replica of the clustered HSR pair as its replication target.</span></span> <span data-ttu-id="0eac4-274">De este modo se forma una cadena de margarita de replicación.</span><span class="sxs-lookup"><span data-stu-id="0eac4-274">This form a replication daisy chain.</span></span> <span data-ttu-id="0eac4-275">La conmutación por error en el nodo de recuperación ante desastres es un proceso manual.</span><span class="sxs-lookup"><span data-stu-id="0eac4-275">The failover to the DR node is a manual process.</span></span>

<span data-ttu-id="0eac4-276">Para usar Azure Site Recovery para generar automáticamente un sitio de producción totalmente replicado del original, debe ejecutar [scripts de implementación](/azure/site-recovery/site-recovery-runbook-automation) personalizados.</span><span class="sxs-lookup"><span data-stu-id="0eac4-276">To use Azure Site Recovery to automatically build a fully replicated production site of your original, you must run customized [deployment scripts](/azure/site-recovery/site-recovery-runbook-automation).</span></span> <span data-ttu-id="0eac4-277">Site Recovery implementa en primer lugar las máquinas virtuales en conjuntos de disponibilidad y, después, ejecuta scripts para agregar recursos como los equilibradores de carga.</span><span class="sxs-lookup"><span data-stu-id="0eac4-277">Site Recovery first deploys the virtual machines in availability sets, then runs scripts to add resources such as load balancers.</span></span>

## <a name="manageability-considerations"></a><span data-ttu-id="0eac4-278">Consideraciones sobre la manejabilidad</span><span class="sxs-lookup"><span data-stu-id="0eac4-278">Manageability considerations</span></span>

<span data-ttu-id="0eac4-279">SAP HANA tiene una característica de copia de seguridad que usa la infraestructura subyacente de Azure.</span><span class="sxs-lookup"><span data-stu-id="0eac4-279">SAP HANA has a backup feature that makes use of the underlying Azure infrastructure.</span></span> <span data-ttu-id="0eac4-280">Para hacer una copia de seguridad de la base de datos de SAP HANA que se ejecuta en las máquinas virtuales de Azure, tanto la instantánea de SAP HANA como la de Azure Storage se usan para asegurar la coherencia de los archivos de copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="0eac4-280">To back up the SAP HANA database running on Azure virtual machines, both the SAP HANA snapshot and Azure storage snapshot are used to ensure the backup files' consistency.</span></span> <span data-ttu-id="0eac4-281">Para más información, consulte [Guía de copia de seguridad de SAP HANA en Azure Virtual Machines](/azure/virtual-machines/workloads/sap/sap-hana-backup-guide) y [Preguntas sobre el servicio Azure Backup](/azure/backup/backup-azure-backup-faq).</span><span class="sxs-lookup"><span data-stu-id="0eac4-281">For details, see [Backup guide for SAP HANA on Azure Virtual Machines](/azure/virtual-machines/workloads/sap/sap-hana-backup-guide) and the [Azure Backup service FAQ](/azure/backup/backup-azure-backup-faq).</span></span> <span data-ttu-id="0eac4-282">Solo las implementaciones de contenedor único de HANA admiten instantáneas de Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="0eac4-282">Only HANA single container deployments support Azure storage snapshot.</span></span>

### <a name="identity-management"></a><span data-ttu-id="0eac4-283">Administración de identidades</span><span class="sxs-lookup"><span data-stu-id="0eac4-283">Identity management</span></span>

<span data-ttu-id="0eac4-284">Controle el acceso a los recursos mediante el uso de un sistema de administración de identidades centralizado en todos los niveles:</span><span class="sxs-lookup"><span data-stu-id="0eac4-284">Control access to resources by using a centralized identity management system at all levels:</span></span>

- <span data-ttu-id="0eac4-285">Proporcione acceso a los recursos de Azure mediante el [control de acceso basado en rol](/azure/active-directory/role-based-access-control-what-is) (RBAC).</span><span class="sxs-lookup"><span data-stu-id="0eac4-285">Provide access to Azure resources through [role-based access control](/azure/active-directory/role-based-access-control-what-is) (RBAC).</span></span>
- <span data-ttu-id="0eac4-286">Conceda acceso a las máquinas virtuales de Azure a través de LDAP, Azure Active Directory, Kerberos u otro sistema.</span><span class="sxs-lookup"><span data-stu-id="0eac4-286">Grant access to Azure VMs through LDAP, Azure Active Directory, Kerberos, or another system.</span></span>
- <span data-ttu-id="0eac4-287">Ofrezca acceso a las propias aplicaciones mediante los servicios que proporciona SAP o use [OAuth 2.0 y Azure Active Directory](/azure/active-directory/develop/active-directory-protocols-oauth-code).</span><span class="sxs-lookup"><span data-stu-id="0eac4-287">Support access within the apps themselves through the services that SAP provides, or use [OAuth 2.0 and Azure Active Directory](/azure/active-directory/develop/active-directory-protocols-oauth-code).</span></span>

### <a name="monitoring"></a><span data-ttu-id="0eac4-288">Supervisión</span><span class="sxs-lookup"><span data-stu-id="0eac4-288">Monitoring</span></span>

<span data-ttu-id="0eac4-289">Azure proporciona varias funciones para la [supervisión y el diagnóstico](/azure/architecture/best-practices/monitoring) de la infraestructura global.</span><span class="sxs-lookup"><span data-stu-id="0eac4-289">Azure provides several functions for [monitoring and diagnostics](/azure/architecture/best-practices/monitoring) of the overall infrastructure.</span></span> <span data-ttu-id="0eac4-290">Además, la supervisión mejorada de las máquinas virtuales de Azure (Linux o Windows) la controla Azure Operations Management Suite (OMS).</span><span class="sxs-lookup"><span data-stu-id="0eac4-290">Also, enhanced monitoring of Azure virtual machines (Linux or Windows) is handled by Azure Operations Management Suite (OMS).</span></span>

<span data-ttu-id="0eac4-291">Para proporcionar supervisión basada en SAP de los recursos y del rendimiento de los servicios de la infraestructura de SAP, se usa la extensión [Azure SAP Enhanced Monitoring](/azure/virtual-machines/workloads/sap/deployment-guide#d98edcd3-f2a1-49f7-b26a-07448ceb60ca).</span><span class="sxs-lookup"><span data-stu-id="0eac4-291">To provide SAP-based monitoring of resources and service performance of the SAP infrastructure, the [Azure SAP Enhanced Monitoring](/azure/virtual-machines/workloads/sap/deployment-guide#d98edcd3-f2a1-49f7-b26a-07448ceb60ca) extension is used.</span></span> <span data-ttu-id="0eac4-292">Esta extensión introduce las estadísticas de supervisión de Azure en la aplicación de SAP para la supervisión de sistema operativo y las funciones de DBA Cockpit.</span><span class="sxs-lookup"><span data-stu-id="0eac4-292">This extension feeds Azure monitoring statistics into the SAP application for operating system monitoring and DBA Cockpit functions.</span></span> <span data-ttu-id="0eac4-293">La supervisión mejorada de SAP es un requisito obligatorio para ejecutar SAP en Azure.</span><span class="sxs-lookup"><span data-stu-id="0eac4-293">SAP enhanced monitoring is a mandatory prerequisite to run SAP on Azure.</span></span> <span data-ttu-id="0eac4-294">Para más información, consulte [Nota de SAP 2191498](https://launchpad.support.sap.com/#/notes/2191498) "SAP on Linux with Azure: Enhanced Monitoring" (SAP en Linux con Azure: supervisión mejorada).</span><span class="sxs-lookup"><span data-stu-id="0eac4-294">For details, see [SAP Note 2191498](https://launchpad.support.sap.com/#/notes/2191498) – "SAP on Linux with Azure: Enhanced Monitoring."</span></span>

## <a name="security-considerations"></a><span data-ttu-id="0eac4-295">Consideraciones sobre la seguridad</span><span class="sxs-lookup"><span data-stu-id="0eac4-295">Security considerations</span></span>

<span data-ttu-id="0eac4-296">SAP tiene su propio motor de administración de usuarios (UME) para controlar el acceso basado en rol y la autorización en la aplicación de SAP.</span><span class="sxs-lookup"><span data-stu-id="0eac4-296">SAP has its own Users Management Engine (UME) to control role-based access and authorization within the SAP application.</span></span> <span data-ttu-id="0eac4-297">Para más información, consulte [SAP HANA Security—An Overview](https://archive.sap.com/documents/docs/DOC-62943) (Seguridad de SAP HANA). Se requiere una cuenta de SAP Service Marketplace para acceder.</span><span class="sxs-lookup"><span data-stu-id="0eac4-297">For details, see [SAP HANA Security—An Overview](https://archive.sap.com/documents/docs/DOC-62943) (SAP Service Marketplace account required for access.)</span></span>

<span data-ttu-id="0eac4-298">Para aumentar la seguridad de la red, considere la posibilidad de implementar un [red perimetral](/azure/architecture/reference-architectures/dmz/secure-vnet-hybrid), que utiliza una aplicación virtual de red para crear un firewall delante de la subred para Web Dispatcher y para los grupos de servidores front-end de Fiori.</span><span class="sxs-lookup"><span data-stu-id="0eac4-298">For additional network security, consider implementing a [Network DMZ](/azure/architecture/reference-architectures/dmz/secure-vnet-hybrid), which uses a network virtual appliance to create a firewall in front of the subnet for Web Dispatcher and Fiori Front-End Server pools.</span></span>

<span data-ttu-id="0eac4-299">Para la seguridad de la infraestructura, los datos se cifran tanto en tránsito como en reposo.</span><span class="sxs-lookup"><span data-stu-id="0eac4-299">For infrastructure security, data is encrypted in transit and at rest.</span></span> <span data-ttu-id="0eac4-300">La sección "Security considerations" (Consideraciones de seguridad) de [SAP NetWeaver on Azure Virtual Machines – Planning and Implementation Guide](/azure/virtual-machines/workloads/sap/planning-guide) empieza a afrontar la seguridad de la red y se aplica a S/4HANA.</span><span class="sxs-lookup"><span data-stu-id="0eac4-300">The "Security considerations" section of the [SAP NetWeaver on Azure Virtual Machines–Planning and Implementation Guide](/azure/virtual-machines/workloads/sap/planning-guide) begins to address network security and applies to S/4HANA.</span></span> <span data-ttu-id="0eac4-301">La guía también especifica los puertos de red que se deben abrir en los firewalls para permitir la comunicación de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="0eac4-301">The guide also specifies the network ports you must open on the firewalls to allow application communication.</span></span>

<span data-ttu-id="0eac4-302">Para cifrar discos de una máquina virtual IaaS Linux, puede usar [Azure Disk Encryption](/azure/security/azure-security-disk-encryption).</span><span class="sxs-lookup"><span data-stu-id="0eac4-302">To encrypt Linux IaaS virtual machine disks, you can use [Azure Disk Encryption](/azure/security/azure-security-disk-encryption).</span></span> <span data-ttu-id="0eac4-303">Utiliza la característica DM-Crypt de Linux para proporcionar el cifrado del volumen de los discos de datos y del sistema operativo.</span><span class="sxs-lookup"><span data-stu-id="0eac4-303">It uses the DM-Crypt feature of Linux to provide volume encryption for the operating system and the data disks.</span></span> <span data-ttu-id="0eac4-304">La solución también funciona con Azure Key Vault para ayudarle a controlar y administrar las claves y los secretos del cifrado de discos en la suscripción de Key Vault.</span><span class="sxs-lookup"><span data-stu-id="0eac4-304">The solution also works with Azure Key Vault to help you control and manage the disk-encryption keys and secrets in your key vault subscription.</span></span> <span data-ttu-id="0eac4-305">Los datos de los discos de máquinas virtuales se cifran en reposo en Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="0eac4-305">Data on the virtual machine disks are encrypted at rest in your Azure storage.</span></span>

<span data-ttu-id="0eac4-306">Para el cifrado de datos en reposo de SAP HANA, se recomienda utilizar la tecnología de cifrado nativa de SAP HANA.</span><span class="sxs-lookup"><span data-stu-id="0eac4-306">For SAP HANA data-at-rest encryption, we recommend using the SAP HANA native encryption technology.</span></span>

> [!NOTE]
> <span data-ttu-id="0eac4-307">No utilice el cifrado de datos en reposo de HANA con Azure Disk Encryption en el mismo servidor.</span><span class="sxs-lookup"><span data-stu-id="0eac4-307">Do not use the HANA data-at-rest encryption with Azure Disk Encryption on the same server.</span></span> <span data-ttu-id="0eac4-308">Para HANA, use solo el cifrado de datos de HANA.</span><span class="sxs-lookup"><span data-stu-id="0eac4-308">For HANA, use only HANA data encryption.</span></span>

## <a name="communities"></a><span data-ttu-id="0eac4-309">Comunidades</span><span class="sxs-lookup"><span data-stu-id="0eac4-309">Communities</span></span>

<span data-ttu-id="0eac4-310">Las comunidades pueden responder preguntas y ayudarle a configurar una implementación correcta.</span><span class="sxs-lookup"><span data-stu-id="0eac4-310">Communities can answer questions and help you set up a successful deployment.</span></span> <span data-ttu-id="0eac4-311">Tenga en cuenta lo siguiente.</span><span class="sxs-lookup"><span data-stu-id="0eac4-311">Consider the following:</span></span>

- [<span data-ttu-id="0eac4-312">Blog Ejecución de aplicaciones SAP en la plataforma de Microsoft</span><span class="sxs-lookup"><span data-stu-id="0eac4-312">Running SAP Applications on the Microsoft Platform Blog</span></span>](https://blogs.msdn.microsoft.com/saponsqlserver/2017/05/04/sap-on-azure-general-update-for-customers-partners-april-2017/)
- [<span data-ttu-id="0eac4-313">Soporte técnico de la comunidad de Azure</span><span class="sxs-lookup"><span data-stu-id="0eac4-313">Azure Community Support</span></span>](https://azure.microsoft.com/support/community/)
- [<span data-ttu-id="0eac4-314">SAP Community</span><span class="sxs-lookup"><span data-stu-id="0eac4-314">SAP Community</span></span>](https://www.sap.com/community.html)
- [<span data-ttu-id="0eac4-315">Stack Overflow</span><span class="sxs-lookup"><span data-stu-id="0eac4-315">Stack Overflow</span></span>](https://stackoverflow.com/tags/sap/)

## <a name="related-resources"></a><span data-ttu-id="0eac4-316">Recursos relacionados</span><span class="sxs-lookup"><span data-stu-id="0eac4-316">Related resources</span></span>

<span data-ttu-id="0eac4-317">Puede examinar los siguientes [escenarios de ejemplo de Azure](/azure/architecture/example-scenario) que muestran soluciones específicas que usan algunas tecnologías similares:</span><span class="sxs-lookup"><span data-stu-id="0eac4-317">You may wish to review the following [Azure example scenarios](/azure/architecture/example-scenario) that demonstrate specific solutions using some of the same technologies:</span></span>

- [<span data-ttu-id="0eac4-318">Ejecución de cargas de trabajo SAP de producción mediante una instancia de Oracle Database en Azure</span><span class="sxs-lookup"><span data-stu-id="0eac4-318">Running SAP production workloads using an Oracle Database on Azure</span></span>](/azure/architecture/example-scenario/apps/sap-production)
- [<span data-ttu-id="0eac4-319">Entornos de desarrollo y pruebas para cargas de trabajo SAP en Azure</span><span class="sxs-lookup"><span data-stu-id="0eac4-319">Dev/test environments for SAP workloads on Azure</span></span>](/azure/architecture/example-scenario/apps/sap-dev-test)

<!-- links -->

[visio-download]: https://archcenter.blob.core.windows.net/cdn/sap-reference-architectures.vsdx
