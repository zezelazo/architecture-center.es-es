---
title: "Lista de comprobación de resistencia"
description: "Lista de comprobación que ofrece una guía para las preocupaciones de resistencia durante el diseño."
author: petertaylor9999
ms.date: 01/10/2018
ms.custom: resiliency, checklist
ms.openlocfilehash: 66ff802c1f7b35db147ffe4279982c827570c3c1
ms.sourcegitcommit: 3d6dba524cc7661740bdbaf43870de7728d60a01
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 01/11/2018
---
# <a name="resiliency-checklist"></a><span data-ttu-id="fea1a-103">Lista de comprobación de resistencia</span><span class="sxs-lookup"><span data-stu-id="fea1a-103">Resiliency checklist</span></span>

<span data-ttu-id="fea1a-104">La resistencia es la capacidad de un sistema para recuperarse de errores y seguir en funcionamiento y es uno de los [pilares de la calidad del software](../guide/pillars.md).</span><span class="sxs-lookup"><span data-stu-id="fea1a-104">Resiliency is the ability of a system to recover from failures and continue to function, and is one of the [pillars of software quality](../guide/pillars.md).</span></span> <span data-ttu-id="fea1a-105">Diseñar la aplicación para la resistencia requiere planear una variedad de modos de error que podrían ocurrir, y mitigarlos.</span><span class="sxs-lookup"><span data-stu-id="fea1a-105">Designing your application for resiliency requires planning for and mitigating a variety of failure modes that could occur.</span></span> <span data-ttu-id="fea1a-106">Use esta lista de comprobación para revisar la arquitectura de la aplicación desde un punto de vista de la resistencia.</span><span class="sxs-lookup"><span data-stu-id="fea1a-106">Use this checklist to review your application architecture from a resiliency standpoint.</span></span> 

## <a name="requirements"></a><span data-ttu-id="fea1a-107">Requisitos</span><span class="sxs-lookup"><span data-stu-id="fea1a-107">Requirements</span></span>

<span data-ttu-id="fea1a-108">**Defina los requisitos de disponibilidad del cliente.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-108">**Define your customer's availability requirements.**</span></span> <span data-ttu-id="fea1a-109">El cliente tendrá requisitos de disponibilidad para los componentes de la aplicación y esto afectará su diseño.</span><span class="sxs-lookup"><span data-stu-id="fea1a-109">Your customer will have availability requirements for the components in your application and this will affect your application's design.</span></span> <span data-ttu-id="fea1a-110">Acuerde con el cliente los objetivos de disponibilidad de cada parte de la aplicación; de lo contrario, es posible que el diseño no cumpla con las expectativas del cliente.</span><span class="sxs-lookup"><span data-stu-id="fea1a-110">Get agreement from your customer for the availability targets of each piece of your application, otherwise your design may not meet the customer's expectations.</span></span> <span data-ttu-id="fea1a-111">Para más información, consulte [Definición de los requisitos de resistencia](../resiliency/index.md#defining-your-resiliency-requirements).</span><span class="sxs-lookup"><span data-stu-id="fea1a-111">For more information, see [Defining your resiliency requirements](../resiliency/index.md#defining-your-resiliency-requirements).</span></span>

## <a name="application-design"></a><span data-ttu-id="fea1a-112">Diseño de aplicaciones</span><span class="sxs-lookup"><span data-stu-id="fea1a-112">Application Design</span></span>

<span data-ttu-id="fea1a-113">**Realice un análisis del modo de error para la aplicación.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-113">**Perform a failure mode analysis (FMA) for your application.**</span></span> <span data-ttu-id="fea1a-114">El análisis del modo de error es un proceso para crear resistencia en una aplicación al principio de la etapa de diseño.</span><span class="sxs-lookup"><span data-stu-id="fea1a-114">FMA is a process for building resiliency into an application early in the design stage.</span></span> <span data-ttu-id="fea1a-115">Para más información, consulte [Failure mode analysis][fma] (Análisis del modo de error).</span><span class="sxs-lookup"><span data-stu-id="fea1a-115">For more information, see [Failure mode analysis][fma].</span></span> <span data-ttu-id="fea1a-116">Los objetivos de un análisis del modo de error incluyen:</span><span class="sxs-lookup"><span data-stu-id="fea1a-116">The goals of an FMA include:</span></span>  

* <span data-ttu-id="fea1a-117">Identificar los tipos de errores que podría experimentar una aplicación.</span><span class="sxs-lookup"><span data-stu-id="fea1a-117">Identify what types of failures an application might experience.</span></span>
* <span data-ttu-id="fea1a-118">Capturar los posibles efectos y el impacto de cada tipo de error en la aplicación.</span><span class="sxs-lookup"><span data-stu-id="fea1a-118">Capture the potential effects and impact of each type of failure on the application.</span></span>
* <span data-ttu-id="fea1a-119">Identificar las estrategias de recuperación.</span><span class="sxs-lookup"><span data-stu-id="fea1a-119">Identify recovery strategies.</span></span>
  

<span data-ttu-id="fea1a-120">**Implemente varias instancias de servicios.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-120">**Deploy multiple instances of services.**</span></span> <span data-ttu-id="fea1a-121">Si la aplicación depende de una única instancia de un servicio, crea un único punto de error.</span><span class="sxs-lookup"><span data-stu-id="fea1a-121">If your application depends on a single instance of a service, it creates a single point of failure.</span></span> <span data-ttu-id="fea1a-122">El aprovisionamiento de varias instancias mejora tanto la resistencia como la escalabilidad.</span><span class="sxs-lookup"><span data-stu-id="fea1a-122">Provisioning multiple instances improves both resiliency and scalability.</span></span> <span data-ttu-id="fea1a-123">Para [Azure App Service](/azure/app-service/app-service-value-prop-what-is/), seleccione un [Plan de App Service](/azure/app-service/azure-web-sites-web-hosting-plans-in-depth-overview/) que ofrezca varias instancias.</span><span class="sxs-lookup"><span data-stu-id="fea1a-123">For [Azure App Service](/azure/app-service/app-service-value-prop-what-is/), select an [App Service Plan](/azure/app-service/azure-web-sites-web-hosting-plans-in-depth-overview/) that offers multiple instances.</span></span> <span data-ttu-id="fea1a-124">Para Azure Cloud Services, configure cada uno de los roles para utilizar [varias instancias](/azure/cloud-services/cloud-services-choose-me/#scaling-and-management).</span><span class="sxs-lookup"><span data-stu-id="fea1a-124">For Azure Cloud Services, configure each of your roles to use [multiple instances](/azure/cloud-services/cloud-services-choose-me/#scaling-and-management).</span></span> <span data-ttu-id="fea1a-125">Para [Azure Virtual Machines](/azure/virtual-machines/virtual-machines-windows-about/?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json), asegúrese de que la arquitectura de máquina virtual incluya más de una máquina virtual y que cada una de ellas se incluya en un [conjunto de disponibilidad][availability-sets].</span><span class="sxs-lookup"><span data-stu-id="fea1a-125">For [Azure Virtual Machines (VMs)](/azure/virtual-machines/virtual-machines-windows-about/?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json), ensure that your VM architecture includes more than one VM and that each VM is included in an [availability set][availability-sets].</span></span>   

<span data-ttu-id="fea1a-126">**Use el escalado automático para responder a los aumentos de carga.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-126">**Use autoscaling to respond to increases in load.**</span></span> <span data-ttu-id="fea1a-127">Si su aplicación no está configurada para escalar horizontalmente de manera automática a medida que aumenta la carga, es posible que se produzca un error en los servicios de la aplicación si se saturan con las solicitudes de los usuarios.</span><span class="sxs-lookup"><span data-stu-id="fea1a-127">If your application is not configured to scale out automatically as load increases, it's possible that your application's services will fail if they become saturated with user requests.</span></span> <span data-ttu-id="fea1a-128">Para más información, consulte lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="fea1a-128">For more details, see the following:</span></span>

* <span data-ttu-id="fea1a-129">General: [Lista de comprobación de escalabilidad](./scalability.md)</span><span class="sxs-lookup"><span data-stu-id="fea1a-129">General: [Scalability checklist](./scalability.md)</span></span>
* <span data-ttu-id="fea1a-130">Azure App Service: [Escalación del recuento de instancias de forma manual o automática][app-service-autoscale]</span><span class="sxs-lookup"><span data-stu-id="fea1a-130">Azure App Service: [Scale instance count manually or automatically][app-service-autoscale]</span></span>
* <span data-ttu-id="fea1a-131">Cloud Services: [Procedimiento para configurar el escalado automático para un servicio en la nube en el Portal][cloud-service-autoscale]</span><span class="sxs-lookup"><span data-stu-id="fea1a-131">Cloud Services: [How to auto scale a cloud service][cloud-service-autoscale]</span></span>
* <span data-ttu-id="fea1a-132">Virtual Machines: [Introducción a los registros de escalado automático con conjuntos de escalado de máquinas virtuales de Azure][vmss-autoscale]</span><span class="sxs-lookup"><span data-stu-id="fea1a-132">Virtual Machines: [Automatic scaling and virtual machine scale sets][vmss-autoscale]</span></span>

<span data-ttu-id="fea1a-133">**Use el equilibrio de carga para distribuir las solicitudes.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-133">**Use load balancing to distribute requests.**</span></span> <span data-ttu-id="fea1a-134">El equilibrio de carga distribuye las solicitudes de la aplicación a las instancias de servicio correctas mediante la eliminación de la rotación de las instancias no correctas.</span><span class="sxs-lookup"><span data-stu-id="fea1a-134">Load balancing distributes your application's requests to healthy service instances by removing unhealthy instances from rotation.</span></span> <span data-ttu-id="fea1a-135">Si el servicio utiliza Azure App Service o Azure Cloud Services, ya tiene la carga equilibrada.</span><span class="sxs-lookup"><span data-stu-id="fea1a-135">If your service uses Azure App Service or Azure Cloud Services, it is already load balanced for you.</span></span> <span data-ttu-id="fea1a-136">Sin embargo, si la aplicación usa Azure Virtual Machines, debe aprovisionar un equilibrador de carga.</span><span class="sxs-lookup"><span data-stu-id="fea1a-136">However, if your application uses Azure VMs, you will need to provision a load balancer.</span></span> <span data-ttu-id="fea1a-137">Para más información, consulte la introducción a [Azure Load Balancer](/azure/load-balancer/load-balancer-overview/).</span><span class="sxs-lookup"><span data-stu-id="fea1a-137">See the [Azure Load Balancer](/azure/load-balancer/load-balancer-overview/) overview for more details.</span></span>

<span data-ttu-id="fea1a-138">**Configure instancias de Azure Application Gateway para usar varias instancias.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-138">**Configure Azure Application Gateways to use multiple instances.**</span></span> <span data-ttu-id="fea1a-139">Dependiendo de los requisitos de la aplicación, una instancia de [Azure Application Gateway](/azure/application-gateway/application-gateway-introduction/) puede ser más adecuada para distribuir solicitudes a los servicios de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="fea1a-139">Depending on your application's requirements, an [Azure Application Gateway](/azure/application-gateway/application-gateway-introduction/) may be better suited to distributing requests to your application's services.</span></span> <span data-ttu-id="fea1a-140">Sin embargo, las instancias individuales del servicio Application Gateway no están garantizadas por un Acuerdo de Nivel de Servicio, por lo que es posible que la aplicación pueda producir un error si la instancia Application Gateway también produce un error.</span><span class="sxs-lookup"><span data-stu-id="fea1a-140">However, single instances of the Application Gateway service are not guaranteed by an SLA so it's possible that your application could fail if the Application Gateway instance fails.</span></span> <span data-ttu-id="fea1a-141">Proporcione más de una instancia de Application Gateway mediana o más grande para garantizar la disponibilidad del servicio bajo los términos del [Acuerdo de Nivel de Servicio](https://azure.microsoft.com/support/legal/sla/application-gateway/v1_0/).</span><span class="sxs-lookup"><span data-stu-id="fea1a-141">Provision more than one medium or larger Application Gateway instance to guarantee availability of the service under the terms of the [SLA](https://azure.microsoft.com/support/legal/sla/application-gateway/v1_0/).</span></span>

<span data-ttu-id="fea1a-142">**Use los conjuntos de disponibilidad para cada capa de aplicación.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-142">**Use Availability Sets for each application tier.**</span></span> <span data-ttu-id="fea1a-143">Al colocar las instancias en un [conjunto de disponibilidad][availability-sets], se proporciona un mayor [Acuerdo de Nivel de Servicio](https://azure.microsoft.com/support/legal/sla/virtual-machines/).</span><span class="sxs-lookup"><span data-stu-id="fea1a-143">Placing your instances in an [availability set][availability-sets] provides a higher [SLA](https://azure.microsoft.com/support/legal/sla/virtual-machines/).</span></span> 

<span data-ttu-id="fea1a-144">**Considere la posibilidad de implementar la aplicación en varias regiones.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-144">**Consider deploying your application across multiple regions.**</span></span> <span data-ttu-id="fea1a-145">Si su aplicación se implementa en una sola región, en el caso excepcional de que toda la región no esté disponible, la aplicación tampoco estará disponible.</span><span class="sxs-lookup"><span data-stu-id="fea1a-145">If your application is deployed to a single region, in the rare event the entire region becomes unavailable, your application will also be unavailable.</span></span> <span data-ttu-id="fea1a-146">Esto puede ser inaceptable bajo los términos del Acuerdo de Nivel de Servicio de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="fea1a-146">This may be unacceptable under the terms of your application's SLA.</span></span> <span data-ttu-id="fea1a-147">Si ese fuera el caso, considere la posibilidad de implementar la aplicación en varias regiones.</span><span class="sxs-lookup"><span data-stu-id="fea1a-147">If so, consider deploying your application and its services across multiple regions.</span></span> <span data-ttu-id="fea1a-148">Una implementación en varias regiones puede utilizar un modelo activo-activo (que distribuye las solicitudes en varias instancias activas) o un modelo activo-pasivo (que mantiene una instancia "activa" en reserva, en caso de que la instancia principal produzca un error).</span><span class="sxs-lookup"><span data-stu-id="fea1a-148">A multi-region deployment can use an active-active pattern (distributing requests across multiple active instances) or an active-passive pattern (keeping a "warm" instance in reserve, in case the primary instance fails).</span></span> <span data-ttu-id="fea1a-149">Le recomendamos que implemente varias instancias de los servicios de la aplicación en pares de regiones.</span><span class="sxs-lookup"><span data-stu-id="fea1a-149">We recommend that you deploy multiple instances of your application's services across regional pairs.</span></span> <span data-ttu-id="fea1a-150">Para más información, consulte [Continuidad empresarial y recuperación ante desastres (BCDR): regiones emparejadas de Azure](/azure/best-practices-availability-paired-regions).</span><span class="sxs-lookup"><span data-stu-id="fea1a-150">For more information, see [Business continuity and disaster recovery (BCDR): Azure Paired Regions](/azure/best-practices-availability-paired-regions).</span></span>

<span data-ttu-id="fea1a-151">**Utilice Azure Traffic Manager para enrutar el tráfico de la aplicación a diferentes regiones.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-151">**Use Azure Traffic Manager to route your application's traffic to different regions.**</span></span>  <span data-ttu-id="fea1a-152">[Azure Traffic Manager][traffic-manager] realiza el equilibrio de carga a nivel de DNS y enrutará el tráfico a regiones diferentes en función del método de [enrutamiento del tráfico][traffic-manager-routing] que se especifique y del estado de los puntos de conexión de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="fea1a-152">[Azure Traffic Manager][traffic-manager] performs load balancing at the DNS level and will route traffic to different regions based on the [traffic routing][traffic-manager-routing] method you specify and the health of your application's endpoints.</span></span> <span data-ttu-id="fea1a-153">Sin Traffic Manager, el usuario está limitado a una única región para la implementación, lo que limita la escala, aumenta la latencia para algunos usuarios y causa tiempo de inactividad de la aplicación en caso de una interrupción del servicio a nivel regional.</span><span class="sxs-lookup"><span data-stu-id="fea1a-153">Without Traffic Manager, you are limited to a single region for your deployment, which limits scale, increases latency for some users, and causes application downtime in the case of a region-wide service disruption.</span></span>

<span data-ttu-id="fea1a-154">**Configure y pruebe el sondeo de estado para los equilibradores de carga y administradores de tráfico.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-154">**Configure and test health probes for your load balancers and traffic managers.**</span></span> <span data-ttu-id="fea1a-155">Asegúrese de que la lógica de estado compruebe las partes críticas del sistema y responda adecuadamente a los sondeos de estado.</span><span class="sxs-lookup"><span data-stu-id="fea1a-155">Ensure that your health logic checks the critical parts of the system and responds appropriately to health probes.</span></span>

* <span data-ttu-id="fea1a-156">Los sondeos de estado para [Azure Traffic Manager][traffic-manager] y [Azure Load Balancer][load-balancer] cumplen una función específica.</span><span class="sxs-lookup"><span data-stu-id="fea1a-156">The health probes for [Azure Traffic Manager][traffic-manager] and [Azure Load Balancer][load-balancer] serve a specific function.</span></span> <span data-ttu-id="fea1a-157">Para Traffic Manager, el sondeo de estado determina si se debe conmutar por error a otra región.</span><span class="sxs-lookup"><span data-stu-id="fea1a-157">For Traffic Manager, the health probe determines whether to fail over to another region.</span></span> <span data-ttu-id="fea1a-158">Para un equilibrador de carga, determina si se debe quitar una máquina virtual de la rotación.</span><span class="sxs-lookup"><span data-stu-id="fea1a-158">For a load balancer, it determines whether to remove a VM from rotation.</span></span>      
* <span data-ttu-id="fea1a-159">Para un sondeo de Traffic Manager, el punto de conexión de estado debe comprobar las dependencias críticas que se implementan en la misma región, y cuyo error debería desencadenar una conmutación por error a otra región.</span><span class="sxs-lookup"><span data-stu-id="fea1a-159">For a Traffic Manager probe, your health endpoint should check any critical dependencies that are deployed within the same region, and whose failure should trigger a failover to another region.</span></span>  
* <span data-ttu-id="fea1a-160">Para un equilibrador de carga, el punto de conexión de estado debe informar del estado de la máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="fea1a-160">For a load balancer, the health endpoint should report the health of the VM.</span></span> <span data-ttu-id="fea1a-161">No se incluyen otros niveles o servicios externos.</span><span class="sxs-lookup"><span data-stu-id="fea1a-161">Don't include other tiers or external services.</span></span> <span data-ttu-id="fea1a-162">De lo contrario, un error que se produzca fuera de la máquina virtual hará que el equilibrador de carga quite la máquina virtual de la rotación.</span><span class="sxs-lookup"><span data-stu-id="fea1a-162">Otherwise, a failure that occurs outside the VM will cause the load balancer to remove the VM from rotation.</span></span>
* <span data-ttu-id="fea1a-163">Para obtener una guía sobre la implementación de la supervisión del estado en la aplicación, consulte [Health Endpoint Monitoring Pattern](https://msdn.microsoft.com/library/dn589789.aspx) (Patrón de supervisión de puntos de conexión de estado).</span><span class="sxs-lookup"><span data-stu-id="fea1a-163">For guidance on implementing health monitoring in your application, see [Health Endpoint Monitoring Pattern](https://msdn.microsoft.com/library/dn589789.aspx).</span></span>

<span data-ttu-id="fea1a-164">**Supervise los servicios de terceros.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-164">**Monitor third-party services.**</span></span> <span data-ttu-id="fea1a-165">Si la aplicación tiene dependencias en servicios de terceros, identifique dónde y cómo se produce un error en estos servicios de terceros y qué efecto tendrán esos errores en la aplicación.</span><span class="sxs-lookup"><span data-stu-id="fea1a-165">If your application has dependencies on third-party services, identify where and how these third-party services can fail and what effect those failures will have on your application.</span></span> <span data-ttu-id="fea1a-166">Un servicio de terceros puede no incluir supervisión y diagnóstico, por lo que es importante registrar sus invocaciones y correlacionarlas con el estado de la aplicación y el registro de diagnóstico mediante un identificador único.</span><span class="sxs-lookup"><span data-stu-id="fea1a-166">A third-party service may not include monitoring and diagnostics, so it's important to log your invocations of them and correlate them with your application's health and diagnostic logging using a unique identifier.</span></span> <span data-ttu-id="fea1a-167">Para más información sobre las prácticas demostradas para la supervisión y diagnóstico, consulte la [Guía de supervisión y diagnóstico][monitoring-and-diagnostics-guidance].</span><span class="sxs-lookup"><span data-stu-id="fea1a-167">For more information on proven practices for monitoring and diagnostics, see [Monitoring and Diagnostics guidance][monitoring-and-diagnostics-guidance].</span></span>

<span data-ttu-id="fea1a-168">**Asegúrese de que cualquier servicio de terceros que consuma proporciona un Acuerdo de Nivel de Servicio.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-168">**Ensure that any third-party service you consume provides an SLA.**</span></span> <span data-ttu-id="fea1a-169">Si la aplicación depende de un servicio de terceros, pero el tercero no ofrece ninguna garantía de disponibilidad en forma de Acuerdo de Nivel de Servicio, tampoco se puede garantizar la disponibilidad de su aplicación.</span><span class="sxs-lookup"><span data-stu-id="fea1a-169">If your application depends on a third-party service, but the third party provides no guarantee of availability in the form of an SLA, your application's availability also cannot be guaranteed.</span></span> <span data-ttu-id="fea1a-170">El Acuerdo de Nivel de Servicio es tan bueno como el componente menos disponible de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="fea1a-170">Your SLA is only as good as the least available component of your application.</span></span>

<span data-ttu-id="fea1a-171">**Implemente modelos de resistencia para operaciones remotas cuando sea apropiado.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-171">**Implement resiliency patterns for remote operations where appropriate.**</span></span> <span data-ttu-id="fea1a-172">Si la aplicación depende de la comunicación entre servicios remotos, siga los modelos de diseño para tratar errores transitorios, como [patrón Retry][retry-pattern] y [patrón Circuit Breaker][circuit-breaker].</span><span class="sxs-lookup"><span data-stu-id="fea1a-172">If your application depends on communication between remote services, follow design patterns for dealing with transient failures, such as [Retry Pattern][retry-pattern], and [Circuit Breaker Pattern][circuit-breaker].</span></span> <span data-ttu-id="fea1a-173">Para más información, consulte [Estrategias de resistencia](../resiliency/index.md#resiliency-strategies).</span><span class="sxs-lookup"><span data-stu-id="fea1a-173">For more information, see [Resiliency strategies](../resiliency/index.md#resiliency-strategies).</span></span>

<span data-ttu-id="fea1a-174">**Implemente operaciones asincrónicas siempre que sea posible.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-174">**Implement asynchronous operations whenever possible.**</span></span> <span data-ttu-id="fea1a-175">Las operaciones sincrónicas pueden monopolizar los recursos y bloquear otras operaciones mientras la persona que llama espera que se complete el proceso.</span><span class="sxs-lookup"><span data-stu-id="fea1a-175">Synchronous operations can monopolize resources and block other operations while the caller waits for the process to complete.</span></span> <span data-ttu-id="fea1a-176">Diseñe cada parte de la aplicación para permitir operaciones asincrónicas, siempre que sea posible.</span><span class="sxs-lookup"><span data-stu-id="fea1a-176">Design each part of your application to allow for asynchronous operations whenever possible.</span></span> <span data-ttu-id="fea1a-177">Para más información sobre cómo implementar la programación asincrónica en C#, consulte el artículo sobre [programación asincrónica con async y await][asynchronous-c-sharp].</span><span class="sxs-lookup"><span data-stu-id="fea1a-177">For more information on how to implement asynchronous programming in C#, see [Asynchronous Programming with async and await][asynchronous-c-sharp].</span></span>

## <a name="data-management"></a><span data-ttu-id="fea1a-178">Administración de datos</span><span class="sxs-lookup"><span data-stu-id="fea1a-178">Data management</span></span>

<span data-ttu-id="fea1a-179">**Comprenda los métodos de replicación para los orígenes de datos de la aplicación.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-179">**Understand the replication methods for your application's data sources.**</span></span> <span data-ttu-id="fea1a-180">Los datos de aplicación se almacenarán en orígenes de datos diferentes y tendrán distintos requisitos de disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="fea1a-180">Your application data will be stored in different data sources and have different availability requirements.</span></span> <span data-ttu-id="fea1a-181">Evalúe los métodos de replicación para cada tipo de almacenamiento de datos en Azure, incluidos la [replicación de Azure Storage](/azure/storage/storage-redundancy/) y la [replicación geográfica activa de SQL Database](/azure/sql-database/sql-database-geo-replication-overview/) para asegurarse de que se cumplen los requisitos de datos de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="fea1a-181">Evaluate the replication methods for each type of data storage in Azure, including [Azure Storage Replication](/azure/storage/storage-redundancy/) and [SQL Database Active Geo-Replication](/azure/sql-database/sql-database-geo-replication-overview/) to ensure that your application's data requirements are satisfied.</span></span>

<span data-ttu-id="fea1a-182">**Asegúrese de que ninguna cuenta de usuario individual tenga acceso a los datos de producción y de copia de seguridad.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-182">**Ensure that no single user account has access to both production and backup data.**</span></span> <span data-ttu-id="fea1a-183">Las copias de seguridad de datos estarán expuestas a riesgos si una sola cuenta de usuario tiene permiso para escribir tanto en los orígenes de producción y como en los de copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="fea1a-183">Your data backups are compromised if one single user account has permission to write to both production and backup sources.</span></span> <span data-ttu-id="fea1a-184">Un usuario malintencionado puede eliminar intencionadamente todos los datos, mientras que un usuario normal puede eliminarlos accidentalmente.</span><span class="sxs-lookup"><span data-stu-id="fea1a-184">A malicious user could purposely delete all your data, while a regular user could accidentally delete it.</span></span> <span data-ttu-id="fea1a-185">Diseñe la aplicación para limitar los permisos de cada cuenta de usuario de modo que solo los usuarios que requieren acceso de escritura tengan acceso de escritura y solo sea a producción o a copia de seguridad, pero no a ambas.</span><span class="sxs-lookup"><span data-stu-id="fea1a-185">Design your application to limit the permissions of each user account so that only the users that require write access have write access and it's only to either production or backup, but not both.</span></span>

<span data-ttu-id="fea1a-186">**Documente la conmutación por error del origen de datos y el proceso de conmutación por recuperación y pruébelo.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-186">**Document your data source fail over and fail back process and test it.**</span></span> <span data-ttu-id="fea1a-187">En el caso de que se produzca un error catastrófico en el origen de datos, el operador humano tendrá que seguir un conjunto de instrucciones documentadas para conmutar por error a un nuevo origen de datos.</span><span class="sxs-lookup"><span data-stu-id="fea1a-187">In the case where your data source fails catastrophically, a human operator will have to follow a set of documented instructions to fail over to a new data source.</span></span> <span data-ttu-id="fea1a-188">Si los pasos documentados tienen errores, el operador no podrá seguirlos correctamente y conmutará por error el recurso.</span><span class="sxs-lookup"><span data-stu-id="fea1a-188">If the documented steps have errors, an operator will not be able to successfully follow them and fail over the resource.</span></span> <span data-ttu-id="fea1a-189">Pruebe con regularidad los pasos de instrucciones para comprobar que el operador que los sigue puede realizar correctamente la conmutación por error y la conmutación por recuperación del origen de datos.</span><span class="sxs-lookup"><span data-stu-id="fea1a-189">Regularly test the instruction steps to verify that an operator following them is able to successfully fail over and fail back the data source.</span></span>

<span data-ttu-id="fea1a-190">**Valide las copias de seguridad de datos.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-190">**Validate your data backups.**</span></span> <span data-ttu-id="fea1a-191">Compruebe regularmente que sus datos de copia de seguridad son lo que espera mediante la ejecución de un script para validar la integridad de datos, el esquema y las consultas.</span><span class="sxs-lookup"><span data-stu-id="fea1a-191">Regularly verify that your backup data is what you expect by running a script to validate data integrity, schema, and queries.</span></span> <span data-ttu-id="fea1a-192">No tiene sentido tener una copia de seguridad si no es útil para restaurar los orígenes de datos.</span><span class="sxs-lookup"><span data-stu-id="fea1a-192">There's no point having a backup if it's not useful to restore your data sources.</span></span> <span data-ttu-id="fea1a-193">Registre e informe de cualquier inconsistencia para que el servicio de copia de seguridad se pueda reparar.</span><span class="sxs-lookup"><span data-stu-id="fea1a-193">Log and report any inconsistencies so the backup service can be repaired.</span></span>

<span data-ttu-id="fea1a-194">**Considere la posibilidad de utilizar un tipo de cuenta de almacenamiento con redundancia geográfica.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-194">**Consider using a storage account type that is geo-redundant.**</span></span> <span data-ttu-id="fea1a-195">Los datos almacenados en una cuenta de Azure Storage siempre se replican de forma local.</span><span class="sxs-lookup"><span data-stu-id="fea1a-195">Data stored in an Azure Storage account is always replicated locally.</span></span> <span data-ttu-id="fea1a-196">Sin embargo, hay varias estrategias de replicación para elegir cuando se aprovisiona una cuenta de almacenamiento.</span><span class="sxs-lookup"><span data-stu-id="fea1a-196">However, there are multiple replication strategies to choose from when a Storage Account is provisioned.</span></span> <span data-ttu-id="fea1a-197">Seleccione [Almacenamiento con redundancia geográfica con acceso de lectura (RA-GRS)](/azure/storage/storage-redundancy/#read-access-geo-redundant-storage) para proteger los datos de la aplicación en el raro caso en que una región entera no esté disponible.</span><span class="sxs-lookup"><span data-stu-id="fea1a-197">Select [Azure Read-Access Geo Redundant Storage (RA-GRS)](/azure/storage/storage-redundancy/#read-access-geo-redundant-storage) to protect your application data against the rare case when an entire region becomes unavailable.</span></span>

> [!NOTE]
> <span data-ttu-id="fea1a-198">En el caso de las máquinas virtuales, no confíe en la replicación RA-GRS para restaurar los discos de máquinas virtuales (archivos VHD).</span><span class="sxs-lookup"><span data-stu-id="fea1a-198">For VMs, do not rely on RA-GRS replication to restore the VM disks (VHD files).</span></span> <span data-ttu-id="fea1a-199">En su lugar, utilice [Azure Backup][azure-backup].</span><span class="sxs-lookup"><span data-stu-id="fea1a-199">Instead, use [Azure Backup][azure-backup].</span></span>   
>
>

## <a name="security"></a><span data-ttu-id="fea1a-200">Seguridad</span><span class="sxs-lookup"><span data-stu-id="fea1a-200">Security</span></span>

<span data-ttu-id="fea1a-201">**Implemente la protección de nivel de aplicación frente a la denegación de servicio distribuido (DDoS).**</span><span class="sxs-lookup"><span data-stu-id="fea1a-201">**Implement application-level protection against distributed denial of service (DDoS) attacks.**</span></span> <span data-ttu-id="fea1a-202">Los servicios de Azure están protegidos frente a ataques de DDos en la capa de red.</span><span class="sxs-lookup"><span data-stu-id="fea1a-202">Azure services are protected against DDos attacks at the network layer.</span></span> <span data-ttu-id="fea1a-203">Sin embargo, Azure no puede protegerse contra los ataques de la capa de aplicación, ya que es difícil distinguir entre las solicitudes de usuarios reales y las solicitudes de usuarios malintencionados.</span><span class="sxs-lookup"><span data-stu-id="fea1a-203">However, Azure cannot protect against application-layer attacks, because it is difficult to distinguish between true user requests from malicious user requests.</span></span> <span data-ttu-id="fea1a-204">Para más información sobre cómo protegerse de ataques de DDoS de capa de aplicación, consulte la sección "Protecting against DDoS" (Proteger frente a DDoS) de [Microsoft Azure Network Security](http://download.microsoft.com/download/C/A/3/CA3FC5C0-ECE0-4F87-BF4B-D74064A00846/AzureNetworkSecurity_v3_Feb2015.pdf) (descarga de PDF).</span><span class="sxs-lookup"><span data-stu-id="fea1a-204">For more information on how to protect against application-layer DDoS attacks, see the "Protecting against DDoS" section of [Microsoft Azure Network Security](http://download.microsoft.com/download/C/A/3/CA3FC5C0-ECE0-4F87-BF4B-D74064A00846/AzureNetworkSecurity_v3_Feb2015.pdf) (PDF download).</span></span>

<span data-ttu-id="fea1a-205">**Implemente el principio del privilegio mínimo para acceder a los recursos de la aplicación.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-205">**Implement the principle of least privilege for access to the application's resources.**</span></span> <span data-ttu-id="fea1a-206">El acceso predeterminado a los recursos de la aplicación debe ser lo más restrictivo posible.</span><span class="sxs-lookup"><span data-stu-id="fea1a-206">The default for access to the application's resources should be as restrictive as possible.</span></span> <span data-ttu-id="fea1a-207">Otorgue permisos de mayor nivel sobre la base de la aprobación.</span><span class="sxs-lookup"><span data-stu-id="fea1a-207">Grant higher level permissions on an approval basis.</span></span> <span data-ttu-id="fea1a-208">Conceder un acceso excesivamente permisivo a los recursos de la aplicación de forma predeterminada puede dar lugar a que alguien elimine recursos de forma intencionada o accidental.</span><span class="sxs-lookup"><span data-stu-id="fea1a-208">Granting overly permissive access to your application's resources by default can result in someone purposely or accidentally deleting resources.</span></span> <span data-ttu-id="fea1a-209">Azure proporciona [control de acceso basado en rol](/azure/active-directory/role-based-access-built-in-roles/) para administrar privilegios de usuario, pero es importante comprobar los permisos de privilegio mínimo para otros recursos que tienen sus propios sistemas de permisos, como SQL Server.</span><span class="sxs-lookup"><span data-stu-id="fea1a-209">Azure provides [role-based access control](/azure/active-directory/role-based-access-built-in-roles/) to manage user privileges, but it's important to verify least privilege permissions for other resources that have their own permissions systems such as SQL Server.</span></span>

## <a name="testing"></a><span data-ttu-id="fea1a-210">Prueba</span><span class="sxs-lookup"><span data-stu-id="fea1a-210">Testing</span></span>

<span data-ttu-id="fea1a-211">**Realice pruebas de conmutación por error y de conmutación por recuperación para la aplicación.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-211">**Perform failover and failback testing for your application.**</span></span> <span data-ttu-id="fea1a-212">Si no ha probado completamente la conmutación por error y la conmutación por recuperación, no puede estar seguro de que los servicios dependientes de la aplicación se recuperen de manera sincronizada durante la recuperación ante desastres.</span><span class="sxs-lookup"><span data-stu-id="fea1a-212">If you haven't fully tested failover and failback, you can't be certain that the dependent services in your application come back up in a synchronized manner during disaster recovery.</span></span> <span data-ttu-id="fea1a-213">Asegúrese de que los servicios dependientes de la aplicación realizan la conmutación por error y la conmutación por recuperación en el orden correcto.</span><span class="sxs-lookup"><span data-stu-id="fea1a-213">Ensure that your application's dependent services failover and fail back in the correct order.</span></span>

<span data-ttu-id="fea1a-214">**Realice pruebas de inyección de errores en la aplicación.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-214">**Perform fault-injection testing for your application.**</span></span> <span data-ttu-id="fea1a-215">La aplicación puede producir un error por muchas razones diferentes, como la expiración de certificados, el agotamiento de los recursos del sistema en una máquina virtual o errores de almacenamiento.</span><span class="sxs-lookup"><span data-stu-id="fea1a-215">Your application can fail for many different reasons, such as certificate expiration, exhaustion of system resources in a VM, or storage failures.</span></span> <span data-ttu-id="fea1a-216">Pruebe la aplicación en un entorno lo más cercano posible a producción, mediante la simulación o el desencadenamiento de errores reales.</span><span class="sxs-lookup"><span data-stu-id="fea1a-216">Test your application in an environment as close as possible to production, by simulating or triggering real failures.</span></span> <span data-ttu-id="fea1a-217">Por ejemplo, elimine certificados, consuma recursos del sistema de forma artificial o elimine un origen de almacenamiento.</span><span class="sxs-lookup"><span data-stu-id="fea1a-217">For example, delete certificates, artificially consume system resources, or delete a storage source.</span></span> <span data-ttu-id="fea1a-218">Compruebe la capacidad de la aplicación para recuperarse de todo tipo de errores, sola y en combinación.</span><span class="sxs-lookup"><span data-stu-id="fea1a-218">Verify your application's ability to recover from all types of faults, alone and in combination.</span></span> <span data-ttu-id="fea1a-219">Compruebe que los errores no se estén propagando en cascada por todo el sistema.</span><span class="sxs-lookup"><span data-stu-id="fea1a-219">Check that failures are not propagating or cascading through your system.</span></span>

<span data-ttu-id="fea1a-220">**Ejecute pruebas en producción mediante datos de usuario tanto sintéticos como reales.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-220">**Run tests in production using both synthetic and real user data.**</span></span> <span data-ttu-id="fea1a-221">El entorno de prueba y de producción rara vez son idénticos, por lo que es importante utilizar una implementación azul-verde o canario y de valor controlado y pruebe la aplicación en producción.</span><span class="sxs-lookup"><span data-stu-id="fea1a-221">Test and production are rarely identical, so it's important to use blue/green or a canary deployment and test your application in production.</span></span> <span data-ttu-id="fea1a-222">Esto le permite probar la aplicación en producción bajo carga real y asegurarse de que funcionará como se espera cuando esté completamente implementada.</span><span class="sxs-lookup"><span data-stu-id="fea1a-222">This allows you to test your application in production under real load and ensure it will function as expected when fully deployed.</span></span>

## <a name="deployment"></a><span data-ttu-id="fea1a-223">Implementación</span><span class="sxs-lookup"><span data-stu-id="fea1a-223">Deployment</span></span>

<span data-ttu-id="fea1a-224">**Documente el proceso de lanzamiento de la aplicación.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-224">**Document the release process for your application.**</span></span> <span data-ttu-id="fea1a-225">Sin la documentación detallada del proceso de lanzamiento, el operador puede implementar una mala actualización o configurar de manera incorrecta la configuración de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="fea1a-225">Without detailed release process documentation, an operator might deploy a bad update or improperly configure settings for your application.</span></span> <span data-ttu-id="fea1a-226">Defina y documente claramente el proceso de lanzamiento y asegúrese de que esté disponible para todo el equipo de operaciones.</span><span class="sxs-lookup"><span data-stu-id="fea1a-226">Clearly define and document your release process, and ensure that it's available to the entire operations team.</span></span> 

<span data-ttu-id="fea1a-227">**Automatice el proceso de implementación de la aplicación.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-227">**Automate your application's deployment process.**</span></span> <span data-ttu-id="fea1a-228">Si se requiere que el personal de operaciones implemente manualmente la aplicación, un error humano puede causar un error en la implementación.</span><span class="sxs-lookup"><span data-stu-id="fea1a-228">If your operations staff is required to manually deploy your application, human error can cause the deployment to fail.</span></span> 

<span data-ttu-id="fea1a-229">**Diseñe el proceso de lanzamiento para maximizar la disponibilidad de la aplicación.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-229">**Design your release process to maximize application availability.**</span></span> <span data-ttu-id="fea1a-230">Si su proceso de lanzamiento requiere que los servicios se desconecten durante la implementación, la aplicación no estará disponible hasta que vuelvan a conectarse.</span><span class="sxs-lookup"><span data-stu-id="fea1a-230">If your release process requires services to go offline during deployment, your application will be unavailable until they come back online.</span></span> <span data-ttu-id="fea1a-231">Utilice la técnica de implementación [verde/azul](http://martinfowler.com/bliki/BlueGreenDeployment.html) o de [lanzamiento controlado](http://martinfowler.com/bliki/CanaryRelease.html) para implementar la aplicación en producción.</span><span class="sxs-lookup"><span data-stu-id="fea1a-231">Use the [blue/green](http://martinfowler.com/bliki/BlueGreenDeployment.html) or [canary release](http://martinfowler.com/bliki/CanaryRelease.html) deployment technique to deploy your application to production.</span></span> <span data-ttu-id="fea1a-232">Ambas técnicas implican la implementación del código de lanzamiento junto con el código de producción, para que los usuarios del código de lanzamiento puedan redireccionarse al código de producción en caso de producirse un error.</span><span class="sxs-lookup"><span data-stu-id="fea1a-232">Both of these techniques involve deploying your release code alongside production code so users of release code can be redirected to production code in the event of a failure.</span></span>

<span data-ttu-id="fea1a-233">**Registre y audite las implementaciones de la aplicación.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-233">**Log and audit your application's deployments.**</span></span> <span data-ttu-id="fea1a-234">Si utiliza técnicas de implementación por etapas, como las implementaciones azul/verde o el lanzamiento controlado, habrá más de una versión de su aplicación que se ejecuta en producción.</span><span class="sxs-lookup"><span data-stu-id="fea1a-234">If you use staged deployment techniques such as blue/green or canary releases there will be more than one version of your application running in production.</span></span> <span data-ttu-id="fea1a-235">Si se produce un problema, es fundamental determinar qué versión de la aplicación lo está causando.</span><span class="sxs-lookup"><span data-stu-id="fea1a-235">If a problem should occur, it's critical to determine which version of your application is causing a problem.</span></span> <span data-ttu-id="fea1a-236">Implemente una estrategia de registro robusta para capturar tanta información específica de la versión como sea posible.</span><span class="sxs-lookup"><span data-stu-id="fea1a-236">Implement a robust logging strategy to capture as much version-specific information as possible.</span></span>

<span data-ttu-id="fea1a-237">**Tenga un plan de reversión para la implementación.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-237">**Have a rollback plan for deployment.**</span></span> <span data-ttu-id="fea1a-238">Es posible que la implementación de la aplicación pueda producir un error y hacer que la aplicación no esté disponible.</span><span class="sxs-lookup"><span data-stu-id="fea1a-238">It's possible that your application deployment could fail and cause your application to become unavailable.</span></span> <span data-ttu-id="fea1a-239">Diseñe un proceso de reversión para regresar a una última versión buena conocida y minimizar el tiempo de inactividad.</span><span class="sxs-lookup"><span data-stu-id="fea1a-239">Design a rollback process to go back to a last known good version and minimize downtime.</span></span> 

## <a name="operations"></a><span data-ttu-id="fea1a-240">Operaciones</span><span class="sxs-lookup"><span data-stu-id="fea1a-240">Operations</span></span>

<span data-ttu-id="fea1a-241">**Implemente los procedimientos recomendados de supervisión y alertas en la aplicación.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-241">**Implement best practices for monitoring and alerting in your application.**</span></span> <span data-ttu-id="fea1a-242">Sin una supervisión, un diagnóstico y unas alertas adecuados, no hay manera de detectar errores en la aplicación y alertar al operador para que los solucione.</span><span class="sxs-lookup"><span data-stu-id="fea1a-242">Without proper monitoring, diagnostics, and alerting, there is no way to detect failures in your application and alert an operator to fix them.</span></span> <span data-ttu-id="fea1a-243">Para más información, consulte la [Guía de supervisión y diagnóstico][monitoring-and-diagnostics-guidance].</span><span class="sxs-lookup"><span data-stu-id="fea1a-243">For more information, see [Monitoring and Diagnostics guidance][monitoring-and-diagnostics-guidance].</span></span>

<span data-ttu-id="fea1a-244">**Mida las estadísticas de llamadas remotas y ponga la información a disposición del equipo de la aplicación.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-244">**Measure remote call statistics and make the information available to the application team.**</span></span>  <span data-ttu-id="fea1a-245">Si no realiza el seguimiento e informa de las estadísticas de llamadas remotas en tiempo real ni proporciona una forma fácil de revisar esta información, el equipo de operaciones no tendrá una visión instantánea del estado de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="fea1a-245">If you don't track and report remote call statistics in real time and provide an easy way to review this information, the operations team will not have an instantaneous view into the health of your application.</span></span> <span data-ttu-id="fea1a-246">Y si solo mide el tiempo medio de las llamadas remotas, no tendrá suficiente información para revelar problemas en los servicios.</span><span class="sxs-lookup"><span data-stu-id="fea1a-246">And if you only measure average remote call time, you will not have enough information to reveal issues in the services.</span></span> <span data-ttu-id="fea1a-247">Resuma las métricas de llamadas remotas tales como latencia, rendimiento y errores en los percentiles 99 y 95.</span><span class="sxs-lookup"><span data-stu-id="fea1a-247">Summarize remote call metrics such as latency, throughput, and errors in the 99 and 95 percentiles.</span></span> <span data-ttu-id="fea1a-248">Realice un análisis estadístico de las métricas para descubrir los errores que ocurren dentro de cada percentil.</span><span class="sxs-lookup"><span data-stu-id="fea1a-248">Perform statistical analysis on the metrics to uncover errors that occur within each percentile.</span></span>

<span data-ttu-id="fea1a-249">**Realice el seguimiento del número de excepciones transitorias y de reintentos durante un período de tiempo apropiado.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-249">**Track the number of transient exceptions and retries over an appropriate timeframe.**</span></span> <span data-ttu-id="fea1a-250">Si no realiza el seguimiento y supervisa las excepciones transitorias y los intentos de reintentos a lo largo del tiempo, es posible que un problema o error pueda estar oculto por la lógica de reintento de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="fea1a-250">If you don't track and monitor transient exceptions and retry attempts over time, it's possible that an issue or failure could be hidden by your application's retry logic.</span></span> <span data-ttu-id="fea1a-251">Es decir, si la supervisión y registro solo muestra el éxito o fracaso de una operación, se ocultará el hecho de que la operación tuvo que ser repetida varias veces debido a las excepciones.</span><span class="sxs-lookup"><span data-stu-id="fea1a-251">That is, if your monitoring and logging only shows success or failure of an operation, the fact that the operation had to be retried multiple times due to exceptions will be hidden.</span></span> <span data-ttu-id="fea1a-252">Una tendencia al aumento de las excepciones con el tiempo indica que el servicio tiene un problema y puede producir errores.</span><span class="sxs-lookup"><span data-stu-id="fea1a-252">A trend of increasing exceptions over time indicates that the service is having an issue and may fail.</span></span> <span data-ttu-id="fea1a-253">Para más información, consulte [Guía de reintentos para servicios específicos][retry-service-guidance].</span><span class="sxs-lookup"><span data-stu-id="fea1a-253">For more information, see [Retry service specific guidance][retry-service-guidance].</span></span>

<span data-ttu-id="fea1a-254">**Implemente un sistema de advertencia temprana que alerte al operador.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-254">**Implement an early warning system that alerts an operator.**</span></span> <span data-ttu-id="fea1a-255">Identifique los indicadores clave de rendimiento del estado de la aplicación, como las excepciones transitorias y la latencia de llamadas remotas, y establezca los valores de umbral apropiados para cada uno de ellos.</span><span class="sxs-lookup"><span data-stu-id="fea1a-255">Identify the key performance indicators of your application's health, such as transient exceptions and remote call latency, and set appropriate threshold values for each of them.</span></span> <span data-ttu-id="fea1a-256">Envíe una alerta a las operaciones cuando se alcanza el valor de umbral.</span><span class="sxs-lookup"><span data-stu-id="fea1a-256">Send an alert to operations when the threshold value is reached.</span></span> <span data-ttu-id="fea1a-257">Establezca estos umbrales a niveles que identifiquen los problemas antes de que se vuelvan críticos y requieran una respuesta de recuperación.</span><span class="sxs-lookup"><span data-stu-id="fea1a-257">Set these thresholds at levels that identify issues before they become critical and require a recovery response.</span></span>

<span data-ttu-id="fea1a-258">**Asegúrese de que más de una persona del equipo esté entrenada para supervisar la aplicación y realizar cualquier paso de recuperación manual.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-258">**Ensure that more than one person on the team is trained to monitor the application and perform any manual recovery steps.**</span></span> <span data-ttu-id="fea1a-259">Si solo hay un único operador en el equipo que pueda supervisar la aplicación y poner en marcha los pasos de recuperación, esa persona se convierte en un único punto de error.</span><span class="sxs-lookup"><span data-stu-id="fea1a-259">If you only have a single operator on the team who can monitor the application and kick off recovery steps, that person becomes a single point of failure.</span></span> <span data-ttu-id="fea1a-260">Entrene a varias personas en la detección y recuperación, y asegúrese de que siempre haya al menos una persona activa en todo momento.</span><span class="sxs-lookup"><span data-stu-id="fea1a-260">Train multiple individuals on detection and recovery and make sure there is always at least one active at any time.</span></span>

<span data-ttu-id="fea1a-261">**Asegúrese de que la aplicación no se encuentre con los [límites de suscripción de Azure](/azure/azure-subscription-service-limits/).**</span><span class="sxs-lookup"><span data-stu-id="fea1a-261">**Ensure that your application does not run up against [Azure subscription limits](/azure/azure-subscription-service-limits/).**</span></span> <span data-ttu-id="fea1a-262">Las suscripciones a Azure tienen límites en ciertos tipos de recursos, como el número de grupos de recursos, el número de núcleos y el número de cuentas de almacenamiento.</span><span class="sxs-lookup"><span data-stu-id="fea1a-262">Azure subscriptions have limits on certain resource types, such as number of resource groups, number of cores, and number of storage accounts.</span></span>  <span data-ttu-id="fea1a-263">Si los requisitos de aplicación superan los límites de suscripción de Azure, cree otra suscripción de Azure y aprovisione allí recursos suficientes.</span><span class="sxs-lookup"><span data-stu-id="fea1a-263">If your application requirements exceed Azure subscription limits, create another Azure subscription and provision sufficient resources there.</span></span>

<span data-ttu-id="fea1a-264">**Asegúrese de que la aplicación no se encuentre con los [límites por servicio](/azure/azure-subscription-service-limits/).**</span><span class="sxs-lookup"><span data-stu-id="fea1a-264">**Ensure that your application does not run up against [per-service limits](/azure/azure-subscription-service-limits/).**</span></span> <span data-ttu-id="fea1a-265">Los servicios individuales de Azure tienen límites de consumo; por ejemplo, límites de almacenamiento, rendimiento, número de conexiones, solicitudes por segundo y otras métricas.</span><span class="sxs-lookup"><span data-stu-id="fea1a-265">Individual Azure services have consumption limits &mdash; for example, limits on storage, throughput, number of connections, requests per second, and other metrics.</span></span> <span data-ttu-id="fea1a-266">La aplicación producirá un error si intenta utilizar recursos más allá de estos límites.</span><span class="sxs-lookup"><span data-stu-id="fea1a-266">Your application will fail if it attempts to use resources beyond these limits.</span></span> <span data-ttu-id="fea1a-267">Esto provocará una limitación del servicio y un posible tiempo de inactividad a los usuarios afectados.</span><span class="sxs-lookup"><span data-stu-id="fea1a-267">This will result in service throttling and possible downtime for affected users.</span></span> <span data-ttu-id="fea1a-268">Dependiendo del servicio específico y de los requisitos de su aplicación, a menudo puede evitar estos límites escalando verticalmente (por ejemplo, al seleccionar otro plan de tarifas) u horizontalmente (al agregar nuevas instancias).</span><span class="sxs-lookup"><span data-stu-id="fea1a-268">Depending on the specific service and your application requirements, you can often avoid these limits by scaling up (for example, choosing another pricing tier) or scaling out (adding new instances).</span></span>  

<span data-ttu-id="fea1a-269">**Diseñe los requisitos de almacenamiento de la aplicación para que se ajusten a los objetivos de escalabilidad y rendimiento del almacenamiento de Azure.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-269">**Design your application's storage requirements to fall within Azure storage scalability and performance targets.**</span></span> <span data-ttu-id="fea1a-270">El almacenamiento de Azure está diseñado para funcionar dentro de objetivos de escalabilidad y rendimiento predefinidos, por lo que diseñe la aplicación para utilizar el almacenamiento dentro de dichos objetivos.</span><span class="sxs-lookup"><span data-stu-id="fea1a-270">Azure storage is designed to function within predefined scalability and performance targets, so design your application to utilize storage within those targets.</span></span> <span data-ttu-id="fea1a-271">Si supera estos objetivos, la aplicación experimentará una limitación del almacenamiento.</span><span class="sxs-lookup"><span data-stu-id="fea1a-271">If you exceed these targets your application will experience storage throttling.</span></span> <span data-ttu-id="fea1a-272">Para solucionar este problema, proporcione cuentas de almacenamiento adicionales.</span><span class="sxs-lookup"><span data-stu-id="fea1a-272">To fix this, provision additional Storage Accounts.</span></span> <span data-ttu-id="fea1a-273">Si se encuentra con el límite de la cuenta de almacenamiento, proporcione suscripciones de Azure adicionales y, después, proporcione cuentas de almacenamiento adicionales allí.</span><span class="sxs-lookup"><span data-stu-id="fea1a-273">If you run up against the Storage Account limit, provision additional Azure Subscriptions and then provision additional Storage Accounts there.</span></span> <span data-ttu-id="fea1a-274">Para obtener más información, consulte [Objetivos de escalabilidad y rendimiento de Azure Storage](/azure/storage/storage-scalability-targets/).</span><span class="sxs-lookup"><span data-stu-id="fea1a-274">For more information, see [Azure Storage Scalability and Performance Targets](/azure/storage/storage-scalability-targets/).</span></span>

<span data-ttu-id="fea1a-275">**Seleccione el tamaño adecuado de la máquina virtual para la aplicación.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-275">**Select the right VM size for your application.**</span></span> <span data-ttu-id="fea1a-276">Mida la CPU, la memoria, el disco y la E/S reales de las máquinas virtuales en producción y compruebe que el tamaño de la máquina virtual seleccionado sea suficiente.</span><span class="sxs-lookup"><span data-stu-id="fea1a-276">Measure the actual CPU, memory, disk, and I/O of your VMs in production and verify that the VM size you've selected is sufficient.</span></span> <span data-ttu-id="fea1a-277">Si no es así, la aplicación puede experimentar problemas de capacidad a medida que las máquinas virtuales se acercan a sus límites.</span><span class="sxs-lookup"><span data-stu-id="fea1a-277">If not, your application may experience capacity issues as the VMs approach their limits.</span></span> <span data-ttu-id="fea1a-278">Los tamaños de las máquinas virtuales se describen con detalle en [Tamaños de máquinas virtuales en Azure](/azure/virtual-machines/virtual-machines-windows-sizes/?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="fea1a-278">VM sizes are described in detail in [Sizes for virtual machines in Azure](/azure/virtual-machines/virtual-machines-windows-sizes/?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span></span>

<span data-ttu-id="fea1a-279">**Determine si la carga de trabajo de la aplicación es estable o fluctúa con el tiempo.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-279">**Determine if your application's workload is stable or fluctuating over time.**</span></span> <span data-ttu-id="fea1a-280">Si la carga de trabajo fluctúa con el tiempo, utilice los conjuntos de escalado de máquinas virtuales de Azure para escalar automáticamente el número de instancias de máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="fea1a-280">If your workload fluctuates over time, use Azure VM scale sets to automatically scale the number of VM instances.</span></span> <span data-ttu-id="fea1a-281">De lo contrario, tendrá que aumentar o disminuir de manera manual el número de máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="fea1a-281">Otherwise, you will have to manually increase or decrease the number of VMs.</span></span> <span data-ttu-id="fea1a-282">Para más información, consulte [Introducción a los conjuntos de escalado de máquinas virtuales](/azure/virtual-machine-scale-sets/virtual-machine-scale-sets-overview/).</span><span class="sxs-lookup"><span data-stu-id="fea1a-282">For more information, see the [Virtual Machine Scale Sets Overview](/azure/virtual-machine-scale-sets/virtual-machine-scale-sets-overview/).</span></span>

<span data-ttu-id="fea1a-283">**Seleccione el nivel de servicio correcto para Azure SQL Database.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-283">**Select the right service tier for Azure SQL Database.**</span></span> <span data-ttu-id="fea1a-284">Si la aplicación utiliza Azure SQL Database, asegúrese de que ha seleccionado el nivel de servicio apropiado.</span><span class="sxs-lookup"><span data-stu-id="fea1a-284">If your application uses Azure SQL Database, ensure that you have selected the appropriate service tier.</span></span> <span data-ttu-id="fea1a-285">Si selecciona un nivel que no es capaz de controlar los requisitos de la unidad de transmisión de datos (DTU) de la aplicación, el uso de datos estará limitado.</span><span class="sxs-lookup"><span data-stu-id="fea1a-285">If you select a tier that is not able to handle your application's database transaction unit (DTU) requirements, your data use will be throttled.</span></span> <span data-ttu-id="fea1a-286">Si quiere obtener más información sobre cómo seleccionar el plan de servicio correcto, consulte [Opciones y rendimiento de SQL Database: comprender lo que está disponible en cada nivel de servicio](/azure/sql-database/sql-database-service-tiers/).</span><span class="sxs-lookup"><span data-stu-id="fea1a-286">For more information on selecting the correct service plan, see [SQL Database options and performance: Understand what's available in each service tier](/azure/sql-database/sql-database-service-tiers/).</span></span>

<span data-ttu-id="fea1a-287">**Cree un proceso para interactuar con el soporte técnico de Azure.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-287">**Create a process for interacting with Azure support.**</span></span> <span data-ttu-id="fea1a-288">Si el proceso para contactar con el [soporte técnico de Azure](https://azure.microsoft.com/support/plans/) no está establecido antes de que surja la necesidad de ponerse en contacto con el soporte técnico, el tiempo de inactividad se prolongará a medida que el proceso de soporte técnico se recorra por primera vez.</span><span class="sxs-lookup"><span data-stu-id="fea1a-288">If the process for contacting [Azure support](https://azure.microsoft.com/support/plans/) is not set before the need to contact support arises, downtime will be prolonged as the support process is navigated for the first time.</span></span> <span data-ttu-id="fea1a-289">Incluya el proceso para ponerse en contacto con el soporte técnico y escalar los problemas como parte de la resistencia de la aplicación desde el principio.</span><span class="sxs-lookup"><span data-stu-id="fea1a-289">Include the process for contacting support and escalating issues as part of your application's resiliency from the outset.</span></span>

<span data-ttu-id="fea1a-290">**Asegúrese de que la aplicación no utilice más del número máximo de cuentas de almacenamiento por suscripción.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-290">**Ensure that your application doesn't use more than the maximum number of storage accounts per subscription.**</span></span> <span data-ttu-id="fea1a-291">Azure permite un máximo de 200 cuentas de almacenamiento por suscripción.</span><span class="sxs-lookup"><span data-stu-id="fea1a-291">Azure allows a maximum of 200 storage accounts per subscription.</span></span> <span data-ttu-id="fea1a-292">Si la aplicación requiere más cuentas de almacenamiento que las disponibles actualmente en la suscripción, deberá crear una nueva suscripción y crear cuentas de almacenamiento adicionales.</span><span class="sxs-lookup"><span data-stu-id="fea1a-292">If your application requires more storage accounts than are currently available in your subscription, you will have to create a new subscription and create additional storage accounts there.</span></span> <span data-ttu-id="fea1a-293">Para más información, consulte [Límites, cuotas y restricciones de suscripción y servicios de Microsoft Azure](/azure/azure-subscription-service-limits/#storage-limits).</span><span class="sxs-lookup"><span data-stu-id="fea1a-293">For more information, see [Azure subscription and service limits, quotas, and constraints](/azure/azure-subscription-service-limits/#storage-limits).</span></span>

<span data-ttu-id="fea1a-294">**Asegúrese de que la aplicación no supere los objetivos de escalabilidad para los discos de máquinas virtuales.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-294">**Ensure that your application doesn't exceed the scalability targets for virtual machine disks.**</span></span> <span data-ttu-id="fea1a-295">Las máquinas virtuales IaaS de Azure permiten asociar un número de discos de datos dependiendo de varios factores, como el tamaño de la máquina virtual y el tipo de cuenta de almacenamiento.</span><span class="sxs-lookup"><span data-stu-id="fea1a-295">An Azure IaaS VM supports attaching a number of data disks depending on several factors, including the VM size and type of storage account.</span></span> <span data-ttu-id="fea1a-296">Si la aplicación supera los objetivos de escalabilidad para los discos de máquinas virtuales, aprovisione cuentas de almacenamiento adicionales y cree allí los discos de máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="fea1a-296">If your application exceeds the scalability targets for virtual machine disks, provision additional storage accounts and create the virtual machine disks there.</span></span> <span data-ttu-id="fea1a-297">Para más información, consulte [Objetivos de escalabilidad y rendimiento de Azure Storage](/azure/storage/storage-scalability-targets/#scalability-targets-for-virtual-machine-disks).</span><span class="sxs-lookup"><span data-stu-id="fea1a-297">For more information, see [Azure Storage Scalability and Performance Targets](/azure/storage/storage-scalability-targets/#scalability-targets-for-virtual-machine-disks)</span></span>

## <a name="telemetry"></a><span data-ttu-id="fea1a-298">Telemetría</span><span class="sxs-lookup"><span data-stu-id="fea1a-298">Telemetry</span></span>

<span data-ttu-id="fea1a-299">**Registre los datos de telemetría mientras la aplicación se ejecuta en el entorno de producción.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-299">**Log telemetry data while the application is running in the production environment.**</span></span> <span data-ttu-id="fea1a-300">Capture la información de telemetría eficaz mientras la aplicación se está ejecutando en el entorno de producción o no tendrá suficiente información para diagnosticar la causa de los problemas mientras presta servicio activamente a los usuarios.</span><span class="sxs-lookup"><span data-stu-id="fea1a-300">Capture robust telemetry information while the application is running in the production environment or you will not have sufficient information to diagnose the cause of issues while it's actively serving users.</span></span> <span data-ttu-id="fea1a-301">Para más información, consulte [Supervisión y diagnóstico][monitoring-and-diagnostics-guidance].</span><span class="sxs-lookup"><span data-stu-id="fea1a-301">For more information, see [Monitoring and Diagnostics][monitoring-and-diagnostics-guidance].</span></span>

<span data-ttu-id="fea1a-302">**Implemente el registro con un patrón asincrónico.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-302">**Implement logging using an asynchronous pattern.**</span></span> <span data-ttu-id="fea1a-303">Si las operaciones de registro son sincrónicas, podrían bloquear el código de aplicación.</span><span class="sxs-lookup"><span data-stu-id="fea1a-303">If logging operations are synchronous, they might block your application code.</span></span> <span data-ttu-id="fea1a-304">Asegúrese de que las operaciones de registro se implementan como operaciones asincrónicas.</span><span class="sxs-lookup"><span data-stu-id="fea1a-304">Ensure that your logging operations are implemented as asynchronous operations.</span></span>

<span data-ttu-id="fea1a-305">**Correlacione los datos de registro en los límites de servicio.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-305">**Correlate log data across service boundaries.**</span></span> <span data-ttu-id="fea1a-306">En una aplicación típica de n niveles, una solicitud de usuario puede atravesar varios límites de servicio.</span><span class="sxs-lookup"><span data-stu-id="fea1a-306">In a typical n-tier application, a user request may traverse several service boundaries.</span></span> <span data-ttu-id="fea1a-307">Por ejemplo, una solicitud de usuario normalmente se origina en el nivel web y se pasa al nivel empresarial y, finalmente. persiste en la capa de datos.</span><span class="sxs-lookup"><span data-stu-id="fea1a-307">For example, a user request typically originates in the web tier and is passed to the business tier and finally persisted in the data tier.</span></span> <span data-ttu-id="fea1a-308">En escenarios más complejos, se puede distribuir una solicitud de usuario a muchos servicios y almacenes de datos diferentes.</span><span class="sxs-lookup"><span data-stu-id="fea1a-308">In more complex scenarios, a user request may be distributed to many different services and data stores.</span></span> <span data-ttu-id="fea1a-309">Asegúrese de que el sistema de registro correlacione las llamadas entre los límites del servicio para que pueda realizar un seguimiento de la solicitud en toda la aplicación.</span><span class="sxs-lookup"><span data-stu-id="fea1a-309">Ensure that your logging system correlates calls across service boundaries so you can track the request throughout your application.</span></span>

## <a name="azure-resources"></a><span data-ttu-id="fea1a-310">Recursos de Azure.</span><span class="sxs-lookup"><span data-stu-id="fea1a-310">Azure Resources</span></span>

<span data-ttu-id="fea1a-311">**Use las plantillas de Azure Resource Manager para aprovisionar recursos.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-311">**Use Azure Resource Manager templates to provision resources.**</span></span> <span data-ttu-id="fea1a-312">Las plantillas de Resource Manager facilitan la automatización de implementaciones a través de PowerShell o la CLI de Azure, lo que permite un proceso de implementación más confiable.</span><span class="sxs-lookup"><span data-stu-id="fea1a-312">Resource Manager templates make it easier to automate deployments via PowerShell or the Azure CLI, which leads to a more reliable deployment process.</span></span> <span data-ttu-id="fea1a-313">Para más información, consulte [Información general de Azure Resource Manager][resource-manager].</span><span class="sxs-lookup"><span data-stu-id="fea1a-313">For more information, see [Azure Resource Manager overview][resource-manager].</span></span>

<span data-ttu-id="fea1a-314">**Asigne a los recursos nombres descriptivos.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-314">**Give resources meaningful names.**</span></span> <span data-ttu-id="fea1a-315">Al asignar a los recursos nombre descriptivos, será más fácil encontrarlos y comprender su rol.</span><span class="sxs-lookup"><span data-stu-id="fea1a-315">Giving resources meaningful names makes it easier to locate a specific resource and understand its role.</span></span> <span data-ttu-id="fea1a-316">Para más información, consulte [Convenciones de nomenclatura](../best-practices/naming-conventions.md).</span><span class="sxs-lookup"><span data-stu-id="fea1a-316">For more information, see [Naming conventions for Azure resources](../best-practices/naming-conventions.md)</span></span>

<span data-ttu-id="fea1a-317">**Use el control de acceso basado en rol (RBAC).**</span><span class="sxs-lookup"><span data-stu-id="fea1a-317">**Use role-based access control (RBAC).**</span></span> <span data-ttu-id="fea1a-318">Utilice RBAC para controlar el acceso a los recursos de Azure que implemente.</span><span class="sxs-lookup"><span data-stu-id="fea1a-318">Use RBAC to control access to the Azure resources that you deploy.</span></span> <span data-ttu-id="fea1a-319">RBAC le permite asignar roles de autorización a los miembros del equipo de DevOps para evitar eliminaciones o modificaciones accidentales en los recursos implementados.</span><span class="sxs-lookup"><span data-stu-id="fea1a-319">RBAC lets you assign authorization roles to members of your DevOps team, to prevent accidental deletion or changes to deployed resources.</span></span> <span data-ttu-id="fea1a-320">Para más información, consulte [Introducción al control de acceso basado en roles en Azure Portal](/azure/active-directory/role-based-access-control-what-is/).</span><span class="sxs-lookup"><span data-stu-id="fea1a-320">For more information, see [Get started with access management in the Azure portal](/azure/active-directory/role-based-access-control-what-is/)</span></span>

<span data-ttu-id="fea1a-321">**Utilice los bloqueos de recursos para recursos críticos, como máquinas virtuales.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-321">**Use resource locks for critical resources, such as VMs.**</span></span> <span data-ttu-id="fea1a-322">Los bloqueos de recursos evitan que un operador elimine accidentalmente un recurso.</span><span class="sxs-lookup"><span data-stu-id="fea1a-322">Resource locks prevent an operator from accidentally deleting a resource.</span></span> <span data-ttu-id="fea1a-323">Para más información, consulte [Bloqueo de recursos con Azure Resource Manager](/azure/azure-resource-manager/resource-group-lock-resources/).</span><span class="sxs-lookup"><span data-stu-id="fea1a-323">For more information, see [Lock resources with Azure Resource Manager](/azure/azure-resource-manager/resource-group-lock-resources/)</span></span>

<span data-ttu-id="fea1a-324">**Elija pares regionales.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-324">**Choose regional pairs.**</span></span> <span data-ttu-id="fea1a-325">Cuando se realiza la implementación en dos regiones, elija regiones del mismo par regional.</span><span class="sxs-lookup"><span data-stu-id="fea1a-325">When deploying to two regions, choose regions from the same regional pair.</span></span> <span data-ttu-id="fea1a-326">En el caso de una interrupción amplia, tiene prioridad la recuperación de una región de cada pareja.</span><span class="sxs-lookup"><span data-stu-id="fea1a-326">In the event of a broad outage, recovery of one region is prioritized out of every pair.</span></span> <span data-ttu-id="fea1a-327">Algunos servicios, como el almacenamiento con redundancia geográfica ofrecen replicación automática a la región emparejada.</span><span class="sxs-lookup"><span data-stu-id="fea1a-327">Some services such as Geo-Redundant Storage provide automatic replication to the paired region.</span></span> <span data-ttu-id="fea1a-328">Para más información, consulte [Continuidad empresarial y recuperación ante desastres (BCDR): regiones emparejadas de Azure](/azure/best-practices-availability-paired-regions).</span><span class="sxs-lookup"><span data-stu-id="fea1a-328">For more information, see [Business continuity and disaster recovery (BCDR): Azure Paired Regions](/azure/best-practices-availability-paired-regions)</span></span>

<span data-ttu-id="fea1a-329">**Organice los grupos de recursos por función y ciclo de vida.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-329">**Organize resource groups by function and lifecycle.**</span></span>  <span data-ttu-id="fea1a-330">En general, un grupo de recursos debe contener recursos que comparten el mismo ciclo de vida.</span><span class="sxs-lookup"><span data-stu-id="fea1a-330">In general, a resource group should contain resources that share the same lifecycle.</span></span> <span data-ttu-id="fea1a-331">Esto facilita la administración de implementaciones, elimina implementaciones de prueba y asigna derechos de acceso, con lo que se reduce la posibilidad de que se elimine o modifique accidentalmente una implementación de producción.</span><span class="sxs-lookup"><span data-stu-id="fea1a-331">This makes it easier to manage deployments, delete test deployments, and assign access rights, reducing the chance that a production deployment is accidentally deleted or modified.</span></span> <span data-ttu-id="fea1a-332">Cree grupos de recursos independientes para entornos de producción, desarrollo y pruebas.</span><span class="sxs-lookup"><span data-stu-id="fea1a-332">Create separate resource groups for production, development, and test environments.</span></span> <span data-ttu-id="fea1a-333">En una implementación de varias regiones, ponga los recursos para cada región en grupos de recursos independientes.</span><span class="sxs-lookup"><span data-stu-id="fea1a-333">In a multi-region deployment, put resources for each region into separate resource groups.</span></span> <span data-ttu-id="fea1a-334">Esto facilita volver a implementar una región sin que afecte a las demás regiones.</span><span class="sxs-lookup"><span data-stu-id="fea1a-334">This makes it easier to redeploy one region without affecting the other region(s).</span></span>

## <a name="azure-services"></a><span data-ttu-id="fea1a-335">Servicios de Azure</span><span class="sxs-lookup"><span data-stu-id="fea1a-335">Azure Services</span></span>
<span data-ttu-id="fea1a-336">Los siguientes elementos de la lista de comprobación se aplican a servicios específicos en Azure.</span><span class="sxs-lookup"><span data-stu-id="fea1a-336">The following checklist items apply to specific services in Azure.</span></span>

- [<span data-ttu-id="fea1a-337">App Service</span><span class="sxs-lookup"><span data-stu-id="fea1a-337">App Service</span></span>](#app-service)
- [<span data-ttu-id="fea1a-338">Application Gateway</span><span class="sxs-lookup"><span data-stu-id="fea1a-338">Application Gateway</span></span>](#application-gateway)
- [<span data-ttu-id="fea1a-339">Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="fea1a-339">Cosmos DB</span></span>](#cosmos-db)
- [<span data-ttu-id="fea1a-340">Redis Cache</span><span class="sxs-lookup"><span data-stu-id="fea1a-340">Redis Cache</span></span>](#redis-cache)
- [<span data-ttu-id="fea1a-341">Search</span><span class="sxs-lookup"><span data-stu-id="fea1a-341">Search</span></span>](#search)
- [<span data-ttu-id="fea1a-342">Storage</span><span class="sxs-lookup"><span data-stu-id="fea1a-342">Storage</span></span>](#storage)
- [<span data-ttu-id="fea1a-343">SQL Database</span><span class="sxs-lookup"><span data-stu-id="fea1a-343">SQL Database</span></span>](#sql-database)
- [<span data-ttu-id="fea1a-344">SQL Server que se ejecuta en una máquina virtual</span><span class="sxs-lookup"><span data-stu-id="fea1a-344">SQL Server running in a VM</span></span>](#sql-server-running-in-a-vm)
- [<span data-ttu-id="fea1a-345">Traffic Manager</span><span class="sxs-lookup"><span data-stu-id="fea1a-345">Traffic Manager</span></span>](#traffic-manager)
- [<span data-ttu-id="fea1a-346">Virtual Machines</span><span class="sxs-lookup"><span data-stu-id="fea1a-346">Virtual Machines</span></span>](#virtual-machines)
- [<span data-ttu-id="fea1a-347">Virtual Network</span><span class="sxs-lookup"><span data-stu-id="fea1a-347">Virtual Network</span></span>](#virtual-network)

### <a name="app-service"></a><span data-ttu-id="fea1a-348">App Service</span><span class="sxs-lookup"><span data-stu-id="fea1a-348">App Service</span></span>

<span data-ttu-id="fea1a-349">**Utilice el nivel Estándar o Premium.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-349">**Use Standard or Premium tier.**</span></span> <span data-ttu-id="fea1a-350">Estos niveles admiten espacios de ensayo y copias de seguridad automáticas.</span><span class="sxs-lookup"><span data-stu-id="fea1a-350">These tiers support staging slots and automated backups.</span></span> <span data-ttu-id="fea1a-351">Para más información, consulte [Introducción detallada sobre los planes de Azure App Service](/azure/app-service/azure-web-sites-web-hosting-plans-in-depth-overview/).</span><span class="sxs-lookup"><span data-stu-id="fea1a-351">For more information, see [Azure App Service plans in-depth overview](/azure/app-service/azure-web-sites-web-hosting-plans-in-depth-overview/)</span></span>

<span data-ttu-id="fea1a-352">**Evite el escalado o la reducción verticales.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-352">**Avoid scaling up or down.**</span></span> <span data-ttu-id="fea1a-353">En su lugar, seleccione un nivel y un tamaño de instancia que satisfagan sus requisitos de rendimiento con la carga típica y, a continuación, [escale horizontalmente](/azure/app-service-web/web-sites-scale/) las instancias para controlar los cambios en el volumen de tráfico.</span><span class="sxs-lookup"><span data-stu-id="fea1a-353">Instead, select a tier and instance size that meet your performance requirements under typical load, and then [scale out](/azure/app-service-web/web-sites-scale/) the instances to handle changes in traffic volume.</span></span> <span data-ttu-id="fea1a-354">El escalado y la reducción verticales pueden desencadenar un reinicio de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="fea1a-354">Scaling up and down may trigger an application restart.</span></span>  

<span data-ttu-id="fea1a-355">**Almacene la configuración como valores de configuración de la aplicación.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-355">**Store configuration as app settings.**</span></span> <span data-ttu-id="fea1a-356">Utilice la configuración de la aplicación para almacenar los valores de configuración como valores de configuración de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="fea1a-356">Use app settings to hold configuration settings as app settings.</span></span> <span data-ttu-id="fea1a-357">Defina la configuración en las plantillas de Resource Manager o utilice PowerShell para que pueda aplicarlas como parte de un proceso automatizado de implementación o actualización, que es más confiable.</span><span class="sxs-lookup"><span data-stu-id="fea1a-357">Define the settings in your Resource Manager templates, or using PowerShell, so that you can apply them as part of an automated deployment / update process, which is more reliable.</span></span> <span data-ttu-id="fea1a-358">Para más información, consulte [Configuración de aplicaciones web en Azure App Service](/azure/app-service-web/web-sites-configure/).</span><span class="sxs-lookup"><span data-stu-id="fea1a-358">For more information, see [Configure web apps in Azure App Service](/azure/app-service-web/web-sites-configure/).</span></span>

<span data-ttu-id="fea1a-359">**Cree planes de App Service independientes para producción y prueba.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-359">**Create separate App Service plans for production and test.**</span></span> <span data-ttu-id="fea1a-360">No utilice ranuras en la implementación de producción para pruebas.</span><span class="sxs-lookup"><span data-stu-id="fea1a-360">Don't use slots on your production deployment for testing.</span></span>  <span data-ttu-id="fea1a-361">Todas las aplicaciones del mismo plan de App Service comparten las mismas instancias de máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="fea1a-361">All apps within the same App Service plan share the same VM instances.</span></span> <span data-ttu-id="fea1a-362">Si coloca implementaciones de producción y prueba en el mismo plan, puede afectar negativamente a la implementación de producción.</span><span class="sxs-lookup"><span data-stu-id="fea1a-362">If you put production and test deployments in the same plan, it can negatively affect the production deployment.</span></span> <span data-ttu-id="fea1a-363">Por ejemplo, las pruebas de carga pueden degradar el sitio de producción en vivo.</span><span class="sxs-lookup"><span data-stu-id="fea1a-363">For example, load tests might degrade the live production site.</span></span> <span data-ttu-id="fea1a-364">Al colocar las implementaciones de prueba en un plan independiente, se aíslan de la versión de producción.</span><span class="sxs-lookup"><span data-stu-id="fea1a-364">By putting test deployments into a separate plan, you isolate them from the production version.</span></span>  

<span data-ttu-id="fea1a-365">**Aplicaciones web independiente de las API web.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-365">**Separate web apps from web APIs.**</span></span> <span data-ttu-id="fea1a-366">Si la solución tiene un front-end web y una API web, considere descomponerlas en aplicaciones de App Service independientes.</span><span class="sxs-lookup"><span data-stu-id="fea1a-366">If your solution has both a web front-end and a web API, consider decomposing them into separate App Service apps.</span></span> <span data-ttu-id="fea1a-367">Este diseño facilita la descomposición de la solución por carga de trabajo.</span><span class="sxs-lookup"><span data-stu-id="fea1a-367">This design makes it easier to decompose the solution by workload.</span></span> <span data-ttu-id="fea1a-368">Puede ejecutar la aplicación web y la API en planes de App Service diferentes, por lo que se pueden escalar de forma independiente.</span><span class="sxs-lookup"><span data-stu-id="fea1a-368">You can run the web app and the API in separate App Service plans, so they can be scaled independently.</span></span> <span data-ttu-id="fea1a-369">Si inicialmente no necesita ese nivel de escalabilidad, puede implementar las aplicaciones en el mismo plan y moverlas más tarde a planes diferentes si es necesario.</span><span class="sxs-lookup"><span data-stu-id="fea1a-369">If you don't need that level of scalability at first, you can deploy the apps into the same plan, and move them into separate plans later, if needed.</span></span>

<span data-ttu-id="fea1a-370">**Evite utilizar la característica de copia de seguridad de App Service para hacer copias de seguridad de las bases de datos Azure SQL Database.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-370">**Avoid using the App Service backup feature to back up Azure SQL databases.**</span></span> <span data-ttu-id="fea1a-371">En cambio, utilice las [copias de seguridad automatizadas de SQL Database][sql-backup].</span><span class="sxs-lookup"><span data-stu-id="fea1a-371">Instead, use [SQL Database automated backups][sql-backup].</span></span> <span data-ttu-id="fea1a-372">La copia de seguridad de App Service exporta la base de datos a un archivo .bacpac de SQL, que cuesta unidades de transmisión de datos.</span><span class="sxs-lookup"><span data-stu-id="fea1a-372">App Service backup exports the database to a SQL .bacpac file, which costs DTUs.</span></span>  

<span data-ttu-id="fea1a-373">**Realice la implementación en un espacio de ensayo.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-373">**Deploy to a staging slot.**</span></span> <span data-ttu-id="fea1a-374">Cree una ranura de implementación para el almacenamiento provisional.</span><span class="sxs-lookup"><span data-stu-id="fea1a-374">Create a deployment slot for staging.</span></span> <span data-ttu-id="fea1a-375">Implemente las actualizaciones de la aplicación en el espacio de ensayo y compruebe la implementación antes de cambiarla a producción.</span><span class="sxs-lookup"><span data-stu-id="fea1a-375">Deploy application updates to the staging slot, and verify the deployment before swapping it into production.</span></span> <span data-ttu-id="fea1a-376">Esto reduce la posibilidad de una mala actualización en la producción.</span><span class="sxs-lookup"><span data-stu-id="fea1a-376">This reduces the chance of a bad update in production.</span></span> <span data-ttu-id="fea1a-377">También garantiza que todas las instancias estén preparadas antes de pasarlas a producción.</span><span class="sxs-lookup"><span data-stu-id="fea1a-377">It also ensures that all instances are warmed up before being swapped into production.</span></span> <span data-ttu-id="fea1a-378">Muchas aplicaciones presentan tiempos de preparación y arranque en frío considerables.</span><span class="sxs-lookup"><span data-stu-id="fea1a-378">Many applications have a significant warmup and cold-start time.</span></span> <span data-ttu-id="fea1a-379">Para más información, consulte [Configuración de entornos de ensayo para aplicaciones web en Azure App Service](/azure/app-service-web/web-sites-staged-publishing/).</span><span class="sxs-lookup"><span data-stu-id="fea1a-379">For more information, see [Set up staging environments for web apps in Azure App Service](/azure/app-service-web/web-sites-staged-publishing/).</span></span>

<span data-ttu-id="fea1a-380">**Cree una ranura de implementación para conservar la última implementación válida conocida.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-380">**Create a deployment slot to hold the last-known-good (LKG) deployment.**</span></span> <span data-ttu-id="fea1a-381">Cuando implemente una actualización en producción, traslade la implementación de producción anterior a la ranura de la última configuración válida conocida.</span><span class="sxs-lookup"><span data-stu-id="fea1a-381">When you deploy an update to production, move the previous production deployment into the LKG slot.</span></span> <span data-ttu-id="fea1a-382">Esto facilita la reversión de una implementación incorrecta.</span><span class="sxs-lookup"><span data-stu-id="fea1a-382">This makes it easier to roll back a bad deployment.</span></span> <span data-ttu-id="fea1a-383">Si detecta un problema más tarde, puede revertir rápidamente a la última versión válida conocida.</span><span class="sxs-lookup"><span data-stu-id="fea1a-383">If you discover a problem later, you can quickly revert to the LKG version.</span></span> <span data-ttu-id="fea1a-384">Para más información, consulte [Basic web application](../reference-architectures/app-service-web-app/basic-web-app.md) (Aplicación web básica).</span><span class="sxs-lookup"><span data-stu-id="fea1a-384">For more information, see [Basic web application](../reference-architectures/app-service-web-app/basic-web-app.md).</span></span>

<span data-ttu-id="fea1a-385">**Habilite el registro de diagnóstico**, incluido el registro de aplicaciones y el registro del servidor web.</span><span class="sxs-lookup"><span data-stu-id="fea1a-385">**Enable diagnostics logging**, including application logging and web server logging.</span></span> <span data-ttu-id="fea1a-386">El registro es importante para la supervisión y diagnóstico.</span><span class="sxs-lookup"><span data-stu-id="fea1a-386">Logging is important for monitoring and diagnostics.</span></span> <span data-ttu-id="fea1a-387">Consulte [Habilitación del registro de diagnóstico para aplicaciones web en Azure App Service](/azure/app-service-web/web-sites-enable-diagnostic-log/).</span><span class="sxs-lookup"><span data-stu-id="fea1a-387">See [Enable diagnostics logging for web apps in Azure App Service](/azure/app-service-web/web-sites-enable-diagnostic-log/)</span></span>

<span data-ttu-id="fea1a-388">**Regístrese en Blob Storage.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-388">**Log to blob storage.**</span></span> <span data-ttu-id="fea1a-389">Esto facilita la recopilación y el análisis de los datos.</span><span class="sxs-lookup"><span data-stu-id="fea1a-389">This makes it easier to collect and analyze the data.</span></span>

<span data-ttu-id="fea1a-390">**Cree una cuenta de almacenamiento para los registros.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-390">**Create a separate storage account for logs.**</span></span> <span data-ttu-id="fea1a-391">No use la misma cuenta de almacenamiento para los registros y los datos de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="fea1a-391">Don't use the same storage account for logs and application data.</span></span> <span data-ttu-id="fea1a-392">Esto ayuda a evitar que el registro reduzca el rendimiento de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="fea1a-392">This helps to prevent logging from reducing application performance.</span></span>

<span data-ttu-id="fea1a-393">**Supervise el rendimiento.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-393">**Monitor performance.**</span></span> <span data-ttu-id="fea1a-394">Use un servicio de supervisión de rendimiento, como [New Relic](http://newrelic.com/) o [Application Insights](/azure/application-insights/app-insights-overview/), para supervisar el rendimiento de la aplicación y el comportamiento sometido a carga.</span><span class="sxs-lookup"><span data-stu-id="fea1a-394">Use a performance monitoring service such as [New Relic](http://newrelic.com/) or [Application Insights](/azure/application-insights/app-insights-overview/) to monitor application performance and behavior under load.</span></span>  <span data-ttu-id="fea1a-395">La supervisión del rendimiento le ofrece una visión en tiempo real de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="fea1a-395">Performance monitoring gives you real-time insight into the application.</span></span> <span data-ttu-id="fea1a-396">Le permite diagnosticar problemas y realizar análisis de causa raíz de errores.</span><span class="sxs-lookup"><span data-stu-id="fea1a-396">It enables you to diagnose issues and perform root-cause analysis of failures.</span></span>

### <a name="application-gateway"></a><span data-ttu-id="fea1a-397">Application Gateway</span><span class="sxs-lookup"><span data-stu-id="fea1a-397">Application Gateway</span></span>

<span data-ttu-id="fea1a-398">**Aprovisione al menos dos instancias.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-398">**Provision at least two instances.**</span></span> <span data-ttu-id="fea1a-399">Implemente Application Gateway con al menos dos instancias.</span><span class="sxs-lookup"><span data-stu-id="fea1a-399">Deploy Application Gateway with at least two instances.</span></span> <span data-ttu-id="fea1a-400">Una única instancia es un único punto de error.</span><span class="sxs-lookup"><span data-stu-id="fea1a-400">A single instance is a single point of failure.</span></span> <span data-ttu-id="fea1a-401">Utilice dos o más instancias para redundancia y escalabilidad.</span><span class="sxs-lookup"><span data-stu-id="fea1a-401">Use two or more instances for redundancy and scalability.</span></span> <span data-ttu-id="fea1a-402">Para calificar para el [Acuerdo de Nivel de Servicio](https://azure.microsoft.com/support/legal/sla/application-gateway/v1_0/), debe proporcionar dos o más instancias medianas o más grandes.</span><span class="sxs-lookup"><span data-stu-id="fea1a-402">In order to qualify for the [SLA](https://azure.microsoft.com/support/legal/sla/application-gateway/v1_0/), you must provision two or more medium or larger instances.</span></span>

### <a name="cosmos-db"></a><span data-ttu-id="fea1a-403">Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="fea1a-403">Cosmos DB</span></span>

<span data-ttu-id="fea1a-404">**Replique la base de datos en todas las regiones.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-404">**Replicate the database across regions.**</span></span> <span data-ttu-id="fea1a-405">Cosmos DB permite asociar cualquier número de regiones de Azure con una cuenta de base de datos de Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="fea1a-405">Cosmos DB allows you to associate any number of Azure regions with a Cosmos DB database account.</span></span> <span data-ttu-id="fea1a-406">Una base de datos Cosmos DB puede tener una región de escritura y varias regiones de lectura.</span><span class="sxs-lookup"><span data-stu-id="fea1a-406">A Cosmos DB database can have one write region and multiple read regions.</span></span> <span data-ttu-id="fea1a-407">Si se produce un error en la región de escritura, puede leer desde otra réplica.</span><span class="sxs-lookup"><span data-stu-id="fea1a-407">If there is a failure in the write region, you can read from another replica.</span></span> <span data-ttu-id="fea1a-408">El SDK de cliente lo trata automáticamente.</span><span class="sxs-lookup"><span data-stu-id="fea1a-408">The Client SDK handles this automatically.</span></span> <span data-ttu-id="fea1a-409">También puede conmutar por error la región de escritura a otra región.</span><span class="sxs-lookup"><span data-stu-id="fea1a-409">You can also fail over the write region to another region.</span></span> <span data-ttu-id="fea1a-410">Para más información, consulte [Cómo se distribuyen datos globalmente con Azure Cosmos DB](/azure/documentdb/documentdb-distribute-data-globally).</span><span class="sxs-lookup"><span data-stu-id="fea1a-410">For more information, see [How to distribute data globally with Azure Cosmos DB?](/azure/documentdb/documentdb-distribute-data-globally)</span></span>

### <a name="redis-cache"></a><span data-ttu-id="fea1a-411">Caché en Redis</span><span class="sxs-lookup"><span data-stu-id="fea1a-411">Redis Cache</span></span>

<span data-ttu-id="fea1a-412">**Configurar la replicación geográfica**.</span><span class="sxs-lookup"><span data-stu-id="fea1a-412">**Configure Geo-replication**.</span></span> <span data-ttu-id="fea1a-413">La replicación geográfica proporciona un mecanismo para vincular dos instancias de Azure Redis Cache de nivel Premium.</span><span class="sxs-lookup"><span data-stu-id="fea1a-413">Geo-replication provides a mechanism for linking two Premium tier Azure Redis Cache instances.</span></span> <span data-ttu-id="fea1a-414">Los datos escritos en la caché principal se replican en una caché secundaria de solo lectura.</span><span class="sxs-lookup"><span data-stu-id="fea1a-414">Data written to the primary cache is replicated to a secondary read-only cache.</span></span> <span data-ttu-id="fea1a-415">Para más información, consulte [Configuración de replicación geográfica para Azure Redis Cache](/azure/redis-cache/cache-how-to-geo-replication).</span><span class="sxs-lookup"><span data-stu-id="fea1a-415">For more information, see [How to configure Geo-replication for Azure Redis Cache](/azure/redis-cache/cache-how-to-geo-replication)</span></span>

<span data-ttu-id="fea1a-416">**Configurar la persistencia de los datos.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-416">**Configure data persistence.**</span></span> <span data-ttu-id="fea1a-417">La persistencia de Redis le permite conservar los datos almacenados en Redis.</span><span class="sxs-lookup"><span data-stu-id="fea1a-417">Redis persistence allows you to persist data stored in Redis.</span></span> <span data-ttu-id="fea1a-418">También puede tomar instantáneas y realizar copias de seguridad de los datos que puede cargar en el caso de un error de hardware.</span><span class="sxs-lookup"><span data-stu-id="fea1a-418">You can also take snapshots and back up the data, which you can load in case of a hardware failure.</span></span> <span data-ttu-id="fea1a-419">Para más información, consulte [Cómo configurar la persistencia de datos para una instancia premium de Azure Redis Cache](/azure/redis-cache/cache-how-to-premium-persistence).</span><span class="sxs-lookup"><span data-stu-id="fea1a-419">For more information, see [How to configure data persistence for a Premium Azure Redis Cache](/azure/redis-cache/cache-how-to-premium-persistence)</span></span>

<span data-ttu-id="fea1a-420">Si usa Redis Cache como caché de datos temporal y no como almacén persistente, puede que estas recomendaciones no se apliquen.</span><span class="sxs-lookup"><span data-stu-id="fea1a-420">If you are using Redis Cache as a temporary data cache and not as a persistent store, these recommendations may not apply.</span></span> 

### <a name="search"></a><span data-ttu-id="fea1a-421">Search</span><span class="sxs-lookup"><span data-stu-id="fea1a-421">Search</span></span>

<span data-ttu-id="fea1a-422">**Aprovisione más de una réplica.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-422">**Provision more than one replica.**</span></span> <span data-ttu-id="fea1a-423">Utilice al menos dos réplicas para alta disponibilidad de lectura, o tres para alta disponibilidad de lectura-escritura.</span><span class="sxs-lookup"><span data-stu-id="fea1a-423">Use at least two replicas for read high-availability, or three for read-write high-availability.</span></span>

<span data-ttu-id="fea1a-424">**Configure los indexadores para implementaciones en varias regiones**.</span><span class="sxs-lookup"><span data-stu-id="fea1a-424">**Configure indexers for multi-region deployments.**</span></span> <span data-ttu-id="fea1a-425">Si tiene una implementación de varias regiones, tenga en cuenta las opciones para la continuidad en la indexación.</span><span class="sxs-lookup"><span data-stu-id="fea1a-425">If you have a multi-region deployment, consider your options for continuity in indexing.</span></span>

  * <span data-ttu-id="fea1a-426">Si el origen de datos está replicado geográficamente, por lo general debe dirigir cada indexador de cada servicio regional de Azure Search a su réplica local del origen de datos.</span><span class="sxs-lookup"><span data-stu-id="fea1a-426">If the data source is geo-replicated, you should generally point each indexer of each regional Azure Search service to its local data source replica.</span></span> <span data-ttu-id="fea1a-427">Sin embargo, este enfoque no se recomienda para grandes conjuntos de datos almacenados en Azure SQL Database.</span><span class="sxs-lookup"><span data-stu-id="fea1a-427">However, that approach is not recommended for large datasets stored in Azure SQL Database.</span></span> <span data-ttu-id="fea1a-428">La razón es que Azure Search no puede realizar la indexación incremental desde réplicas secundarias de SQL Database, solo desde réplicas principales.</span><span class="sxs-lookup"><span data-stu-id="fea1a-428">The reason is that Azure Search cannot perform incremental indexing from secondary SQL Database replicas, only from primary replicas.</span></span> <span data-ttu-id="fea1a-429">En su lugar, seleccione todos los indexadores a la réplica principal.</span><span class="sxs-lookup"><span data-stu-id="fea1a-429">Instead, point all indexers to the primary replica.</span></span> <span data-ttu-id="fea1a-430">Después de una conmutación por error, elija los indexadores de Azure Search a la nueva réplica principal.</span><span class="sxs-lookup"><span data-stu-id="fea1a-430">After a failover, point the Azure Search indexers at the new primary replica.</span></span>  
  * <span data-ttu-id="fea1a-431">Si el origen de datos no está replicado geográficamente, seleccione varios indexadores en el mismo origen de datos, de modo que los servicios de Azure Search en múltiples regiones se indexen continua e independientemente en el origen de datos.</span><span class="sxs-lookup"><span data-stu-id="fea1a-431">If the data source is not geo-replicated, point multiple indexers at the same data source, so that Azure Search services in multiple regions continuously and independently index from the data source.</span></span> <span data-ttu-id="fea1a-432">Para más información, consulte [Consideraciones sobre el rendimiento y la optimización de Azure Search][search-optimization].</span><span class="sxs-lookup"><span data-stu-id="fea1a-432">For more information, see [Azure Search performance and optimization considerations][search-optimization].</span></span>

### <a name="storage"></a><span data-ttu-id="fea1a-433">Storage</span><span class="sxs-lookup"><span data-stu-id="fea1a-433">Storage</span></span>

<span data-ttu-id="fea1a-434">**Para los datos de aplicación, use almacenamiento con redundancia geográfica con acceso de lectura (RA-GRS).**</span><span class="sxs-lookup"><span data-stu-id="fea1a-434">**For application data, use read-access geo-redundant storage (RA-GRS).**</span></span> <span data-ttu-id="fea1a-435">El almacenamiento con redundancia geográfica con acceso de lectura replica los datos en una región secundaria y proporciona acceso de solo lectura desde la región secundaria.</span><span class="sxs-lookup"><span data-stu-id="fea1a-435">RA-GRS storage replicates the data to a secondary region, and provides read-only access from the secondary region.</span></span> <span data-ttu-id="fea1a-436">Si hay una interrupción de almacenamiento en la región primaria, la aplicación puede leer los datos de la región secundaria.</span><span class="sxs-lookup"><span data-stu-id="fea1a-436">If there is a storage outage in the primary region, the application can read the data from the secondary region.</span></span> <span data-ttu-id="fea1a-437">Para más información, consulte [Replicación de Azure Storage](/azure/storage/storage-redundancy/).</span><span class="sxs-lookup"><span data-stu-id="fea1a-437">For more information, see [Azure Storage replication](/azure/storage/storage-redundancy/).</span></span>

<span data-ttu-id="fea1a-438">**Para los discos de máquinas virtuales, use Managed Disks.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-438">**For VM disks, use Managed Disks.**</span></span> <span data-ttu-id="fea1a-439">[Managed Disks][managed-disks] proporciona una mayor confiabilidad para las máquinas virtuales en los conjuntos de disponibilidad, porque los discos están suficientemente aislados entre sí para evitar únicos puntos de error.</span><span class="sxs-lookup"><span data-stu-id="fea1a-439">[Managed Disks][managed-disks] provide better reliability for VMs in an availability set, because the disks are sufficiently isolated from each other to avoid single points of failure.</span></span> <span data-ttu-id="fea1a-440">Además, Managed Disks no está sujeto a los límites de IOPS de los discos duros virtuales creados en una cuenta de almacenamiento.</span><span class="sxs-lookup"><span data-stu-id="fea1a-440">Also, Managed Disks aren't subject to the IOPS limits of VHDs created in a storage account.</span></span> <span data-ttu-id="fea1a-441">Para más información, consulte [Administración de la disponibilidad de las máquinas virtuales Windows en Azure][vm-manage-availability].</span><span class="sxs-lookup"><span data-stu-id="fea1a-441">For more information, see [Manage the availability of Windows virtual machines in Azure][vm-manage-availability].</span></span>

<span data-ttu-id="fea1a-442">**Para Queue Storage, cree una cola de copia de seguridad en otra región.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-442">**For Queue storage, create a backup queue in another region.**</span></span> <span data-ttu-id="fea1a-443">Para Queue Storage, las réplicas de solo lectura tienen un uso limitado, ya que no se puede poner elementos en cola o quitarlos.</span><span class="sxs-lookup"><span data-stu-id="fea1a-443">For Queue storage, a read-only replica has limited use, because you can't queue or dequeue items.</span></span> <span data-ttu-id="fea1a-444">En su lugar, cree una cola de copia de seguridad en una cuenta de almacenamiento en otra región.</span><span class="sxs-lookup"><span data-stu-id="fea1a-444">Instead, create a backup queue in a storage account in another region.</span></span> <span data-ttu-id="fea1a-445">Si se produce una interrupción de almacenamiento, la aplicación puede usar la cola de copia de seguridad hasta que la región primaria vuelva a estar disponible.</span><span class="sxs-lookup"><span data-stu-id="fea1a-445">If there is a storage outage, the application can use the backup queue, until the primary region becomes available again.</span></span> <span data-ttu-id="fea1a-446">De este modo, la aplicación puede seguir procesando nuevas solicitudes.</span><span class="sxs-lookup"><span data-stu-id="fea1a-446">That way, the application can still process new requests.</span></span>  

### <a name="sql-database"></a><span data-ttu-id="fea1a-447">SQL Database</span><span class="sxs-lookup"><span data-stu-id="fea1a-447">SQL Database</span></span>

<span data-ttu-id="fea1a-448">**Utilice el nivel Estándar o Premium.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-448">**Use Standard or Premium tier.**</span></span> <span data-ttu-id="fea1a-449">Estos niveles ofrecen un período de restauración a un momento dado más prolongado (35 días).</span><span class="sxs-lookup"><span data-stu-id="fea1a-449">These tiers provide a longer point-in-time restore period (35 days).</span></span> <span data-ttu-id="fea1a-450">Para más información, consulte [Opciones y rendimiento de SQL Database](/azure/sql-database/sql-database-service-tiers/).</span><span class="sxs-lookup"><span data-stu-id="fea1a-450">For more information, see [SQL Database options and performance](/azure/sql-database/sql-database-service-tiers/).</span></span>

<span data-ttu-id="fea1a-451">**Habilite la auditoría de SQL Database.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-451">**Enable SQL Database auditing.**</span></span> <span data-ttu-id="fea1a-452">La auditoría se puede utilizar para diagnosticar ataques maliciosos o errores humanos.</span><span class="sxs-lookup"><span data-stu-id="fea1a-452">Auditing can be used to diagnose malicious attacks or human error.</span></span> <span data-ttu-id="fea1a-453">Para obtener más información, consulte [Introducción a la auditoría de la Base de datos SQL](/azure/sql-database/sql-database-auditing-get-started/).</span><span class="sxs-lookup"><span data-stu-id="fea1a-453">For more information, see [Get started with SQL database auditing](/azure/sql-database/sql-database-auditing-get-started/).</span></span>

<span data-ttu-id="fea1a-454">**Use la replicación geográfica activa** Utilice esta replicación para crear una réplica secundaria legible en una región distinta.</span><span class="sxs-lookup"><span data-stu-id="fea1a-454">**Use Active Geo-Replication** Use Active Geo-Replication to create a readable secondary in a different region.</span></span>  <span data-ttu-id="fea1a-455">Si se produce un error en la base de datos principal o, simplemente, debe estar sin conexión, realice una conmutación por error manual a la base de datos secundaria.</span><span class="sxs-lookup"><span data-stu-id="fea1a-455">If your primary database fails, or simply needs to be taken offline, perform a manual failover to the secondary database.</span></span>  <span data-ttu-id="fea1a-456">Hasta que se realiza la conmutación por error, la base de datos secundaria sigue siendo de solo lectura.</span><span class="sxs-lookup"><span data-stu-id="fea1a-456">Until you fail over, the secondary database remains read-only.</span></span>  <span data-ttu-id="fea1a-457">Para más información, consulte [Replicación geográfica activa para Azure SQL Database](/azure/sql-database/sql-database-geo-replication-overview/).</span><span class="sxs-lookup"><span data-stu-id="fea1a-457">For more information, see [SQL Database Active Geo-Replication](/azure/sql-database/sql-database-geo-replication-overview/).</span></span>

<span data-ttu-id="fea1a-458">**Utilice el particionamiento.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-458">**Use sharding.**</span></span> <span data-ttu-id="fea1a-459">Considere el uso del particionamiento para realizar una partición horizontal de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="fea1a-459">Consider using sharding to partition the database horizontally.</span></span> <span data-ttu-id="fea1a-460">El particionamiento puede proporcionar aislamiento de errores.</span><span class="sxs-lookup"><span data-stu-id="fea1a-460">Sharding can provide fault isolation.</span></span> <span data-ttu-id="fea1a-461">Para más información, consulte [Escalado horizontal con Azure SQL Database](/azure/sql-database/sql-database-elastic-scale-introduction/).</span><span class="sxs-lookup"><span data-stu-id="fea1a-461">For more information, see [Scaling out with Azure SQL Database](/azure/sql-database/sql-database-elastic-scale-introduction/).</span></span>

<span data-ttu-id="fea1a-462">**Utilice la restauración a un momento dado para realizar la recuperación en caso de errores humanos.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-462">**Use point-in-time restore to recover from human error.**</span></span>  <span data-ttu-id="fea1a-463">La restauración a un momento dado devuelve la base de datos a un momento anterior en el tiempo.</span><span class="sxs-lookup"><span data-stu-id="fea1a-463">Point-in-time restore returns your database to an earlier point in time.</span></span> <span data-ttu-id="fea1a-464">Para más información, consulte [Recuperación de una instancia de Azure SQL Database mediante copias de seguridad de datos automatizadas][sql-restore].</span><span class="sxs-lookup"><span data-stu-id="fea1a-464">For more information, see [Recover an Azure SQL database using automated database backups][sql-restore].</span></span>

<span data-ttu-id="fea1a-465">**Use la restauración geográfica para recuperarse de una interrupción del servicio.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-465">**Use geo-restore to recover from a service outage.**</span></span> <span data-ttu-id="fea1a-466">La restauración geográfica restaura una base de datos a partir de una copia de seguridad con redundancia geográfica.</span><span class="sxs-lookup"><span data-stu-id="fea1a-466">Geo-restore restores a database from a geo-redundant backup.</span></span>  <span data-ttu-id="fea1a-467">Para más información, consulte [Recuperación de una instancia de Azure SQL Database mediante copias de seguridad de datos automatizadas][sql-restore].</span><span class="sxs-lookup"><span data-stu-id="fea1a-467">For more information, see [Recover an Azure SQL database using automated database backups][sql-restore].</span></span>

### <a name="sql-server-running-in-a-vm"></a><span data-ttu-id="fea1a-468">SQL Server que se ejecuta en una máquina virtual</span><span class="sxs-lookup"><span data-stu-id="fea1a-468">SQL Server running in a VM</span></span>

<span data-ttu-id="fea1a-469">**Replique la base de datos.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-469">**Replicate the database.**</span></span> <span data-ttu-id="fea1a-470">Use los Grupos de disponibilidad Always On de SQL Server para replicar la base de datos.</span><span class="sxs-lookup"><span data-stu-id="fea1a-470">Use SQL Server Always On Availability Groups to replicate the database.</span></span> <span data-ttu-id="fea1a-471">Proporciona alta disponibilidad si se produce un error en una instancia de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="fea1a-471">Provides high availability if one SQL Server instance fails.</span></span> <span data-ttu-id="fea1a-472">Para más información, consulte [Ejecución de máquinas virtuales Windows para una arquitectura de n niveles](../reference-architectures/virtual-machines-windows/n-tier.md).</span><span class="sxs-lookup"><span data-stu-id="fea1a-472">For more information, see [Run Windows VMs for an N-tier application](../reference-architectures/virtual-machines-windows/n-tier.md)</span></span>

<span data-ttu-id="fea1a-473">**Realice una copia de seguridad de la base de datos**.</span><span class="sxs-lookup"><span data-stu-id="fea1a-473">**Back up the database**.</span></span> <span data-ttu-id="fea1a-474">Si ya utiliza [Azure Backup](https://azure.microsoft.com/documentation/services/backup/) para realizar copias de seguridad de sus máquinas virtuales, considere la posibilidad de usar [Azure Backup para cargas de trabajo de SQL Server con DPM](/azure/backup/backup-azure-backup-sql/).</span><span class="sxs-lookup"><span data-stu-id="fea1a-474">If you are already using [Azure Backup](https://azure.microsoft.com/documentation/services/backup/) to back up your VMs, consider using [Azure Backup for SQL Server workloads using DPM](/azure/backup/backup-azure-backup-sql/).</span></span> <span data-ttu-id="fea1a-475">Con este enfoque, hay un rol de administrador de copias de seguridad para la organización y un procedimiento unificado de recuperación para máquinas virtuales y SQL Server.</span><span class="sxs-lookup"><span data-stu-id="fea1a-475">With this approach, there is one backup administrator role for the organization and a unified recovery procedure for VMs and SQL Server.</span></span> <span data-ttu-id="fea1a-476">En caso contrario, consulte [Copia de seguridad administrada de SQL Server en Microsoft Azure](https://msdn.microsoft.com/library/dn449496.aspx).</span><span class="sxs-lookup"><span data-stu-id="fea1a-476">Otherwise, use [SQL Server Managed Backup to Microsoft Azure](https://msdn.microsoft.com/library/dn449496.aspx).</span></span>

### <a name="traffic-manager"></a><span data-ttu-id="fea1a-477">Traffic Manager</span><span class="sxs-lookup"><span data-stu-id="fea1a-477">Traffic Manager</span></span>

<span data-ttu-id="fea1a-478">**Realice la conmutación por recuperación manual.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-478">**Perform manual failback.**</span></span> <span data-ttu-id="fea1a-479">Después de una conmutación por error de Traffic Manager, realice la conmutación por recuperación manual, en lugar de la automática.</span><span class="sxs-lookup"><span data-stu-id="fea1a-479">After a Traffic Manager failover, perform manual failback, rather than automatically failing back.</span></span> <span data-ttu-id="fea1a-480">Antes de la conmutación por recuperación, compruebe que todos los subsistemas de aplicación tengan un estado correcto.</span><span class="sxs-lookup"><span data-stu-id="fea1a-480">Before failing back, verify that all application subsystems are healthy.</span></span>  <span data-ttu-id="fea1a-481">En caso contrario, puede crear una situación donde la aplicación va y viene incesantemente entre centros de datos.</span><span class="sxs-lookup"><span data-stu-id="fea1a-481">Otherwise, you can create a situation where the application flips back and forth between data centers.</span></span> <span data-ttu-id="fea1a-482">Para más información, consulte [Ejecución de máquinas virtuales Windows en varias regiones para lograr alta disponibilidad](../reference-architectures/virtual-machines-windows/multi-region-application.md).</span><span class="sxs-lookup"><span data-stu-id="fea1a-482">For more information, see [Run VMs in multiple regions for high availability](../reference-architectures/virtual-machines-windows/multi-region-application.md).</span></span>

<span data-ttu-id="fea1a-483">**Cree un punto de conexión del sondeo de estado.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-483">**Create a health probe endpoint.**</span></span> <span data-ttu-id="fea1a-484">Crear un punto de conexión personalizado que informe sobre el estado general de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="fea1a-484">Create a custom endpoint that reports on the overall health of the application.</span></span> <span data-ttu-id="fea1a-485">Esto permite que Traffic Manager conmute por error si se produce un error en cualquier ruta de acceso crítica, no solo el front-end.</span><span class="sxs-lookup"><span data-stu-id="fea1a-485">This enables Traffic Manager to fail over if any critical path fails, not just the front end.</span></span> <span data-ttu-id="fea1a-486">El punto de conexión debe devolver un código de error HTTP si cualquier dependencia crítica es incorrecta o inaccesible.</span><span class="sxs-lookup"><span data-stu-id="fea1a-486">The endpoint should return an HTTP error code if any critical dependency is unhealthy or unreachable.</span></span> <span data-ttu-id="fea1a-487">Sin embargo, no informe de errores para servicios no críticos.</span><span class="sxs-lookup"><span data-stu-id="fea1a-487">Don't report errors for non-critical services, however.</span></span> <span data-ttu-id="fea1a-488">De lo contrario, el sondeo de estado podría desencadenar una conmutación por error cuando no sea necesario, con lo que se crean falsos positivos.</span><span class="sxs-lookup"><span data-stu-id="fea1a-488">Otherwise, the health probe might trigger failover when it's not needed, creating false positives.</span></span> <span data-ttu-id="fea1a-489">Para más información, consulte [Supervisión de puntos de conexión de Traffic Manager](/azure/traffic-manager/traffic-manager-monitoring/).</span><span class="sxs-lookup"><span data-stu-id="fea1a-489">For more information, see [Traffic Manager endpoint monitoring and failover](/azure/traffic-manager/traffic-manager-monitoring/).</span></span>

### <a name="virtual-machines"></a><span data-ttu-id="fea1a-490">Virtual Machines</span><span class="sxs-lookup"><span data-stu-id="fea1a-490">Virtual Machines</span></span>

<span data-ttu-id="fea1a-491">**Evite ejecutar una carga de trabajo de producción en una única máquina virtual.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-491">**Avoid running a production workload on a single VM.**</span></span> <span data-ttu-id="fea1a-492">Una única implementación de máquina virtual no es resistente al mantenimiento planeado o no planeado.</span><span class="sxs-lookup"><span data-stu-id="fea1a-492">A single VM deployment is not resilient to planned or unplanned maintenance.</span></span> <span data-ttu-id="fea1a-493">En su lugar, coloque varias máquinas virtuales en un conjunto de disponibilidad o [conjunto de escalado de máquina virtual](/azure/virtual-machine-scale-sets/virtual-machine-scale-sets-overview/), con un equilibrador de carga delante.</span><span class="sxs-lookup"><span data-stu-id="fea1a-493">Instead, put multiple VMs in an availability set or [VM scale set](/azure/virtual-machine-scale-sets/virtual-machine-scale-sets-overview/), with a load balancer in front.</span></span>

<span data-ttu-id="fea1a-494">**Especifique un conjunto de disponibilidad cuando aprovisione la máquina virtual.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-494">**Specify an availability set when you provision the VM.**</span></span> <span data-ttu-id="fea1a-495">Actualmente, no hay ninguna manera de agregar una máquina virtual a un conjunto de disponibilidad después de aprovisionar la máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="fea1a-495">Currently, there is no way to add a VM to an availability set after the VM is provisioned.</span></span> <span data-ttu-id="fea1a-496">Cuando se agrega una nueva máquina virtual a un grupo de disponibilidad existente, asegúrese de crear una NIC para la máquina virtual y agregue la NIC al grupo de direcciones back-end en el equilibrador de carga.</span><span class="sxs-lookup"><span data-stu-id="fea1a-496">When you add a new VM to an existing availability set, make sure to create a NIC for the VM, and add the NIC to the back-end address pool on the load balancer.</span></span> <span data-ttu-id="fea1a-497">De lo contrario, el equilibrador de carga no enrutará el tráfico de la red a esa máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="fea1a-497">Otherwise, the load balancer won't route network traffic to that VM.</span></span>

<span data-ttu-id="fea1a-498">**Ponga cada capa de aplicación en un conjunto de disponibilidad independiente.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-498">**Put each application tier into a separate Availability Set.**</span></span> <span data-ttu-id="fea1a-499">En una aplicación de n niveles, no coloque máquinas virtuales de diferentes niveles en el mismo conjunto de disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="fea1a-499">In an N-tier application, don't put VMs from different tiers into the same availability set.</span></span> <span data-ttu-id="fea1a-500">Las máquinas virtuales de un conjunto de disponibilidad se colocan en dominios de error y en dominios de actualización.</span><span class="sxs-lookup"><span data-stu-id="fea1a-500">VMs in an availability set are placed across fault domains (FDs) and update domains (UD).</span></span> <span data-ttu-id="fea1a-501">Sin embargo, para obtener el beneficio de redundancia de los dominios de error y de los dominios de disponibilidad, cada máquina virtual en el conjunto de disponibilidad debe ser capaz de tratar las mismas solicitudes del cliente.</span><span class="sxs-lookup"><span data-stu-id="fea1a-501">However, to get the redundancy benefit of FDs and UDs, every VM in the availability set must be able to handle the same client requests.</span></span>

<span data-ttu-id="fea1a-502">**Elija el tamaño de la máquina virtual adecuado según los requisitos de rendimiento.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-502">**Choose the right VM size based on performance requirements.**</span></span> <span data-ttu-id="fea1a-503">Al mover una carga de trabajo existente a Azure, comience con el tamaño de máquina virtual que más se acerque a los servidores locales.</span><span class="sxs-lookup"><span data-stu-id="fea1a-503">When moving an existing workload to Azure, start with the VM size that's the closest match to your on-premises servers.</span></span> <span data-ttu-id="fea1a-504">Luego, mida el rendimiento de la carga de trabajo real con respecto a la CPU, la memoria y la IOPS de disco, y ajuste el tamaño, si es necesario.</span><span class="sxs-lookup"><span data-stu-id="fea1a-504">Then measure the performance of your actual workload with respect to CPU, memory, and disk IOPS, and adjust the size if needed.</span></span> <span data-ttu-id="fea1a-505">Esto ayuda a asegurar que la aplicación se comporte según lo previsto en un entorno de nube.</span><span class="sxs-lookup"><span data-stu-id="fea1a-505">This helps to ensure the application behaves as expected in a cloud environment.</span></span> <span data-ttu-id="fea1a-506">Además, si tiene varias tarjetas NIC, tenga en cuenta el límite de NIC para cada tamaño.</span><span class="sxs-lookup"><span data-stu-id="fea1a-506">Also, if you need multiple NICs, be aware of the NIC limit for each size.</span></span>

<span data-ttu-id="fea1a-507">**Use Managed Disks en discos duros virtuales.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-507">**Use Managed Disks for VHDs.**</span></span> <span data-ttu-id="fea1a-508">[Managed Disks][managed-disks] proporciona una mayor confiabilidad para las máquinas virtuales en los conjuntos de disponibilidad, porque los discos están suficientemente aislados entre sí para evitar únicos puntos de error.</span><span class="sxs-lookup"><span data-stu-id="fea1a-508">[Managed Disks][managed-disks] provide better reliability for VMs in an availability set, because the disks are sufficiently isolated from each other to avoid single points of failure.</span></span> <span data-ttu-id="fea1a-509">Además, Managed Disks no está sujeto a los límites de IOPS de los discos duros virtuales creados en una cuenta de almacenamiento.</span><span class="sxs-lookup"><span data-stu-id="fea1a-509">Also, Managed Disks aren't subject to the IOPS limits of VHDs created in a storage account.</span></span> <span data-ttu-id="fea1a-510">Para más información, consulte [Administración de la disponibilidad de las máquinas virtuales Windows en Azure][vm-manage-availability].</span><span class="sxs-lookup"><span data-stu-id="fea1a-510">For more information, see [Manage the availability of Windows virtual machines in Azure][vm-manage-availability].</span></span>

<span data-ttu-id="fea1a-511">**Instale las aplicaciones en un disco de datos, no en el disco del sistema operativo.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-511">**Install applications on a data disk, not the OS disk.**</span></span> <span data-ttu-id="fea1a-512">De lo contrario, puede alcanzar el límite de tamaño de disco.</span><span class="sxs-lookup"><span data-stu-id="fea1a-512">Otherwise, you may reach the disk size limit.</span></span>

<span data-ttu-id="fea1a-513">**Use Azure Backup para hacer copia de seguridad de las máquinas virtuales.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-513">**Use Azure Backup to back up VMs.**</span></span> <span data-ttu-id="fea1a-514">Las copias de seguridad protegen contra la pérdida accidental de datos.</span><span class="sxs-lookup"><span data-stu-id="fea1a-514">Backups protect against accidental data loss.</span></span> <span data-ttu-id="fea1a-515">Para más información, consulte [Protección de máquinas virtuales de Azure con un almacén de Recovery Services](/azure/backup/backup-azure-vms-first-look-arm/)</span><span class="sxs-lookup"><span data-stu-id="fea1a-515">For more information, see [Protect Azure VMs with a recovery services vault](/azure/backup/backup-azure-vms-first-look-arm/).</span></span>

<span data-ttu-id="fea1a-516">**Habilite registros de diagnóstico**, incluidas las métricas de mantenimiento básicas, los registros de infraestructura y los [diagnósticos de arranque][boot-diagnostics].</span><span class="sxs-lookup"><span data-stu-id="fea1a-516">**Enable diagnostic logs**, including basic health metrics, infrastructure logs, and [boot diagnostics][boot-diagnostics].</span></span> <span data-ttu-id="fea1a-517">Los diagnósticos de arranque pueden ayudarle a diagnosticar un error de arranque si la VM entra en un estado de imposibilidad de arranque.</span><span class="sxs-lookup"><span data-stu-id="fea1a-517">Boot diagnostics can help you diagnose a boot failure if your VM gets into a non-bootable state.</span></span> <span data-ttu-id="fea1a-518">Para más información, consulte [Información general sobre los registros de diagnóstico de Azure][diagnostics-logs].</span><span class="sxs-lookup"><span data-stu-id="fea1a-518">For more information, see [Overview of Azure Diagnostic Logs][diagnostics-logs].</span></span>

<span data-ttu-id="fea1a-519">**Use la extensión AzureLogCollector.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-519">**Use the AzureLogCollector extension.**</span></span> <span data-ttu-id="fea1a-520">(Solo máquinas virtuales Windows). Esta extensión agrega los registros de la plataforma Azure y los carga en el almacenamiento de Azure, sin que el operador acceda de forma remota a la máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="fea1a-520">(Windows VMs only.) This extension aggregates Azure platform logs and uploads them to Azure storage, without the operator remotely logging into the VM.</span></span> <span data-ttu-id="fea1a-521">Para más información, consulte la [extensión AzureLogCollector](/azure/virtual-machines/virtual-machines-windows-log-collector-extension/?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="fea1a-521">For more information, see [AzureLogCollector Extension](/azure/virtual-machines/virtual-machines-windows-log-collector-extension/?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span></span>

### <a name="virtual-network"></a><span data-ttu-id="fea1a-522">Virtual Network</span><span class="sxs-lookup"><span data-stu-id="fea1a-522">Virtual Network</span></span>

<span data-ttu-id="fea1a-523">**Para permitir o bloquear direcciones IP públicas, agregue un grupo de seguridad de red a la subred.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-523">**To whitelist or block public IP addresses, add an NSG to the subnet.**</span></span> <span data-ttu-id="fea1a-524">Bloquee el acceso de usuarios malintencionados o permita el acceso solo a los usuarios que tienen privilegios para acceder a la aplicación.</span><span class="sxs-lookup"><span data-stu-id="fea1a-524">Block access from malicious users, or allow access only from users who have privilege to access the application.</span></span>  

<span data-ttu-id="fea1a-525">**Cree un sondeo de estado personalizado.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-525">**Create a custom health probe.**</span></span> <span data-ttu-id="fea1a-526">Los sondeos de estado de Load Balancer pueden probar los protocolos HTTP o TCP.</span><span class="sxs-lookup"><span data-stu-id="fea1a-526">Load Balancer Health Probes can test either HTTP or TCP.</span></span> <span data-ttu-id="fea1a-527">Si una máquina virtual ejecuta un servidor HTTP, el sondeo de HTTP es un indicador del estado de mantenimiento mejor que un sondeo de TCP.</span><span class="sxs-lookup"><span data-stu-id="fea1a-527">If a VM runs an HTTP server, the HTTP probe is a better indicator of health status than a TCP probe.</span></span> <span data-ttu-id="fea1a-528">Para un sondeo de HTTP, utilice un punto de conexión personalizado que informa del estado general de la aplicación, incluidas todas las dependencias críticas.</span><span class="sxs-lookup"><span data-stu-id="fea1a-528">For an HTTP probe, use a custom endpoint that reports the overall health of the application, including all critical dependencies.</span></span> <span data-ttu-id="fea1a-529">Para más información, consulte [Información general sobre Azure Load Balancer](/azure/load-balancer/load-balancer-overview/).</span><span class="sxs-lookup"><span data-stu-id="fea1a-529">For more information, see [Azure Load Balancer overview](/azure/load-balancer/load-balancer-overview/).</span></span>

<span data-ttu-id="fea1a-530">**No bloquee el sondeo de estado.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-530">**Don't block the health probe.**</span></span> <span data-ttu-id="fea1a-531">El sondeo de estado de Load Balancer se envía desde una dirección IP conocida, 168.63.129.16.</span><span class="sxs-lookup"><span data-stu-id="fea1a-531">The Load Balancer Health probe is sent from a known IP address, 168.63.129.16.</span></span> <span data-ttu-id="fea1a-532">No bloquee el tráfico hacia o desde esta dirección IP en las directivas de firewall o en las reglas de grupo de seguridad de red (NSG).</span><span class="sxs-lookup"><span data-stu-id="fea1a-532">Don't block traffic to or from this IP in any firewall policies or network security group (NSG) rules.</span></span> <span data-ttu-id="fea1a-533">El bloqueo del sondeo de estado podría causar que el equilibrador de carga quite la máquina virtual de la rotación.</span><span class="sxs-lookup"><span data-stu-id="fea1a-533">Blocking the health probe would cause the load balancer to remove the VM from rotation.</span></span>

<span data-ttu-id="fea1a-534">**Habilite el registro de Load Balancer.**</span><span class="sxs-lookup"><span data-stu-id="fea1a-534">**Enable Load Balancer logging.**</span></span> <span data-ttu-id="fea1a-535">Los registros muestran cuántas máquinas virtuales del back-end no reciben tráfico de red debido a las respuestas de sondeo con error.</span><span class="sxs-lookup"><span data-stu-id="fea1a-535">The logs show how many VMs on the back-end are not receiving network traffic due to failed probe responses.</span></span> <span data-ttu-id="fea1a-536">Para más información, consulte [Log Analytics para Azure Load Balancer](/azure/load-balancer/load-balancer-monitor-log/).</span><span class="sxs-lookup"><span data-stu-id="fea1a-536">For more information, see [Log analytics for Azure Load Balancer](/azure/load-balancer/load-balancer-monitor-log/).</span></span>


<!-- links -->
[app-service-autoscale]: /azure/monitoring-and-diagnostics/insights-how-to-scale/
[asynchronous-c-sharp]: /dotnet/articles/csharp/async
[availability-sets]:/azure/virtual-machines/virtual-machines-windows-manage-availability/
[azure-backup]: https://azure.microsoft.com/documentation/services/backup/
[boot-diagnostics]: https://azure.microsoft.com/blog/boot-diagnostics-for-virtual-machines-v2/
[circuit-breaker]: ../patterns/circuit-breaker.md
[cloud-service-autoscale]: /azure/cloud-services/cloud-services-how-to-scale/
[diagnostics-logs]: /azure/monitoring-and-diagnostics/monitoring-overview-of-diagnostic-logs/
[fma]: ../resiliency/failure-mode-analysis.md
[resilient-deployment]: ../resiliency/index.md#resilient-deployment
[load-balancer]: /azure/load-balancer/load-balancer-overview/
[managed-disks]: /azure/storage/storage-managed-disks-overview
[monitoring-and-diagnostics-guidance]: ../best-practices/monitoring.md
[resource-manager]: /azure/azure-resource-manager/resource-group-overview/
[retry-pattern]: ../patterns/retry.md
[retry-service-guidance]: ../best-practices/retry-service-specific.md
[search-optimization]: /azure/search/search-performance-optimization/
[sql-backup]: /azure/sql-database/sql-database-automated-backups/
[sql-restore]: /azure/sql-database/sql-database-recovery-using-backups/
[traffic-manager]: /azure/traffic-manager/traffic-manager-overview/
[traffic-manager-routing]: /azure/traffic-manager/traffic-manager-routing-methods/
[vm-manage-availability]: /azure/virtual-machines/windows/manage-availability#use-managed-disks-for-vms-in-an-availability-set
[vmss-autoscale]: /azure/virtual-machine-scale-sets/virtual-machine-scale-sets-autoscale-overview/
