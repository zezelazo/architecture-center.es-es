---
title: Guía de diseño de una API
description: Guía sobre cómo crear una API web bien diseñada.
author: dragon119
ms.date: 01/12/2018
pnp.series.title: Best Practices
ms.openlocfilehash: db9784f454e0b52b335d6dff3a054c2c59124c9f
ms.sourcegitcommit: f7418f8bdabc8f5ec33ae3551e3fbb466782caa5
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 06/19/2018
ms.locfileid: "36209617"
---
# <a name="api-design"></a><span data-ttu-id="fc4fd-103">Diseño de API</span><span class="sxs-lookup"><span data-stu-id="fc4fd-103">API design</span></span>

<span data-ttu-id="fc4fd-104">Las mayoría de las aplicaciones web modernas exponen interfaces de programación de aplicaciones (API) que los clientes pueden usar para interactuar con la aplicación.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-104">Most modern web applications expose APIs that clients can use to interact with the application.</span></span> <span data-ttu-id="fc4fd-105">Una API web bien diseñada debe ser capaz de admitir:</span><span class="sxs-lookup"><span data-stu-id="fc4fd-105">A well-designed web API should aim to support:</span></span>

* <span data-ttu-id="fc4fd-106">**Independencia de la plataforma**.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-106">**Platform independence**.</span></span> <span data-ttu-id="fc4fd-107">Cualquier cliente debe poder llamar a la API, con independencia de cómo esté implementada internamente.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-107">Any client should be able to call the API, regardless of how the API is implemented internally.</span></span> <span data-ttu-id="fc4fd-108">Para ello, es necesario usar protocolos estándar y contar con un mecanismo por medio del cual el cliente y el servicio web puedan acordar el formato de los datos que se intercambian.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-108">This requires using standard protocols, and having a mechanism whereby the client and the web service can agree on the format of the data to exchange.</span></span>

* <span data-ttu-id="fc4fd-109">**Evolución del servicio**.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-109">**Service evolution**.</span></span> <span data-ttu-id="fc4fd-110">La API web debe poder evolucionar y agregar funcionalidad con independencia de las aplicaciones cliente.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-110">The web API should be able to evolve and add functionality independently from client applications.</span></span> <span data-ttu-id="fc4fd-111">A medida que evoluciona la API, las aplicaciones cliente existentes deben seguir funcionando sin necesidad de modificarlas.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-111">As the API evolves, existing client applications should continue to function without modification.</span></span> <span data-ttu-id="fc4fd-112">Toda la funcionalidad debe poderse detectar, así las aplicaciones cliente puedan usarla completamente.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-112">All functionality should be discoverable, so that client applications can fully utilize it.</span></span>

<span data-ttu-id="fc4fd-113">En esta guía se describen los problemas que se deben tener en cuenta al diseñar una API web.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-113">This guidance describes issues that you should consider when designing a web API.</span></span>

## <a name="introduction-to-rest"></a><span data-ttu-id="fc4fd-114">Introducción a REST</span><span class="sxs-lookup"><span data-stu-id="fc4fd-114">Introduction to REST</span></span>

<span data-ttu-id="fc4fd-115">En 2000, Roy Fielding propuso la transferencia de estado representacional (REST) como enfoque de arquitectura para el diseño de servicios web.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-115">In 2000, Roy Fielding proposed Representational State Transfer (REST) as an architectural approach to designing web services.</span></span> <span data-ttu-id="fc4fd-116">REST es un estilo de arquitectura para la creación de sistemas distribuidos basados en hipermedia.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-116">REST is an architectural style for building distributed systems based on hypermedia.</span></span> <span data-ttu-id="fc4fd-117">REST es independiente de cualquier protocolo subyacente y no está necesariamente unido a HTTP.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-117">REST is independent of any underlying protocol and is not necessarily tied to HTTP.</span></span> <span data-ttu-id="fc4fd-118">Sin embargo, en las implementaciones más comunes de REST se usa HTTP como protocolo de aplicación, y esta guía se centra en el diseño de API de REST para HTTP.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-118">However, most common REST implementations use HTTP as the application protocol, and this guide focuses on designing REST APIs for HTTP.</span></span>

<span data-ttu-id="fc4fd-119">Una de las principales ventajas de REST sobre HTTP es que usa estándares abiertos y no vincula la implementación de la API o de las aplicaciones cliente con ninguna implementación específica.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-119">A primary advantage of REST over HTTP is that it uses open standards, and does not bind the implementation of the API or the client applications any specific implementation.</span></span> <span data-ttu-id="fc4fd-120">Por ejemplo, se podría escribir un servicio web de REST en ASP.NET, y las aplicaciones cliente pueden usar cualquier lenguaje o conjunto de herramientas que puedan generar solicitudes HTTP y analizar respuestas HTTP.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-120">For example, a REST web service could be written in ASP.NET, and client applications can use any language or toolset that can generate HTTP requests and parse HTTP responses.</span></span>

<span data-ttu-id="fc4fd-121">Estos son algunos de los principios de diseño más importantes de las API de RESTful mediante HTTP:</span><span class="sxs-lookup"><span data-stu-id="fc4fd-121">Here are some of the main design principles of RESTful APIs using HTTP:</span></span>

- <span data-ttu-id="fc4fd-122">Las API de REST se diseñan en torno a *recursos*, que son cualquier tipo de objeto, dato o servicio al que puede acceder el cliente.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-122">REST APIs are designed around *resources*, which are any kind of object, data, or service that can be accessed by the client.</span></span> 

- <span data-ttu-id="fc4fd-123">Un recurso tiene un *identificador*, que es un URI que identifica de forma única ese recurso.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-123">A resource has an *identifier*, which is a URI that uniquely identifies that resource.</span></span> <span data-ttu-id="fc4fd-124">Por ejemplo, el URI de un pedido de cliente en particular podría ser:</span><span class="sxs-lookup"><span data-stu-id="fc4fd-124">For example, the URI for a particular customer order might be:</span></span> 
 
    ```http
    http://adventure-works.com/orders/1
    ```
 
- <span data-ttu-id="fc4fd-125">Los clientes interactúan con un servicio mediante el intercambio de *representaciones* de recursos.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-125">Clients interact with a service by exchanging *representations* of resources.</span></span> <span data-ttu-id="fc4fd-126">Muchas API web usan JSON como formato de intercambio.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-126">Many web APIs use JSON as the exchange format.</span></span> <span data-ttu-id="fc4fd-127">Por ejemplo, una solicitud GET al URI mencionado anteriormente podría devolver este cuerpo de respuesta:</span><span class="sxs-lookup"><span data-stu-id="fc4fd-127">For example, a GET request to the URI listed above might return this response body:</span></span>

    ```json
    {"orderId":1,"orderValue":99.90,"productId":1,"quantity":1}
    ```

- <span data-ttu-id="fc4fd-128">Las API de REST usan una interfaz uniforme, que ayuda a desacoplar las implementaciones de clientes y servicios.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-128">REST APIs use a uniform interface, which helps to decouple the client and service implementations.</span></span> <span data-ttu-id="fc4fd-129">En las API REST basadas en HTTP, la interfaz uniforme incluye el uso de verbos HTTP estándar para realizar operaciones en los recursos.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-129">For REST APIs built on HTTP, the uniform interface includes using standard HTTP verbs to perform operations on resources.</span></span> <span data-ttu-id="fc4fd-130">Las operaciones más comunes son GET, POST, PUT, PATCH y DELETE.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-130">The most common operations are GET, POST, PUT, PATCH, and DELETE.</span></span> 

- <span data-ttu-id="fc4fd-131">Las API de REST usan un modelo de solicitud sin estado.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-131">REST APIs use a stateless request model.</span></span> <span data-ttu-id="fc4fd-132">Las solicitudes HTTP deben ser independientes y pueden producirse en cualquier orden, por lo que no es factible conservar la información de estado transitoria entre solicitudes.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-132">HTTP requests should be independent and may occur in any order, so keeping transient state information between requests is not feasible.</span></span> <span data-ttu-id="fc4fd-133">El único lugar donde se almacena la información es en los propios recursos y cada solicitud debe ser una operación atómica.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-133">The only place where information is stored is in the resources themselves, and each request should be an atomic operation.</span></span> <span data-ttu-id="fc4fd-134">Esta restricción permite que los servicios web sean muy escalables, porque no es necesario conservar ninguna afinidad entre clientes y servidores específicos.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-134">This constraint enables web services to be highly scalable, because there is no need to retain any affinity between clients and specific servers.</span></span> <span data-ttu-id="fc4fd-135">Cualquier servidor puede administrar cualquier solicitud de cualquier cliente.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-135">Any server can handle any request from any client.</span></span> <span data-ttu-id="fc4fd-136">Ahora bien, otros factores pueden limitar la escalabilidad.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-136">That said, other factors can limit scalability.</span></span> <span data-ttu-id="fc4fd-137">Por ejemplo, muchos servicios web escriben en un almacén de datos back-end, que puede ser difícil de escalar horizontalmente. (En el artículo [Creación de particiones de datos](./data-partitioning.md) se describen las estrategias para escalar horizontalmente un almacén de datos).</span><span class="sxs-lookup"><span data-stu-id="fc4fd-137">For example, many web services write to a backend data store, which may be hard to scale out. (The article [Data Partitioning](./data-partitioning.md) describes strategies to scale out a data store.)</span></span>

- <span data-ttu-id="fc4fd-138">Las API de REST se controlan mediante vínculos de hipermedia contenidos en la representación.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-138">REST APIs are driven by hypermedia links that are contained in the representation.</span></span> <span data-ttu-id="fc4fd-139">Por ejemplo, a continuación se muestra una representación JSON de un pedido.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-139">For example, the following shows a JSON representation of an order.</span></span> <span data-ttu-id="fc4fd-140">Contiene vínculos para obtener o actualizar el cliente asociado con el pedido.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-140">It contains links to get or update the customer associated with the order.</span></span> 
 
    ```json
    {
        "orderID":3,
        "productID":2,
        "quantity":4,
        "orderValue":16.60,
        "links": [
            {"rel":"product","href":"http://adventure-works.com/customers/3", "action":"GET" },
            {"rel":"product","href":"http://adventure-works.com/customers/3", "action":"PUT" } 
        ]
    } 
    ```


<span data-ttu-id="fc4fd-141">En 2008, Leonard Richardson propuso el siguiente [modelo de madurez](https://martinfowler.com/articles/richardsonMaturityModel.html) para las API web:</span><span class="sxs-lookup"><span data-stu-id="fc4fd-141">In 2008, Leonard Richardson proposed the following [maturity model](https://martinfowler.com/articles/richardsonMaturityModel.html) for web APIs:</span></span>

- <span data-ttu-id="fc4fd-142">Nivel 0: definir un URI, y todas las operaciones son solicitudes POST a este URI.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-142">Level 0: Define one URI, and all operations are POST requests to this URI.</span></span>
- <span data-ttu-id="fc4fd-143">Nivel 1: crear distintos URI para recursos individuales.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-143">Level 1: Create separate URIs for individual resources.</span></span>
- <span data-ttu-id="fc4fd-144">Nivel 2: usar métodos HTTP para definir operaciones en los recursos.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-144">Level 2: Use HTTP methods to define operations on resources.</span></span>
- <span data-ttu-id="fc4fd-145">Nivel 3: usar hipermedia (HATEOAS, se describe a continuación).</span><span class="sxs-lookup"><span data-stu-id="fc4fd-145">Level 3: Use hypermedia (HATEOAS, described below).</span></span>

<span data-ttu-id="fc4fd-146">El nivel 3 corresponde a una API verdaderamente RESTful. de acuerdo con la definición del Fielding.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-146">Level 3 corresponds to a truly RESTful API according to Fielding's definition.</span></span> <span data-ttu-id="fc4fd-147">En la práctica, muchas API web publicadas se sitúan más bien alrededor del nivel 2.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-147">In practice, many  published web APIs fall somewhere around level 2.</span></span>  

## <a name="organize-the-api-around-resources"></a><span data-ttu-id="fc4fd-148">Organización de la API en torno a los recursos</span><span class="sxs-lookup"><span data-stu-id="fc4fd-148">Organize the API around resources</span></span>

<span data-ttu-id="fc4fd-149">Se centran en las entidades empresariales que expone la API web.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-149">Focus on the business entities that the web API exposes.</span></span> <span data-ttu-id="fc4fd-150">Por ejemplo, en un sistema de comercio electrónico, las entidades principales podrían ser clientes y pedidos.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-150">For example, in an e-commerce system, the primary entities might be customers and orders.</span></span> <span data-ttu-id="fc4fd-151">La creación de un pedido se puede lograr mediante el envío de una solicitud HTTP POST que contiene la información del pedido.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-151">Creating an order can be achieved by sending an HTTP POST request that contains the order information.</span></span> <span data-ttu-id="fc4fd-152">La respuesta HTTP indica si el pedido se realizó correctamente o no.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-152">The HTTP response indicates whether the order was placed successfully or not.</span></span> <span data-ttu-id="fc4fd-153">Siempre que sea posible, los URI de recursos deben basarse en nombres (el recurso) y no en verbos (las operaciones en el recurso).</span><span class="sxs-lookup"><span data-stu-id="fc4fd-153">When possible, resource URIs should be based on nouns (the resource) and not verbs (the operations on the resource).</span></span> 

```HTTP
http://adventure-works.com/orders // Good

http://adventure-works.com/create-order // Avoid
```

<span data-ttu-id="fc4fd-154">Además, un recurso no tiene que estar basado en un solo elemento de datos físicos.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-154">A resource does not have to be based on a single physical data item.</span></span> <span data-ttu-id="fc4fd-155">Por ejemplo, un recurso de pedido podría implementarse internamente en forma de varias tablas de una base de datos relacional, pero presentarse al cliente como una única entidad.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-155">For example, an order resource might be implemented internally as several tables in a relational database, but presented to the client as a single entity.</span></span> <span data-ttu-id="fc4fd-156">Evite la creación de API que simplemente reflejen la estructura interna de una base de datos.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-156">Avoid creating APIs that simply mirror the internal structure of a database.</span></span> <span data-ttu-id="fc4fd-157">La finalidad de REST es modelar entidades y las operaciones que una aplicación puede realizar sobre esas entidades.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-157">The purpose of REST is to model entities and the operations that an application can perform on those entities.</span></span> <span data-ttu-id="fc4fd-158">Un cliente no debe exponerse a la implementación interna.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-158">A client should not be exposed to the internal implementation.</span></span>

<span data-ttu-id="fc4fd-159">Las entidades a menudo se agrupan en colecciones (pedidos, clientes).</span><span class="sxs-lookup"><span data-stu-id="fc4fd-159">Entities are often grouped together into collections (orders, customers).</span></span> <span data-ttu-id="fc4fd-160">Una colección es un recurso independiente del elemento de la colección y debe tener su propio URI.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-160">A collection is a separate resource from the item within the collection, and should have its own URI.</span></span> <span data-ttu-id="fc4fd-161">Por ejemplo, el siguiente URI podría representar la colección de pedidos:</span><span class="sxs-lookup"><span data-stu-id="fc4fd-161">For example, the following URI might represent the collection of orders:</span></span> 

```HTTP
http://adventure-works.com/orders
```

<span data-ttu-id="fc4fd-162">Al enviar una solicitud HTTP GET al URI de la colección, se recupera una lista de elementos de la colección.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-162">Sending an HTTP GET request to the collection URI retrieves a list of items in the collection.</span></span> <span data-ttu-id="fc4fd-163">Cada elemento de la colección también tiene su propio URI único.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-163">Each item in the collection also has its own unique URI.</span></span> <span data-ttu-id="fc4fd-164">Una solicitud HTTP GET al URI del elemento devuelve los detalles de ese elemento.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-164">An HTTP GET request to the item's URI returns the details of that item.</span></span> 

<span data-ttu-id="fc4fd-165">Adopte una convención de nomenclatura coherente para los URI.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-165">Adopt a consistent naming convention in URIs.</span></span> <span data-ttu-id="fc4fd-166">En general, resulta útil usar nombres plurales que hagan referencia a colecciones.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-166">In general, it helps to use plural nouns for URIs that reference collections.</span></span> <span data-ttu-id="fc4fd-167">Es recomendable organizar los URI de colecciones y elementos en una jerarquía.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-167">It's a good practice to organize URIs for collections and items into a hierarchy.</span></span> <span data-ttu-id="fc4fd-168">Por ejemplo, `/customers` es la ruta de acceso a la colección de clientes y `/customers/5` es la ruta de acceso al cliente con el identificador igual a 5.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-168">For example, `/customers` is the path to the customers collection, and `/customers/5` is the path to the customer with ID equal to 5.</span></span> <span data-ttu-id="fc4fd-169">Este enfoque ayuda a mantener el carácter intuitivo de la API web.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-169">This approach helps to keep the web API intuitive.</span></span> <span data-ttu-id="fc4fd-170">Además, muchas plataformas de API web pueden enrutar solicitudes basadas en rutas de acceso a URI con parámetros, así que podría definir una ruta para la ruta de acceso `/customers/{id}`.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-170">Also, many web API frameworks can route requests based on parameterized URI paths, so you could define a route for the path `/customers/{id}`.</span></span>

<span data-ttu-id="fc4fd-171">Considere también las relaciones entre los diferentes tipos de recursos y cómo podría exponer estas asociaciones.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-171">Also consider the relationships between different types of resources and how you might expose these associations.</span></span> <span data-ttu-id="fc4fd-172">Por ejemplo, `/customers/5/orders` podría representar todos los pedidos del cliente 5.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-172">For example, the `/customers/5/orders` might represent all of the orders for customer 5.</span></span> <span data-ttu-id="fc4fd-173">También puede ir en la otra dirección y representar la asociación de un pedido con un cliente con un URI como `/orders/99/customer`.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-173">You could also go in the other direction, and represent the association from an order back to a customer with a URI such as `/orders/99/customer`.</span></span> <span data-ttu-id="fc4fd-174">Sin embargo, este modelo llevado demasiado lejos puede ser difícil de implementar.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-174">However, extending this model too far can become cumbersome to implement.</span></span> <span data-ttu-id="fc4fd-175">Una solución mejor es proporcionar vínculos navegables a los recursos asociados en el cuerpo del mensaje de respuesta HTTP.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-175">A better solution is to provide navigable links to associated resources in the body of the HTTP response message.</span></span> <span data-ttu-id="fc4fd-176">Este mecanismo se describe con más detalle en la sección [Uso del enfoque HATEOAS para permitir la navegación a los recursos relacionados](#using-the-hateoas-approach-to-enable-navigation-to-related-resources) más adelante.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-176">This mechanism is described in more detail in the section [Using the HATEOAS Approach to Enable Navigation To Related Resources later](#using-the-hateoas-approach-to-enable-navigation-to-related-resources).</span></span>

<span data-ttu-id="fc4fd-177">En sistemas más complejos, puede resultar tentador proporcionar identificadores URI que permitan que un cliente navegue por varios niveles de relaciones, como `/customers/1/orders/99/products`.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-177">In more complex systems, it can be tempting to provide URIs that enable a client to navigate through several levels of relationships, such as `/customers/1/orders/99/products`.</span></span> <span data-ttu-id="fc4fd-178">Sin embargo, este nivel de complejidad puede ser difícil de mantener y es inflexible si las relaciones entre los recursos cambian en el futuro.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-178">However, this level of complexity can be difficult to maintain and is inflexible if the relationships between resources change in the future.</span></span> <span data-ttu-id="fc4fd-179">En su lugar, intente que los identificadores URI sean relativamente sencillos.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-179">Instead, try to keep URIs relatively simple.</span></span> <span data-ttu-id="fc4fd-180">Una vez que una aplicación tiene una referencia a un recurso, debería ser posible usar esta referencia para buscar los elementos relacionados con ese recurso.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-180">Once an application has a reference to a resource, it should be possible to use this reference to find items related to that resource.</span></span> <span data-ttu-id="fc4fd-181">La consulta anterior se puede reemplazar por el URI `/customers/1/orders` para buscar todos los pedidos del cliente 1 y, a continuación, por `/orders/99/products` para buscar los productos de este pedido.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-181">The preceding query can be replaced with the URI `/customers/1/orders` to find all the orders for customer 1, and then `/orders/99/products` to find the products in this order.</span></span>

> [!TIP]
> <span data-ttu-id="fc4fd-182">Evite el uso de URI de recursos más complejos que *collection/item/collection*.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-182">Avoid requiring resource URIs more complex than *collection/item/collection*.</span></span>

<span data-ttu-id="fc4fd-183">Otro factor es que todas las solicitudes web imponen una carga en el servidor web.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-183">Another factor is that all web requests impose a load on the web server.</span></span> <span data-ttu-id="fc4fd-184">Cuantas más solicitudes, más grande la carga.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-184">The more requests, the bigger the load.</span></span> <span data-ttu-id="fc4fd-185">Por lo tanto, intente evitar las API web "locuaces" que exponen un gran número de recursos pequeños.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-185">Therefore, try to avoid "chatty" web APIs that expose a large number of small resources.</span></span> <span data-ttu-id="fc4fd-186">Una API de este tipo puede requerir que una aplicación cliente envíe varias solicitudes para encontrar todos los datos que necesita.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-186">Such an API may require a client application to send multiple requests to find all of the data that it requires.</span></span> <span data-ttu-id="fc4fd-187">En su lugar, puede que desee desnormalizar los datos y combinar la información relacionada en recursos más grandes que se puedan recuperar con una única solicitud.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-187">Instead, you might want to denormalize the data and combine related information into bigger resources that can be retrieved with a single request.</span></span> <span data-ttu-id="fc4fd-188">Sin embargo, debe equilibrar este enfoque con la sobrecarga de la captura de datos que el cliente no necesita.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-188">However, you need to balance this approach against the overhead of fetching data that the client doesn't need.</span></span> <span data-ttu-id="fc4fd-189">Recuperar objetos grandes puede aumentar la latencia de una solicitud y generar costos de ancho de banda adicionales.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-189">Retrieving large objects can increase the latency of a request and incur additional bandwidth costs.</span></span> <span data-ttu-id="fc4fd-190">Para más información sobre estos antipatrones de rendimiento, consulte [Antipatrón Chatty I/O](../antipatterns/chatty-io/index.md) y [Extraneous Fetching](../antipatterns/extraneous-fetching/index.md).</span><span class="sxs-lookup"><span data-stu-id="fc4fd-190">For more information about these performance antipatterns, see [Chatty I/O](../antipatterns/chatty-io/index.md) and [Extraneous Fetching](../antipatterns/extraneous-fetching/index.md).</span></span>

<span data-ttu-id="fc4fd-191">Evite la introducción de dependencias entre la API web y los orígenes de datos subyacentes.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-191">Avoid introducing dependencies between the web API and the underlying data sources.</span></span> <span data-ttu-id="fc4fd-192">Por ejemplo, si los datos están almacenados en una base de datos relacional, la API web no necesita exponer cada una de las tablas como una colección de recursos.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-192">For example, if your data is stored in a relational database, the web API doesn't need to expose each table as a collection of resources.</span></span> <span data-ttu-id="fc4fd-193">De hecho, ese sea probablemente un mal diseño.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-193">In fact, that's probably a poor design.</span></span> <span data-ttu-id="fc4fd-194">En su lugar, considere la API web como una abstracción de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-194">Instead, think of the web API as an abstraction of the database.</span></span> <span data-ttu-id="fc4fd-195">Si es necesario, introduzca una capa de asignación entre la base de datos y la API web.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-195">If necessary, introduce a mapping layer between the database and the web API.</span></span> <span data-ttu-id="fc4fd-196">De este modo, las aplicaciones cliente se aíslan de los cambios en el esquema de base de datos subyacente.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-196">That way, client applications are isolated from changes to the underlying database scheme.</span></span>

<span data-ttu-id="fc4fd-197">Por último, no sería posible asignar cada operación que implementa una API web a un recurso concreto.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-197">Finally, it might not be possible to map every operation implemented by a web API to a specific resource.</span></span> <span data-ttu-id="fc4fd-198">Tales escenarios *sin recursos* se pueden administrar mediante solicitudes HTTP que invocan una función y devuelven los resultados en forma de un mensaje de respuesta HTTP.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-198">You can handle such *non-resource* scenarios through HTTP requests that invoke a function and return the results as an HTTP response message.</span></span> <span data-ttu-id="fc4fd-199">Por ejemplo, una API web que implementa operaciones sencillas de tipo calculadora como sumar y restar podría proporcionar identificadores URI que expongan estas operaciones como seudorecursos y usar la cadena de consulta para especificar los parámetros necesarios.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-199">For example, a web API that implements simple calculator operations such as add and subtract could provide URIs that expose these operations as pseudo resources and use the query string to specify the parameters required.</span></span> <span data-ttu-id="fc4fd-200">Por ejemplo, una solicitud GET al URI */add?operand1=99&operand2=1* devolvería un mensaje de respuesta donde el cuerpo contiene el valor 100.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-200">For example a GET request to the URI */add?operand1=99&operand2=1* would return a response message with the body containing the value 100.</span></span> <span data-ttu-id="fc4fd-201">Sin embargo, únicamente use estas formas de URI con moderación.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-201">However, only use these forms of URIs sparingly.</span></span>

## <a name="define-operations-in-terms-of-http-methods"></a><span data-ttu-id="fc4fd-202">Definición de operaciones en términos de métodos HTTP</span><span class="sxs-lookup"><span data-stu-id="fc4fd-202">Define operations in terms of HTTP methods</span></span>

<span data-ttu-id="fc4fd-203">El protocolo HTTP define una serie de métodos que asignan significado semántico a una solicitud.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-203">The HTTP protocol defines a number of methods that assign semantic meaning to a request.</span></span> <span data-ttu-id="fc4fd-204">Los métodos HTTP comunes que usan la mayoría de las API web RESTful son:</span><span class="sxs-lookup"><span data-stu-id="fc4fd-204">The common HTTP methods used by most RESTful web APIs are:</span></span>

* <span data-ttu-id="fc4fd-205">**GET** recupera una representación del recurso en el URI especificado.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-205">**GET** retrieves a representation of the resource at the specified URI.</span></span> <span data-ttu-id="fc4fd-206">El cuerpo del mensaje de respuesta contiene los detalles del recurso solicitado.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-206">The body of the response message contains the details of the requested resource.</span></span>
* <span data-ttu-id="fc4fd-207">**POST** crea un nuevo recurso en el URI especificado.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-207">**POST** creates a new resource at the specified URI.</span></span> <span data-ttu-id="fc4fd-208">El cuerpo del mensaje de solicitud proporciona los detalles del nuevo recurso.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-208">The body of the request message provides the details of the new resource.</span></span> <span data-ttu-id="fc4fd-209">Tenga en cuenta que POST también puede usarse para desencadenar operaciones que en realidad no crean recursos.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-209">Note that POST can also be used to trigger operations that don't actually create resources.</span></span>
* <span data-ttu-id="fc4fd-210">**PUT** crea o sustituye el recurso en el URI especificado.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-210">**PUT** either creates or replaces the resource at the specified URI.</span></span> <span data-ttu-id="fc4fd-211">El cuerpo del mensaje de solicitud especifica el recurso que se va a crear o actualizar.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-211">The body of the request message specifies the resource to be created or updated.</span></span>
* <span data-ttu-id="fc4fd-212">**PATCH** realiza una actualización parcial de un recurso.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-212">**PATCH** performs a partial update of a resource.</span></span> <span data-ttu-id="fc4fd-213">El cuerpo de la solicitud especifica el conjunto de cambios que se aplican al recurso.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-213">The request body specifies the set of changes to apply to the resource.</span></span>
* <span data-ttu-id="fc4fd-214">**DELETE** quita el recurso en el URI especificado.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-214">**DELETE** removes the resource at the specified URI.</span></span>

<span data-ttu-id="fc4fd-215">El efecto de una solicitud específica debería depender de si el recurso es una colección o un elemento individual.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-215">The effect of a specific request should depend on whether the resource is a collection or an individual item.</span></span> <span data-ttu-id="fc4fd-216">En la tabla siguiente se resumen las convenciones comunes adoptadas por la mayoría de las implementaciones de RESTful usando el ejemplo de comercio electrónico.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-216">The following table summarizes the common conventions adopted by most RESTful implementations using the ecommerce example.</span></span> <span data-ttu-id="fc4fd-217">Tenga en cuenta que no todas estas solicitudes se pueden implementar; depende de cada situación específica.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-217">Note that not all of these requests might be implemented; it depends on the specific scenario.</span></span>

| <span data-ttu-id="fc4fd-218">**Recurso**</span><span class="sxs-lookup"><span data-stu-id="fc4fd-218">**Resource**</span></span> | <span data-ttu-id="fc4fd-219">**POST**</span><span class="sxs-lookup"><span data-stu-id="fc4fd-219">**POST**</span></span> | <span data-ttu-id="fc4fd-220">**GET**</span><span class="sxs-lookup"><span data-stu-id="fc4fd-220">**GET**</span></span> | <span data-ttu-id="fc4fd-221">**PUT**</span><span class="sxs-lookup"><span data-stu-id="fc4fd-221">**PUT**</span></span> | <span data-ttu-id="fc4fd-222">**DELETE**</span><span class="sxs-lookup"><span data-stu-id="fc4fd-222">**DELETE**</span></span> |
| --- | --- | --- | --- | --- |
| <span data-ttu-id="fc4fd-223">/customers</span><span class="sxs-lookup"><span data-stu-id="fc4fd-223">/customers</span></span> |<span data-ttu-id="fc4fd-224">Crear un nuevo cliente</span><span class="sxs-lookup"><span data-stu-id="fc4fd-224">Create a new customer</span></span> |<span data-ttu-id="fc4fd-225">Recuperar todos los clientes</span><span class="sxs-lookup"><span data-stu-id="fc4fd-225">Retrieve all customers</span></span> |<span data-ttu-id="fc4fd-226">Actualización masiva de clientes</span><span class="sxs-lookup"><span data-stu-id="fc4fd-226">Bulk update of customers</span></span> |<span data-ttu-id="fc4fd-227">Eliminar todos los clientes</span><span class="sxs-lookup"><span data-stu-id="fc4fd-227">Remove all customers</span></span> |
| <span data-ttu-id="fc4fd-228">/customers/1</span><span class="sxs-lookup"><span data-stu-id="fc4fd-228">/customers/1</span></span> |<span data-ttu-id="fc4fd-229">Error</span><span class="sxs-lookup"><span data-stu-id="fc4fd-229">Error</span></span> |<span data-ttu-id="fc4fd-230">Recuperar los detalles del cliente 1</span><span class="sxs-lookup"><span data-stu-id="fc4fd-230">Retrieve the details for customer 1</span></span> |<span data-ttu-id="fc4fd-231">Actualizar los detalles del cliente 1 si existe</span><span class="sxs-lookup"><span data-stu-id="fc4fd-231">Update the details of customer 1 if it exists</span></span> |<span data-ttu-id="fc4fd-232">Quitar al cliente 1</span><span class="sxs-lookup"><span data-stu-id="fc4fd-232">Remove customer 1</span></span> |
| <span data-ttu-id="fc4fd-233">/customers/1/orders</span><span class="sxs-lookup"><span data-stu-id="fc4fd-233">/customers/1/orders</span></span> |<span data-ttu-id="fc4fd-234">Crear un nuevo pedido para el cliente 1</span><span class="sxs-lookup"><span data-stu-id="fc4fd-234">Create a new order for customer 1</span></span> |<span data-ttu-id="fc4fd-235">Recuperar todos los pedidos del cliente 1</span><span class="sxs-lookup"><span data-stu-id="fc4fd-235">Retrieve all orders for customer 1</span></span> |<span data-ttu-id="fc4fd-236">Actualización masiva de pedidos del cliente 1</span><span class="sxs-lookup"><span data-stu-id="fc4fd-236">Bulk update of orders for customer 1</span></span> |<span data-ttu-id="fc4fd-237">Recuperar todos los pedidos del cliente 1</span><span class="sxs-lookup"><span data-stu-id="fc4fd-237">Remove all orders for customer 1</span></span> |

<span data-ttu-id="fc4fd-238">Las diferencias entre POST, PUT y PATCH pueden resultar confusas.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-238">The differences between POST, PUT, and PATCH can be confusing.</span></span>

- <span data-ttu-id="fc4fd-239">Una solicitud POST crea un recurso.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-239">A POST request creates a resource.</span></span> <span data-ttu-id="fc4fd-240">El servidor le asigna un URI y devuelve ese URI al cliente.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-240">The server assigns a URI for the new resource, and returns that URI to the client.</span></span> <span data-ttu-id="fc4fd-241">En el modelo REST, con frecuencia se aplican solicitudes POST a colecciones.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-241">In the REST model, you frequently apply POST requests to collections.</span></span> <span data-ttu-id="fc4fd-242">El nuevo recurso se agrega a la colección.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-242">The new resource is added to the collection.</span></span> <span data-ttu-id="fc4fd-243">Una solicitud POST se puede usar también para enviar datos a un recurso existente para su procesamiento, sin que se cree ningún nuevo recurso.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-243">A POST request can also be used to submit data for processing to an existing resource, without any new resource being created.</span></span>

- <span data-ttu-id="fc4fd-244">Una solicitud PUT crea un recurso *o* actualiza un recurso existente.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-244">A PUT request creates a resource *or* updates an existing resource.</span></span> <span data-ttu-id="fc4fd-245">El cliente especifica el URI del recurso.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-245">The client specifies the URI for the resource.</span></span> <span data-ttu-id="fc4fd-246">El cuerpo de la solicitud contiene una representación completa del recurso.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-246">The request body contains a complete representation of the resource.</span></span> <span data-ttu-id="fc4fd-247">Si ya existe un recurso con este URI, se reemplaza.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-247">If a resource with this URI already exists, it is replaced.</span></span> <span data-ttu-id="fc4fd-248">De lo contrario se crea un nuevo recurso, si el servidor así lo admite.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-248">Otherwise a new resource is created, if the server supports doing so.</span></span> <span data-ttu-id="fc4fd-249">Las solicitudes PUT se aplican con más frecuencia a recursos que son elementos individuales, por ejemplo, un cliente especifico, en lugar de colecciones.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-249">PUT requests are most frequently applied to resources that are individual items, such as a specific customer, rather than collections.</span></span> <span data-ttu-id="fc4fd-250">Un servidor puede admitir actualizaciones, pero no la creación mediante PUT,</span><span class="sxs-lookup"><span data-stu-id="fc4fd-250">A server might support updates but not creation via PUT.</span></span> <span data-ttu-id="fc4fd-251">si ello depende de que el cliente pueda asignar un URI de manera significativa a un recurso antes de que exista.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-251">Whether to support creation via PUT depends on whether the client can meaningfully assign a URI to a resource before it exists.</span></span> <span data-ttu-id="fc4fd-252">Si este no es el caso, use POST para crear recursos y PUT o PATCH para actualizarlos.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-252">If not, then use POST to create resources and PUT or PATCH to update.</span></span>

- <span data-ttu-id="fc4fd-253">Una solicitud PATCH realiza una *actualización parcial* de un recurso existente.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-253">A PATCH request performs a *partial update* to an existing resource.</span></span> <span data-ttu-id="fc4fd-254">El cliente especifica el URI del recurso.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-254">The client specifies the URI for the resource.</span></span> <span data-ttu-id="fc4fd-255">El cuerpo de la solicitud especifica un conjunto de *cambios* para aplicar al recurso.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-255">The request body specifies a set of *changes* to apply to the resource.</span></span> <span data-ttu-id="fc4fd-256">Este enfoque puede ser más eficaz que el uso de PUT, dado que el cliente solo envía los cambios, no la representación completa del recurso.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-256">This can be more efficient than using PUT, because the client only sends the changes, not the entire representation of the resource.</span></span> <span data-ttu-id="fc4fd-257">Técnicamente PATCH puede crear también un nuevo recurso (mediante la especificación de un conjunto de actualizaciones en un recurso "nulo"), si el servidor así lo admite.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-257">Technically PATCH can also create a new resource (by specifying a set of updates to a "null" resource), if the server supports this.</span></span> 

<span data-ttu-id="fc4fd-258">Las solicitudes PUT deben ser idempotentes.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-258">PUT requests must be idempotent.</span></span> <span data-ttu-id="fc4fd-259">Si un cliente envía la misma solicitud PUT varias veces, los resultados siempre deben ser los mismos (el mismo recurso se modificará con los mismos valores).</span><span class="sxs-lookup"><span data-stu-id="fc4fd-259">If a client submits the same PUT request multiple times, the results should always be the same (the same resource will be modified with the same values).</span></span> <span data-ttu-id="fc4fd-260">No se garantiza que las solicitudes POST y PATCH sean idempotentes.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-260">POST and PATCH requests are not guaranteed to be idempotent.</span></span>

## <a name="conform-to-http-semantics"></a><span data-ttu-id="fc4fd-261">Conformidad con la semántica HTTP</span><span class="sxs-lookup"><span data-stu-id="fc4fd-261">Conform to HTTP semantics</span></span>

<span data-ttu-id="fc4fd-262">En esta sección se describen algunas consideraciones habituales para diseñar una API que guarde conformidad con la especificación HTTP.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-262">This section describes some typical considerations for designing an API that conforms to the HTTP specification.</span></span> <span data-ttu-id="fc4fd-263">Sin embargo, no se tratan todos los posibles detalles o escenarios.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-263">However, it doesn't cover every possible detail or scenario.</span></span> <span data-ttu-id="fc4fd-264">En caso de duda, consulte las especificaciones HTTP.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-264">When in doubt, consult the HTTP specifications.</span></span>

### <a name="media-types"></a><span data-ttu-id="fc4fd-265">Tipos de medios</span><span class="sxs-lookup"><span data-stu-id="fc4fd-265">Media types</span></span>

<span data-ttu-id="fc4fd-266">Como se mencionó anteriormente, los clientes y servidores intercambian representaciones de recursos.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-266">As mentioned earlier, clients and servers exchange representations of resources.</span></span> <span data-ttu-id="fc4fd-267">Por ejemplo, en una solicitud POST, el cuerpo de la solicitud contiene una representación del recurso que se va a crear.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-267">For example, in a POST request, the request body contains a representation of the resource to create.</span></span> <span data-ttu-id="fc4fd-268">En una solicitud GET, el cuerpo de respuesta contiene una representación del recurso capturado.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-268">In a GET request, the response body contains a representation of the fetched resource.</span></span>

<span data-ttu-id="fc4fd-269">En el protocolo HTTP, los formatos se especifican mediante el uso de *tipos de medios*, también denominados tipos MIME.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-269">In the HTTP protocol, formats are specified through the use of *media types*, also called MIME types.</span></span> <span data-ttu-id="fc4fd-270">En el caso de datos no binarios, la mayoría de las API web admiten JSON (tipo de medio = application/json) y posiblemente XML (tipo de medio = application/xml).</span><span class="sxs-lookup"><span data-stu-id="fc4fd-270">For non-binary data, most web APIs support JSON (media type = application/json) and possibly XML (media type = application/xml).</span></span> 

<span data-ttu-id="fc4fd-271">El encabezado Content-Type en una solicitud o respuesta especifica el formato de la representación.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-271">The Content-Type header in a request or response specifies the format of the representation.</span></span> <span data-ttu-id="fc4fd-272">Este es un ejemplo de una solicitud POST que incluye datos JSON:</span><span class="sxs-lookup"><span data-stu-id="fc4fd-272">Here is an example of a POST request that includes JSON data:</span></span>

```HTTP
POST http://adventure-works.com/orders HTTP/1.1
Content-Type: application/json; charset=utf-8
Content-Length: 57

{"Id":1,"Name":"Gizmo","Category":"Widgets","Price":1.99}
```

<span data-ttu-id="fc4fd-273">Si el servidor no admite el tipo de medio, debe devolver el código de estado HTTP 415 (tipo de medio no compatible).</span><span class="sxs-lookup"><span data-stu-id="fc4fd-273">If the server doesn't support the media type, it should return HTTP status code 415 (Unsupported Media Type).</span></span>

<span data-ttu-id="fc4fd-274">Una solicitud de cliente puede incluir un encabezado Accept que contenga una lista de tipos de medios que el cliente aceptará del servidor en el mensaje de respuesta.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-274">A client request can include an Accept header that contains a list of media types the client will accept from the server in the response message.</span></span> <span data-ttu-id="fc4fd-275">Por ejemplo: </span><span class="sxs-lookup"><span data-stu-id="fc4fd-275">For example:</span></span>

```HTTP
GET http://adventure-works.com/orders/2 HTTP/1.1
Accept: application/json
```

<span data-ttu-id="fc4fd-276">Si el servidor no puede encontrar la correspondencia con ninguno de los tipos de medios enumerados, debe devolver el código de estado HTTP 406 (No aceptable).</span><span class="sxs-lookup"><span data-stu-id="fc4fd-276">If the server cannot match any of the media type(s) listed, it should return HTTP status code 406 (Not Acceptable).</span></span> 

### <a name="get-methods"></a><span data-ttu-id="fc4fd-277">Métodos GET</span><span class="sxs-lookup"><span data-stu-id="fc4fd-277">GET methods</span></span>

<span data-ttu-id="fc4fd-278">Normalmente, un método GET correcto devuelve el código de estado HTTP 200 (Correcto).</span><span class="sxs-lookup"><span data-stu-id="fc4fd-278">A successful GET method typically returns HTTP status code 200 (OK).</span></span> <span data-ttu-id="fc4fd-279">Si no se encuentra el recurso, el método debe devolver 404 (No encontrado).</span><span class="sxs-lookup"><span data-stu-id="fc4fd-279">If the resource cannot be found, the method should return 404 (Not Found).</span></span>

### <a name="post-methods"></a><span data-ttu-id="fc4fd-280">Métodos POST</span><span class="sxs-lookup"><span data-stu-id="fc4fd-280">POST methods</span></span>

<span data-ttu-id="fc4fd-281">Si un método POST crea un nuevo recurso, devuelve el código de estado HTTP 201 (Creado).</span><span class="sxs-lookup"><span data-stu-id="fc4fd-281">If a POST method creates a new resource, it returns HTTP status code 201 (Created).</span></span> <span data-ttu-id="fc4fd-282">El URI del nuevo recurso se incluye en el encabezado Location de la respuesta.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-282">The URI of the new resource is included in the Location header of the response.</span></span> <span data-ttu-id="fc4fd-283">El cuerpo de respuesta contiene una representación del recurso.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-283">The response body contains a representation of the resource.</span></span>

<span data-ttu-id="fc4fd-284">Si el método realiza algún procesamiento pero no crea un nuevo recurso, puede devolver el código de estado HTTP 200 e incluir el resultado de la operación en el cuerpo de respuesta.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-284">If the method does some processing but does not create a new resource, the method can return HTTP status code 200 and include the result of the operation in the response body.</span></span> <span data-ttu-id="fc4fd-285">O bien, si no hay ningún resultado para devolver, el método puede devolver el código de estado HTTP 204 (Sin contenido) sin cuerpo de respuesta.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-285">Alternatively, if there is no result to return, the method can return HTTP status code 204 (No Content) with no response body.</span></span>

<span data-ttu-id="fc4fd-286">Si el cliente coloca datos no válidos en la solicitud, el servidor debe devolver el código de estado HTTP 400 (Solicitud incorrecta).</span><span class="sxs-lookup"><span data-stu-id="fc4fd-286">If the client puts invalid data into the request, the server should return HTTP status code 400 (Bad Request).</span></span> <span data-ttu-id="fc4fd-287">El cuerpo de respuesta puede contener información adicional sobre el error o un vínculo a un URI que proporciona más detalles.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-287">The response body can contain additional information about the error or a link to a URI that provides more details.</span></span>

### <a name="put-methods"></a><span data-ttu-id="fc4fd-288">Métodos PUT</span><span class="sxs-lookup"><span data-stu-id="fc4fd-288">PUT methods</span></span>

<span data-ttu-id="fc4fd-289">Si un método PUT crea un nuevo recurso, devuelve el código de estado HTTP 201 (Creado), al igual que con un método POST.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-289">If a PUT method creates a new resource, it returns HTTP status code 201 (Created), as with a POST method.</span></span> <span data-ttu-id="fc4fd-290">Si el método actualiza un recurso existente, devuelve 200 (Correcto) o 204 (Sin contenido).</span><span class="sxs-lookup"><span data-stu-id="fc4fd-290">If the method updates an existing resource, it returns either 200 (OK) or 204 (No Content).</span></span> <span data-ttu-id="fc4fd-291">En algunos casos, no será posible actualizar un recurso existente.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-291">In some cases, it might not be possible to update an existing resource.</span></span> <span data-ttu-id="fc4fd-292">En ese caso, considere la posibilidad de devolver el código de estado HTTP 409 (Conflicto).</span><span class="sxs-lookup"><span data-stu-id="fc4fd-292">In that case, consider returning HTTP status code 409 (Conflict).</span></span> 

<span data-ttu-id="fc4fd-293">Considere la posibilidad de implementar operaciones HTTP PUT masivas que pueden procesar por lotes las actualizaciones de varios recursos de una colección.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-293">Consider implementing bulk HTTP PUT operations that can batch updates to multiple resources in a collection.</span></span> <span data-ttu-id="fc4fd-294">La solicitud PUT debe especificar el URI de la colección y el cuerpo de solicitud debe especificar los detalles de los recursos que se van a modificar.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-294">The PUT request should specify the URI of the collection, and the request body should specify the details of the resources to be modified.</span></span> <span data-ttu-id="fc4fd-295">Este enfoque puede ayudar a reducir el intercambio de mensajes y mejorar el rendimiento.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-295">This approach can help to reduce chattiness and improve performance.</span></span>

### <a name="patch-methods"></a><span data-ttu-id="fc4fd-296">Métodos PATCH</span><span class="sxs-lookup"><span data-stu-id="fc4fd-296">PATCH methods</span></span>

<span data-ttu-id="fc4fd-297">Con una solicitud PATCH, el cliente envía un conjunto de actualizaciones a un recurso existente, en forma de un *documento de revisión*.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-297">With a PATCH request, the client sends a set of updates to an existing resource, in the form of a *patch document*.</span></span> <span data-ttu-id="fc4fd-298">El servidor procesa el documento de revisión para realizar la actualización.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-298">The server processes the patch document to perform the update.</span></span> <span data-ttu-id="fc4fd-299">El documento de revisión no describe el recurso completo, solo un conjunto de cambios para aplicar.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-299">The patch document doesn't describe the whole resource, only a set of changes to apply.</span></span> <span data-ttu-id="fc4fd-300">La especificación del método PATCH ([RFC 5789](https://tools.ietf.org/html/rfc5789)) no define un formato determinado de documentos de revisión.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-300">The specification for the PATCH method ([RFC 5789](https://tools.ietf.org/html/rfc5789)) doesn't define a particular format for patch documents.</span></span> <span data-ttu-id="fc4fd-301">El formato debe deducirse del tipo de medio de la solicitud.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-301">The format must be inferred from the media type in the request.</span></span>

<span data-ttu-id="fc4fd-302">JSON es probablemente el formato de datos más común para las API web.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-302">JSON is probably the most common data format for web APIs.</span></span> <span data-ttu-id="fc4fd-303">Hay dos formatos principales de revisión basados en JSON, que se conocen como *revisión JSON* y *revisión de combinación JSON*.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-303">There are two main JSON-based patch formats, called *JSON patch* and *JSON merge patch*.</span></span>

<span data-ttu-id="fc4fd-304">La revisión de combinación JSON es algo más simple.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-304">JSON merge patch is somewhat simpler.</span></span> <span data-ttu-id="fc4fd-305">El documento de revisión tiene la misma estructura que el recurso original JSON, pero incluye solo el subconjunto de campos que se deben cambiar o agregar.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-305">The patch document has the same structure as the original JSON resource, but includes just the subset of fields that should be changed or added.</span></span> <span data-ttu-id="fc4fd-306">Además, se puede eliminar un campo mediante la especificación de `null` como valor del campo en el documento de revisión.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-306">In addition, a field can be deleted by specifying `null` for the field value in the patch document.</span></span> <span data-ttu-id="fc4fd-307">(Eso significa que la revisión de combinación no es adecuada si el recurso original puede tener valores null explícitos).</span><span class="sxs-lookup"><span data-stu-id="fc4fd-307">(That means merge patch is not suitable if the original resource can have explicit null values.)</span></span>

<span data-ttu-id="fc4fd-308">Por ejemplo, suponga que el recurso original tiene la representación JSON siguiente:</span><span class="sxs-lookup"><span data-stu-id="fc4fd-308">For example, suppose the original resource has the following JSON representation:</span></span>

```json
{ 
    "name":"gizmo",
    "category":"widgets",
    "color":"blue",
    "price":10
}
```

<span data-ttu-id="fc4fd-309">Esta es una posible revisión de combinación JSON para este recurso:</span><span class="sxs-lookup"><span data-stu-id="fc4fd-309">Here is a possible JSON merge patch for this resource:</span></span>

```json
{ 
    "price":12,
    "color":null,
    "size":"small"
}
```

<span data-ttu-id="fc4fd-310">Esta revisión indica al servidor que actualice el valor de "price", elimine el valor de "color" y agregue un valor para "size".</span><span class="sxs-lookup"><span data-stu-id="fc4fd-310">This tells the server to update "price", delete "color", and add "size".</span></span> <span data-ttu-id="fc4fd-311">"Name" y "category" no se modifican.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-311">"Name" and "category" are not modified.</span></span> <span data-ttu-id="fc4fd-312">Para conocer los detalles exactos de la revisión de combinación JSON, consulte [RFC 7396](https://tools.ietf.org/html/rfc7396).</span><span class="sxs-lookup"><span data-stu-id="fc4fd-312">For the exact details of JSON merge patch, see [RFC 7396](https://tools.ietf.org/html/rfc7396).</span></span> <span data-ttu-id="fc4fd-313">El tipo de medio para la revisión de combinación JSON es "application/merge-patch + json".</span><span class="sxs-lookup"><span data-stu-id="fc4fd-313">The media type for JSON merge patch is "application/merge-patch+json".</span></span>

<span data-ttu-id="fc4fd-314">La revisión de combinación no es adecuada si el recurso original puede contener valores null explícitos, debido al significado especial de `null` en el documento de revisión.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-314">Merge patch is not suitable if the original resource can contain explicit null values, due to the special meaning of `null` in the patch document.</span></span> <span data-ttu-id="fc4fd-315">Además, el documento de revisión no especifica el orden en el que el servidor debe aplicar las actualizaciones.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-315">Also, the patch document doesn't specify the order that the server should apply the updates.</span></span> <span data-ttu-id="fc4fd-316">Eso puede ser o no importante, según los datos y el dominio.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-316">That may or may not matter, depending on the data and the domain.</span></span> <span data-ttu-id="fc4fd-317">La revisión JSON, definida en [RFC 6902](https://tools.ietf.org/html/rfc6902), es más flexible.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-317">JSON patch, defined in [RFC 6902](https://tools.ietf.org/html/rfc6902), is more flexible.</span></span> <span data-ttu-id="fc4fd-318">Los cambios se especifican como una secuencia de operaciones que se aplicarán.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-318">It specifies the changes as a sequence of operations to apply.</span></span> <span data-ttu-id="fc4fd-319">Las operaciones incluyen agregar, quitar, reemplazar, copiar y probar (para validar los valores).</span><span class="sxs-lookup"><span data-stu-id="fc4fd-319">Operations include add, remove, replace, copy, and test (to validate values).</span></span> <span data-ttu-id="fc4fd-320">El tipo de medio para la revisión JSON es "application/json-patch + json".</span><span class="sxs-lookup"><span data-stu-id="fc4fd-320">The media type for JSON patch is "application/json-patch+json".</span></span>

<span data-ttu-id="fc4fd-321">Estas son algunas condiciones de error habituales que podrían producirse al procesar una solicitud PATCH, junto con el código de estado HTTP adecuado.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-321">Here are some typical error conditions that might be encountered when processing a PATCH request, along with the appropriate HTTP status code.</span></span>

| <span data-ttu-id="fc4fd-322">Condición de error</span><span class="sxs-lookup"><span data-stu-id="fc4fd-322">Error condition</span></span> | <span data-ttu-id="fc4fd-323">Código de estado HTTP</span><span class="sxs-lookup"><span data-stu-id="fc4fd-323">HTTP status code</span></span> |
|-----------|------------|
| <span data-ttu-id="fc4fd-324">No se admite el formato de documento de revisión.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-324">The patch document format isn't supported.</span></span> | <span data-ttu-id="fc4fd-325">415 (Tipo de medio no compatible)</span><span class="sxs-lookup"><span data-stu-id="fc4fd-325">415 (Unsupported Media Type)</span></span> |
| <span data-ttu-id="fc4fd-326">El documento de revisión tiene un formato incorrecto.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-326">Malformed patch document.</span></span> | <span data-ttu-id="fc4fd-327">400 (Solicitud incorrecta)</span><span class="sxs-lookup"><span data-stu-id="fc4fd-327">400 (Bad Request)</span></span> |
| <span data-ttu-id="fc4fd-328">El documento de revisión es válido, pero los cambios no se pueden aplicar al recurso en su estado actual.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-328">The patch document is valid, but the changes can't be applied to the resource in its current state.</span></span> | <span data-ttu-id="fc4fd-329">409 (Conflicto)</span><span class="sxs-lookup"><span data-stu-id="fc4fd-329">409 (Conflict)</span></span>

### <a name="delete-methods"></a><span data-ttu-id="fc4fd-330">Métodos DELETE</span><span class="sxs-lookup"><span data-stu-id="fc4fd-330">DELETE methods</span></span>

<span data-ttu-id="fc4fd-331">Si la operación de eliminación es correcta, el servidor web debe responder con el código de estado HTTP 204, que indica que el proceso se ha administrado correctamente, pero que el cuerpo de respuesta no contiene información adicional.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-331">If the delete operation is successful, the web server should respond with HTTP status code 204, indicating that the process has been successfully handled, but that the response body contains no further information.</span></span> <span data-ttu-id="fc4fd-332">Si el recurso no existe, el servidor web puede devolver HTTP 404 (No encontrado).</span><span class="sxs-lookup"><span data-stu-id="fc4fd-332">If the resource doesn't exist, the web server can return HTTP 404 (Not Found).</span></span>

### <a name="asynchronous-operations"></a><span data-ttu-id="fc4fd-333">Operaciones asincrónicas</span><span class="sxs-lookup"><span data-stu-id="fc4fd-333">Asynchronous operations</span></span>

<span data-ttu-id="fc4fd-334">En ocasiones, una operación POST, PUT, PATCH o DELETE podría requerir procesamiento que tarda algún tiempo en completarse.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-334">Sometimes a POST, PUT, PATCH, or DELETE operation might require processing that takes awhile to complete.</span></span> <span data-ttu-id="fc4fd-335">Si espera a que finalice antes de enviar una respuesta al cliente, podría producirse una latencia inaceptable.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-335">If you wait for completion before sending a response to the client, it may cause unacceptable latency.</span></span> <span data-ttu-id="fc4fd-336">En este caso, considere la posibilidad de realizar la operación asincrónica.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-336">If so, consider making the operation asynchronous.</span></span> <span data-ttu-id="fc4fd-337">Se devuelve el código de estado HTTP 202 (Aceptado) para indicar que se aceptó la solicitud para el procesamiento, pero no se ha completado.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-337">Return HTTP status code 202 (Accepted) to indicate the request was accepted for processing but is not completed.</span></span> 

<span data-ttu-id="fc4fd-338">Debe exponer un punto de conexión que devuelva el estado de una solicitud asincrónica, así el cliente puede supervisar el estado mediante el sondeo del punto de conexión de estado.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-338">You should expose an endpoint that returns the status of an asynchronous request, so the client can monitor the status by polling the status endpoint.</span></span> <span data-ttu-id="fc4fd-339">Incluya el URI del punto de conexión de estado en el encabezado Location de la respuesta 202.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-339">Include the URI of the status endpoint in the Location header of the 202 response.</span></span> <span data-ttu-id="fc4fd-340">Por ejemplo: </span><span class="sxs-lookup"><span data-stu-id="fc4fd-340">For example:</span></span>

```http
HTTP/1.1 202 Accepted
Location: /api/status/12345
```

<span data-ttu-id="fc4fd-341">Si el cliente envía una solicitud GET a este punto de conexión, la respuesta debe contener el estado actual de la solicitud.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-341">If the client sends a GET request to this endpoint, the response should contain the current status of the request.</span></span> <span data-ttu-id="fc4fd-342">Opcionalmente, también puede incluir un tiempo de finalización estimado o un vínculo para cancelar la operación.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-342">Optionally, it could also include an estimated time to completion or a link to cancel the operation.</span></span> 

```http
HTTP/1.1 200 OK
Content-Type: application/json

{
    "status":"In progress",
    "link": { "rel":"cancel", "method":"delete", "href":"/api/status/12345" }
}
```

<span data-ttu-id="fc4fd-343">Si la operación asincrónica crea un nuevo recurso, el punto de conexión de estado debe devolver el código de estado 303 (ver Otros) una vez completada la operación.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-343">If the asynchronous operation creates a new resource, the status endpoint should return status code 303 (See Other) after the operation completes.</span></span> <span data-ttu-id="fc4fd-344">En la respuesta 303, se incluye un encabezado Location que proporciona el URI del nuevo recurso:</span><span class="sxs-lookup"><span data-stu-id="fc4fd-344">In the 303 response, include a Location header that gives the URI of the new resource:</span></span>

```http
HTTP/1.1 303 See Other
Location: /api/orders/12345
```

<span data-ttu-id="fc4fd-345">Para más información, consulte [Asynchronous operations in REST](https://www.adayinthelifeof.nl/2011/06/02/asynchronous-operations-in-rest/) (Operaciones asincrónicas en REST).</span><span class="sxs-lookup"><span data-stu-id="fc4fd-345">For more information, see [Asynchronous operations in REST](https://www.adayinthelifeof.nl/2011/06/02/asynchronous-operations-in-rest/).</span></span>

## <a name="filter-and-paginate-data"></a><span data-ttu-id="fc4fd-346">Filtrado y paginación de los datos</span><span class="sxs-lookup"><span data-stu-id="fc4fd-346">Filter and paginate data</span></span>

<span data-ttu-id="fc4fd-347">Exponer una colección de recursos con un único URI puede dar lugar a que las aplicaciones capturen grandes cantidades de datos cuando solo se requiere un subconjunto de la información.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-347">Exposing a collection of resources through a single URI can lead to applications fetching large amounts of data when only a subset of the information is required.</span></span> <span data-ttu-id="fc4fd-348">Por ejemplo, suponga que una aplicación cliente necesita encontrar todos los pedidos con un costo cercano a un valor específico.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-348">For example, suppose a client application needs to find all orders with a cost over a specific value.</span></span> <span data-ttu-id="fc4fd-349">Se podrían recuperar todos los pedidos del URI */orders* y, a continuación, filtrar estos pedidos en el lado cliente.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-349">It might retrieve all orders from the */orders* URI and then filter these orders on the client side.</span></span> <span data-ttu-id="fc4fd-350">Es obvio que este proceso es muy ineficaz.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-350">Clearly this process is highly inefficient.</span></span> <span data-ttu-id="fc4fd-351">Se malgasta ancho de banda de red y potencia de procesamiento en el servidor que hospeda la API web.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-351">It wastes network bandwidth and processing power on the server hosting the web API.</span></span>

<span data-ttu-id="fc4fd-352">En su lugar, la API puede permitir que pase un filtro en la cadena de consulta del URI, como */orders?minCost=n*.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-352">Instead, the API can allow passing a filter in the query string of the URI, such as */orders?minCost=n*.</span></span> <span data-ttu-id="fc4fd-353">La API web es responsable entonces de analizar y administrar el parámetro `minCost` en la cadena de consulta y de devolver los resultados filtrados en el lado servidor.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-353">The web API is then responsible for parsing and handling the `minCost` parameter in the query string and returning the filtered results on the sever side.</span></span> 

<span data-ttu-id="fc4fd-354">Las solicitudes GET sobre recursos de la colección pueden devolver posiblemente un gran número de elementos.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-354">GET requests over collection resources can potentially return a large number of items.</span></span> <span data-ttu-id="fc4fd-355">Debe diseñar una API que limite la cantidad de datos devueltos en una única solicitud.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-355">You should design a web API to limit the amount of data returned by any single request.</span></span> <span data-ttu-id="fc4fd-356">Considere la posibilidad de admitir cadenas de consulta que especifiquen el número máximo de elementos que se van a recuperar y un desplazamiento inicial en la colección.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-356">Consider supporting query strings that specify the maximum number of items to retrieve and a starting offset into the collection.</span></span> <span data-ttu-id="fc4fd-357">Por ejemplo: </span><span class="sxs-lookup"><span data-stu-id="fc4fd-357">For example:</span></span>

```
/orders?limit=25&offset=50
```

<span data-ttu-id="fc4fd-358">Considere también la posibilidad de imponer un límite superior sobre el número de elementos devueltos, para ayudar a evitar ataques por denegación de servicio.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-358">Also consider imposing an upper limit on the number of items returned, to help prevent Denial of Service attacks.</span></span> <span data-ttu-id="fc4fd-359">Para ayudar a las aplicaciones cliente, las solicitudes GET que devuelven datos paginados deben incluir también alguna forma de metadatos que indiquen el número total de recursos disponibles en la colección.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-359">To assist client applications, GET requests that return paginated data should also include some form of metadata that indicate the total number of resources available in the collection.</span></span> <span data-ttu-id="fc4fd-360">También puede considerar otras estrategias de paginación inteligente; para obtener más información, consulte [Notas para el diseño de API: paginación inteligente](http://bizcoder.com/api-design-notes-smart-paging)</span><span class="sxs-lookup"><span data-stu-id="fc4fd-360">You might also consider other intelligent paging strategies; for more information, see [API Design Notes: Smart Paging](http://bizcoder.com/api-design-notes-smart-paging)</span></span>

<span data-ttu-id="fc4fd-361">Puede seguir una estrategia parecida para ordenar los datos que se capturan y proporcionar un parámetro de clasificación que tome un nombre de campo como valor, por ejemplo */orders?sort=ProductID*.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-361">You can use a similar strategy to sort data as it is fetched, by providing a sort parameter that takes a field name as the value, such as */orders?sort=ProductID*.</span></span> <span data-ttu-id="fc4fd-362">Sin embargo, este enfoque puede tener un efecto negativo sobre el almacenamiento en caché, dado que los parámetros de la cadena de consulta forman parte del identificador de recursos que se usa en muchas implementaciones de caché como llave a los datos en caché.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-362">However, this approach can have a negative effect on caching, because query string parameters form part of the resource identifier used by many cache implementations as the key to cached data.</span></span>

<span data-ttu-id="fc4fd-363">Puede ampliar este enfoque para limitar los campos devueltos para cada elemento, si cada elemento contiene una gran cantidad de datos.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-363">You can extend this approach to limit the fields returned for each item, if each item contains a large amount of data.</span></span> <span data-ttu-id="fc4fd-364">Por ejemplo, podría usar un parámetro de cadena de consulta que acepte una lista de campos delimitados por coma, como */orders?fields=ProductID,Quantity*.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-364">For example, you could use a query string parameter that accepts a comma-delimited list of fields, such as */orders?fields=ProductID,Quantity*.</span></span> 

<span data-ttu-id="fc4fd-365">Asigne a todos los parámetros opcionales de las cadenas de consulta valores predeterminados.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-365">Give all optional parameters in query strings meaningful defaults.</span></span> <span data-ttu-id="fc4fd-366">Por ejemplo, establezca el parámetro `limit` en 10 y el parámetro `offset` en 0 si implementa paginación, establezca el parámetro de ordenación en la clave del recurso si implementa ordenación y establezca el parámetro `fields` en todos los campos del recurso si admite proyecciones.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-366">For example, set the `limit` parameter to 10 and the `offset` parameter to 0 if you implement pagination, set the sort parameter to the key of the resource if you implement ordering, and set the `fields` parameter to all fields in the resource if you support projections.</span></span>

## <a name="support-partial-responses-for-large-binary-resources"></a><span data-ttu-id="fc4fd-367">Compatibilidad con respuestas parciales en recursos binarios de gran tamaño</span><span class="sxs-lookup"><span data-stu-id="fc4fd-367">Support partial responses for large binary resources</span></span>

<span data-ttu-id="fc4fd-368">Un recurso puede contener campos binarios de gran tamaño, como imágenes o archivos.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-368">A resource may contain large binary fields, such as files or images.</span></span> <span data-ttu-id="fc4fd-369">Para solucionar los problemas ocasionados por conexiones intermitentes y poco confiables y para mejorar los tiempos de respuesta, considere la posibilidad de permitir que estos recursos se recuperen en fragmentos.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-369">To overcome problems caused by unreliable and intermittent connections and to improve response times, consider enabling such resources to be retrieved in chunks.</span></span> <span data-ttu-id="fc4fd-370">Para ello, la API web debe admitir el encabezado Accept-Ranges en solicitudes GET de recursos de gran tamaño.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-370">To do this, the web API should support the Accept-Ranges header for GET requests for large resources.</span></span> <span data-ttu-id="fc4fd-371">Este encabezado indica que la operación GET admite solicitudes parciales.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-371">This header indicates that the GET operation supports partial requests.</span></span> <span data-ttu-id="fc4fd-372">La aplicación cliente puede enviar solicitudes GET que devuelven un subconjunto de un recurso, especificado como un intervalo de bytes.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-372">The client application can submit GET requests that return a subset of a resource, specified as a range of bytes.</span></span> 

<span data-ttu-id="fc4fd-373">Además, considere la posibilidad de implementar solicitudes HTTP HEAD para estos recursos.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-373">Also, consider implementing HTTP HEAD requests for these resources.</span></span> <span data-ttu-id="fc4fd-374">Una solicitud HEAD es similar a una solicitud GET, excepto que solo devuelve los encabezados HTTP que describen el recurso, con un cuerpo de mensaje vacío.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-374">A HEAD request is similar to a GET request, except that it only returns the HTTP headers that describe the resource, with an empty message body.</span></span> <span data-ttu-id="fc4fd-375">Una aplicación cliente puede emitir una solicitud HEAD para determinar si se debe capturar un recurso mediante solicitudes GET parciales.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-375">A client application can issue a HEAD request to determine whether to fetch a resource by using partial GET requests.</span></span> <span data-ttu-id="fc4fd-376">Por ejemplo: </span><span class="sxs-lookup"><span data-stu-id="fc4fd-376">For example:</span></span>

```HTTP
HEAD http://adventure-works.com/products/10?fields=productImage HTTP/1.1
```

<span data-ttu-id="fc4fd-377">Este es un ejemplo de un mensaje de respuesta:</span><span class="sxs-lookup"><span data-stu-id="fc4fd-377">Here is an example response message:</span></span> 

```HTTP
HTTP/1.1 200 OK

Accept-Ranges: bytes
Content-Type: image/jpeg
Content-Length: 4580
```

<span data-ttu-id="fc4fd-378">El encabezado Content-Length proporciona el tamaño total del recurso, y el encabezado Accept-Ranges indica que la operación GET correspondiente admite resultados parciales.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-378">The Content-Length header gives the total size of the resource, and the Accept-Ranges header indicates that the corresponding GET operation supports partial results.</span></span> <span data-ttu-id="fc4fd-379">La aplicación cliente puede usar esta información para recuperar la imagen en fragmentos más pequeños.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-379">The client application can use this information to retrieve the image in smaller chunks.</span></span> <span data-ttu-id="fc4fd-380">La primera solicitud captura los primeros 2500 bytes mediante el encabezado Range:</span><span class="sxs-lookup"><span data-stu-id="fc4fd-380">The first request fetches the first 2500 bytes by using the Range header:</span></span>

```HTTP
GET http://adventure-works.com/products/10?fields=productImage HTTP/1.1
Range: bytes=0-2499
```

<span data-ttu-id="fc4fd-381">El mensaje de respuesta indica que es una respuesta parcial al devolver el código de estado HTTP 206.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-381">The response message indicates that this is a partial response by returning HTTP status code 206.</span></span> <span data-ttu-id="fc4fd-382">El encabezado Content-Length especifica el número real de bytes devuelto en el cuerpo del mensaje (no el tamaño del recurso) y el encabezado Content-Range indica qué parte del recurso es (bytes 0-2499 de 4580):</span><span class="sxs-lookup"><span data-stu-id="fc4fd-382">The Content-Length header specifies the actual number of bytes returned in the message body (not the size of the resource), and the Content-Range header indicates which part of the resource this is (bytes 0-2499 out of 4580):</span></span>

```HTTP
HTTP/1.1 206 Partial Content

Accept-Ranges: bytes
Content-Type: image/jpeg
Content-Length: 2500
Content-Range: bytes 0-2499/4580

[...]
```

<span data-ttu-id="fc4fd-383">Una solicitud posterior desde la aplicación cliente puede recuperar el resto del recurso.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-383">A subsequent request from the client application can retrieve the remainder of the resource.</span></span>

## <a name="use-hateoas-to-enable-navigation-to-related-resources"></a><span data-ttu-id="fc4fd-384">Uso de HATEOAS para permitir la navegación a los recursos relacionados</span><span class="sxs-lookup"><span data-stu-id="fc4fd-384">Use HATEOAS to enable navigation to related resources</span></span>

<span data-ttu-id="fc4fd-385">Uno de los principales propósitos que se esconden detrás de REST es que debe ser posible navegar por todo el conjunto de recursos sin necesidad de conocer el esquema de URI.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-385">One of the primary motivations behind REST is that it should be possible to navigate the entire set of resources without requiring prior knowledge of the URI scheme.</span></span> <span data-ttu-id="fc4fd-386">Cada solicitud HTTP GET debe devolver la información necesaria para encontrar los recursos relacionados directamente con el objeto solicitado mediante los hipervínculos que se incluyen en la respuesta, y también se le debe proporcionar información que describa las operaciones disponibles en cada uno de estos recursos.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-386">Each HTTP GET request should return the information necessary to find the resources related directly to the requested object through hyperlinks included in the response, and it should also be provided with information that describes the operations available on each of these resources.</span></span> <span data-ttu-id="fc4fd-387">Este principio se conoce como HATEOAS, del inglés Hypertext as the Engine of Application State (Hipertexto como motor del estado de la aplicación).</span><span class="sxs-lookup"><span data-stu-id="fc4fd-387">This principle is known as HATEOAS, or Hypertext as the Engine of Application State.</span></span> <span data-ttu-id="fc4fd-388">El sistema es realmente una máquina de estado finito, y la respuesta a cada solicitud contiene la información necesaria para pasar de un estado a otro; ninguna otra información debería ser necesaria.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-388">The system is effectively a finite state machine, and the response to each request contains the information necessary to move from one state to another; no other information should be necessary.</span></span>

> [!NOTE]
> <span data-ttu-id="fc4fd-389">Actualmente no hay ninguna norma o especificación que define cómo modelar el principio HATEOAS.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-389">Currently there are no standards or specifications that define how to model the HATEOAS principle.</span></span> <span data-ttu-id="fc4fd-390">Los ejemplos mostrados en esta sección muestran una posible solución.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-390">The examples shown in this section illustrate one possible solution.</span></span>
>
>

<span data-ttu-id="fc4fd-391">Por ejemplo, para administrar la relación entre un pedido y un cliente, la representación de un pedido podría incluir vínculos que identifican las operaciones disponibles para el cliente del pedido.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-391">For example, to handle the relationship between an order and a customer, the representation of an order could include links that identify the available operations for the customer of the order.</span></span> <span data-ttu-id="fc4fd-392">Esta sería una posible representación:</span><span class="sxs-lookup"><span data-stu-id="fc4fd-392">Here is a possible representation:</span></span> 

```json
{
  "orderID":3,
  "productID":2,
  "quantity":4,
  "orderValue":16.60,
  "links":[
    {
      "rel":"customer",
      "href":"http://adventure-works.com/customers/3", 
      "action":"GET",
      "types":["text/xml","application/json"] 
    },
    {
      "rel":"customer",
      "href":"http://adventure-works.com/customers/3", 
      "action":"PUT",
      "types":["application/x-www-form-urlencoded"]
    },
    {
      "rel":"customer",
      "href":"http://adventure-works.com/customers/3",
      "action":"DELETE",
      "types":[]
    },
    {
      "rel":"self",
      "href":"http://adventure-works.com/orders/3", 
      "action":"GET",
      "types":["text/xml","application/json"]
    },
    {
      "rel":"self",
      "href":"http://adventure-works.com/orders/3", 
      "action":"PUT",
      "types":["application/x-www-form-urlencoded"]
    },
    {
      "rel":"self",
      "href":"http://adventure-works.com/orders/3", 
      "action":"DELETE",
      "types":[]
    }]
}
```

<span data-ttu-id="fc4fd-393">En este ejemplo, la matriz `links` tiene un conjunto de vínculos.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-393">In this example, the `links` array has a set of links.</span></span> <span data-ttu-id="fc4fd-394">Cada vínculo representa una operación en una entidad relacionada.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-394">Each link represents an operation on a related entity.</span></span> <span data-ttu-id="fc4fd-395">Los datos de cada vínculo incluyen la relación ("customer"), el URI (`http://adventure-works.com/customers/3`), el método HTTP y el tipo MIME admitido.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-395">The data for each link includes the relationship ("customer"), the URI (`http://adventure-works.com/customers/3`), the HTTP method, and the supported MIME types.</span></span> <span data-ttu-id="fc4fd-396">Esta es toda la información que necesita una aplicación cliente para invocar la operación.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-396">This is all the information that a client application needs to be able to invoke the operation.</span></span> 

<span data-ttu-id="fc4fd-397">La matriz `links` también incluye información con una referencia a sí misma sobre el recurso propiamente dicho que se ha recuperado.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-397">The `links` array also includes self-referencing information about the resource itself that has been retrieved.</span></span> <span data-ttu-id="fc4fd-398">Este tiene la relación *self*.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-398">These have the relationship *self*.</span></span>

<span data-ttu-id="fc4fd-399">El conjunto de vínculos que se devuelve puede cambiar, según el estado del recurso.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-399">The set of links that are returned may change, depending on the state of the resource.</span></span> <span data-ttu-id="fc4fd-400">A esto nos referimos cuando decimos que el hipertexto es el "motor de estado de aplicación".</span><span class="sxs-lookup"><span data-stu-id="fc4fd-400">This is what is meant by hypertext being the "engine of application state."</span></span>

## <a name="versioning-a-restful-web-api"></a><span data-ttu-id="fc4fd-401">Control de versiones de una API web RESTful</span><span class="sxs-lookup"><span data-stu-id="fc4fd-401">Versioning a RESTful web API</span></span>

<span data-ttu-id="fc4fd-402">Es muy poco probable que una API web permanezca estática.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-402">It is highly unlikely that a web API will remain static.</span></span> <span data-ttu-id="fc4fd-403">Conforme los requisitos empresariales cambian, se pueden agregar nuevas colecciones de recursos, las relaciones entre los recursos pueden cambiar y la estructura de los datos de los recursos puede rectificarse.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-403">As business requirements change new collections of resources may be added, the relationships between resources might change, and the structure of the data in resources might be amended.</span></span> <span data-ttu-id="fc4fd-404">Si bien la actualización de una API para controlar los requisitos nuevos o diferentes es un proceso relativamente sencillo, debe tener en cuenta los efectos que tendrán dichos cambios en las aplicaciones cliente que utilizan la API web.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-404">While updating a web API to handle new or differing requirements is a relatively straightforward process, you must consider the effects that such changes will have on client applications consuming the web API.</span></span> <span data-ttu-id="fc4fd-405">El problema es que, aunque el desarrollador que diseña e implementa una API web tiene control total sobre dicha API, el desarrollador carece del mismo grado de control sobre las aplicaciones cliente que podrían crear organizaciones de terceros que operan de forma remota.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-405">The issue is that although the developer designing and implementing a web API has full control over that API, the developer does not have the same degree of control over client applications which may be built by third party organizations operating remotely.</span></span> <span data-ttu-id="fc4fd-406">La premisa principal es permitir que las aplicaciones cliente existentes sigan funcionando sin cambios y al mismo tiempo dejar que las nuevas aplicaciones cliente aprovechen las ventajas de nuevas características y recursos.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-406">The primary imperative is to enable existing client applications to continue functioning unchanged while allowing new client applications to take advantage of new features and resources.</span></span>

<span data-ttu-id="fc4fd-407">El control de versiones permite que una API web indique las características y recursos que expone y que una aplicación cliente pueda enviar solicitudes que se dirijan a una versión específica de una característica o un recurso.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-407">Versioning enables a web API to indicate the features and resources that it exposes, and a client application can submit requests that are directed to a specific version of a feature or resource.</span></span> <span data-ttu-id="fc4fd-408">En las secciones siguientes se describen varios enfoques diferentes, cada uno de los cuales tiene sus propias ventajas y desventajas.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-408">The following sections describe several different approaches, each of which has its own benefits and trade-offs.</span></span>

### <a name="no-versioning"></a><span data-ttu-id="fc4fd-409">Sin control de versiones</span><span class="sxs-lookup"><span data-stu-id="fc4fd-409">No versioning</span></span>
<span data-ttu-id="fc4fd-410">Este es el enfoque más sencillo y puede ser aceptable para algunas API internas.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-410">This is the simplest approach, and may be acceptable for some internal APIs.</span></span> <span data-ttu-id="fc4fd-411">Los grandes cambios podrían representarse como nuevos recursos o nuevos vínculos.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-411">Big changes could be represented as new resources or new links.</span></span>  <span data-ttu-id="fc4fd-412">Agregar contenido a recursos existentes puede que no represente un cambio importante dado que las aplicaciones cliente que no esperan ver este contenido simplemente lo ignorarán.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-412">Adding content to existing resources might not present a breaking change as client applications that are not expecting to see this content will simply ignore it.</span></span>

<span data-ttu-id="fc4fd-413">Por ejemplo, una solicitud al URI *http://adventure-works.com/customers/3* debe devolver los detalles de un solo cliente que contiene los campos `id`, `name` y `address` esperados por la aplicación cliente:</span><span class="sxs-lookup"><span data-stu-id="fc4fd-413">For example, a request to the URI *http://adventure-works.com/customers/3* should return the details of a single customer containing `id`, `name`, and `address` fields expected by the client application:</span></span>

```HTTP
HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8

{"id":3,"name":"Contoso LLC","address":"1 Microsoft Way Redmond WA 98053"}
```

> [!NOTE]
> <span data-ttu-id="fc4fd-414">Por motivos de simplicidad, las respuestas de ejemplo que se muestran en esta sección no incluyen vínculos HATEOAS.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-414">For simplicity, the example responses shown in this section do not include HATEOAS links.</span></span>
>
>

<span data-ttu-id="fc4fd-415">Si el campo `DateCreated` se agrega al esquema del recurso de cliente, la respuesta tendría el siguiente aspecto:</span><span class="sxs-lookup"><span data-stu-id="fc4fd-415">If the `DateCreated` field is added to the schema of the customer resource, then the response would look like this:</span></span>

```HTTP
HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8

{"id":3,"name":"Contoso LLC","dateCreated":"2014-09-04T12:11:38.0376089Z","address":"1 Microsoft Way Redmond WA 98053"}
```

<span data-ttu-id="fc4fd-416">Las aplicaciones cliente existentes pueden seguir funcionando correctamente si son capaces de omitir los campos no reconocidos, pero las nuevas aplicaciones cliente se pueden diseñar para controlar este nuevo campo.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-416">Existing client applications might continue functioning correctly if they are capable of ignoring unrecognized fields, while new client applications can be designed to handle this new field.</span></span> <span data-ttu-id="fc4fd-417">Sin embargo, si se producen cambios más radicales en el esquema de recursos (por ejemplo, se quitan campos y se cambian de nombre) o cambian las relaciones entre los recursos, dichos cambios podrían constituir cambios importantes que impiden que las aplicaciones cliente existentes funcionen correctamente.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-417">However, if more radical changes to the schema of resources occur (such as removing or renaming fields) or the relationships between resources change then these may constitute breaking changes that prevent existing client applications from functioning correctly.</span></span> <span data-ttu-id="fc4fd-418">En estas situaciones es aconsejable uno de los enfoques siguientes.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-418">In these situations you should consider one of the following approaches.</span></span>

### <a name="uri-versioning"></a><span data-ttu-id="fc4fd-419">Control de versiones de URI</span><span class="sxs-lookup"><span data-stu-id="fc4fd-419">URI versioning</span></span>
<span data-ttu-id="fc4fd-420">Cada vez que modifica la API web o cambia el esquema de recursos, agrega un número de versión al URI para cada recurso.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-420">Each time you modify the web API or change the schema of resources, you add a version number to the URI for each resource.</span></span> <span data-ttu-id="fc4fd-421">Los URI ya existentes deben seguir funcionando como antes y devolver los recursos conforme a su esquema original.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-421">The previously existing URIs should continue to operate as before, returning resources that conform to their original schema.</span></span>

<span data-ttu-id="fc4fd-422">Ampliando el ejemplo anterior, si el campo `address` se reestructura en campos secundarios que contienen cada uno una parte constituyente de la dirección (como `streetAddress`, `city`, `state` y `zipCode`), esta versión del recurso podría exponerse a través de un URI que contenga un número de versión, como http://adventure-works.com/v2/customers/3:</span><span class="sxs-lookup"><span data-stu-id="fc4fd-422">Extending the previous example, if the `address` field is restructured into sub-fields containing each constituent part of the address (such as `streetAddress`, `city`, `state`, and `zipCode`), this version of the resource could be exposed through a URI containing a version number, such as http://adventure-works.com/v2/customers/3:</span></span>

```HTTP
HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8

{"id":3,"name":"Contoso LLC","dateCreated":"2014-09-04T12:11:38.0376089Z","address":{"streetAddress":"1 Microsoft Way","city":"Redmond","state":"WA","zipCode":98053}}
```

<span data-ttu-id="fc4fd-423">Este mecanismo de control de versiones es muy sencillo, pero depende del servidor que enruta la solicitud al extremo adecuado.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-423">This versioning mechanism is very simple but depends on the server routing the request to the appropriate endpoint.</span></span> <span data-ttu-id="fc4fd-424">Sin embargo, puede volverse difícil de manejar dado que la API web madura a través de varias iteraciones y el servidor tiene que admitir un número de versiones diferentes.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-424">However, it can become unwieldy as the web API matures through several iterations and the server has to support a number of different versions.</span></span> <span data-ttu-id="fc4fd-425">Además, desde el punto de vista de los más puristas, en todos los casos las aplicaciones cliente capturan los mismos datos (cliente 3), así que el URI no debería ser realmente diferente según la versión.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-425">Also, from a purist’s point of view, in all cases the client applications are fetching the same data (customer 3), so the URI should not really be different depending on the version.</span></span> <span data-ttu-id="fc4fd-426">Este esquema también complica la implementación de HATEOAS ya que todos los vínculos deberán incluir el número de versión en sus URI.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-426">This scheme also complicates implementation of HATEOAS as all links will need to include the version number in their URIs.</span></span>

### <a name="query-string-versioning"></a><span data-ttu-id="fc4fd-427">Control de versiones de cadena de consulta</span><span class="sxs-lookup"><span data-stu-id="fc4fd-427">Query string versioning</span></span>
<span data-ttu-id="fc4fd-428">En lugar de proporcionar varios URI, puede especificar la versión del recurso mediante un parámetro dentro de la cadena de consulta anexada a la solicitud HTTP, como *http://adventure-works.com/customers/3?version=2*.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-428">Rather than providing multiple URIs, you can specify the version of the resource by using a parameter within the query string appended to the HTTP request, such as *http://adventure-works.com/customers/3?version=2*.</span></span> <span data-ttu-id="fc4fd-429">El parámetro de versión debe adoptar de forma predeterminada un valor significativo como 1 si se omite en las aplicaciones cliente más antiguas.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-429">The version parameter should default to a meaningful value such as 1 if it is omitted by older client applications.</span></span>

<span data-ttu-id="fc4fd-430">Este enfoque tiene la ventaja semántica de que el mismo recurso siempre se recupera del mismo URI, pero depende del código que controla la solicitud para analizar la cadena de consulta y enviar la respuesta HTTP adecuada.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-430">This approach has the semantic advantage that the same resource is always retrieved from the same URI, but it depends on the code that handles the request to parse the query string and send back the appropriate HTTP response.</span></span> <span data-ttu-id="fc4fd-431">Este método también presenta tiene las mismas complicaciones para implementar HATEOAS que el mecanismo de control de versiones de URI.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-431">This approach also suffers from the same complications for implementing HATEOAS as the URI versioning mechanism.</span></span>

> [!NOTE]
> <span data-ttu-id="fc4fd-432">Algunos exploradores web y servidores proxy antiguos no almacenan en caché las respuestas de solicitudes que incluyen una cadena de consulta en el URI.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-432">Some older web browsers and web proxies will not cache responses for requests that include a query string in the URI.</span></span> <span data-ttu-id="fc4fd-433">Esto puede tener un impacto negativo en el rendimiento de las aplicaciones web que usan una API web y que se ejecutan en este tipo de explorador web.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-433">This can have an adverse impact on performance for web applications that use a web API and that run from within such a web browser.</span></span>
>
>

### <a name="header-versioning"></a><span data-ttu-id="fc4fd-434">Control de versiones de encabezado</span><span class="sxs-lookup"><span data-stu-id="fc4fd-434">Header versioning</span></span>
<span data-ttu-id="fc4fd-435">En lugar de anexar el número de versión como un parámetro de cadena de consulta, podría implementar un encabezado personalizado que indica la versión del recurso.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-435">Rather than appending the version number as a query string parameter, you could implement a custom header that indicates the version of the resource.</span></span> <span data-ttu-id="fc4fd-436">Este enfoque requiere que la aplicación cliente agregue el encabezado adecuado a las solicitudes, aunque el código que controla la solicitud de cliente puede usar un valor predeterminado (versión 1) si se omite el encabezado de versión.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-436">This approach requires that the client application adds the appropriate header to any requests, although the code handling the client request could use a default value (version 1) if the version header is omitted.</span></span> <span data-ttu-id="fc4fd-437">En los ejemplos siguientes se usa un encabezado personalizado denominado *Custom-Header*.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-437">The following examples utilize a custom header named *Custom-Header*.</span></span> <span data-ttu-id="fc4fd-438">El valor de este encabezado indica la versión de la API web.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-438">The value of this header indicates the version of web API.</span></span>

<span data-ttu-id="fc4fd-439">Versión 1:</span><span class="sxs-lookup"><span data-stu-id="fc4fd-439">Version 1:</span></span>

```HTTP
GET http://adventure-works.com/customers/3 HTTP/1.1
Custom-Header: api-version=1
```

```HTTP
HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8

{"id":3,"name":"Contoso LLC","address":"1 Microsoft Way Redmond WA 98053"}
```

<span data-ttu-id="fc4fd-440">Versión 2:</span><span class="sxs-lookup"><span data-stu-id="fc4fd-440">Version 2:</span></span>

```HTTP
GET http://adventure-works.com/customers/3 HTTP/1.1
Custom-Header: api-version=2
```

```HTTP
HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8

{"id":3,"name":"Contoso LLC","dateCreated":"2014-09-04T12:11:38.0376089Z","address":{"streetAddress":"1 Microsoft Way","city":"Redmond","state":"WA","zipCode":98053}}
```

<span data-ttu-id="fc4fd-441">Tenga en cuenta que al igual que en los dos enfoques anteriores, la implementación de HATEOAS requiere que se incluya el encabezado personalizado apropiado en los vínculos.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-441">Note that as with the previous two approaches, implementing HATEOAS requires including the appropriate custom header in any links.</span></span>

### <a name="media-type-versioning"></a><span data-ttu-id="fc4fd-442">Control de versiones del tipo de medio</span><span class="sxs-lookup"><span data-stu-id="fc4fd-442">Media type versioning</span></span>
<span data-ttu-id="fc4fd-443">Cuando una aplicación cliente envía una solicitud HTTP GET a un servidor web, debe prever el formato del contenido que puede controlar mediante el uso de un encabezado Accept, como se ha descrito anteriormente en esta guía.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-443">When a client application sends an HTTP GET request to a web server it should stipulate the format of the content that it can handle by using an Accept header, as described earlier in this guidance.</span></span> <span data-ttu-id="fc4fd-444">Con frecuencia, el propósito del encabezado *Accept* es permitir que la aplicación cliente especifique si el cuerpo de la respuesta debe ser XML, JSON o algún otro formato común que pueda analizar el cliente.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-444">Frequently the purpose of the *Accept* header is to allow the client application to specify whether the body of the response should be XML, JSON, or some other common format that the client can parse.</span></span> <span data-ttu-id="fc4fd-445">Sin embargo, es posible definir tipos de medios personalizados que incluyan información que permita que la aplicación cliente indique qué versión de un recurso que se espera.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-445">However, it is possible to define custom media types that include information enabling the client application to indicate which version of a resource it is expecting.</span></span> <span data-ttu-id="fc4fd-446">En el ejemplo siguiente se muestra una solicitud que especifica un encabezado *Accept* con el valor *application/vnd.adventure-works.v1+json*.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-446">The following example shows a request that specifies an *Accept* header with the value *application/vnd.adventure-works.v1+json*.</span></span> <span data-ttu-id="fc4fd-447">El elemento *vnd.adventure-works.v1* indica al servidor web que debe devolver la versión 1 del recurso, mientras que el elemento *json* especifica que el formato del cuerpo de respuesta debe ser JSON:</span><span class="sxs-lookup"><span data-stu-id="fc4fd-447">The *vnd.adventure-works.v1* element indicates to the web server that it should return version 1 of the resource, while the *json* element specifies that the format of the response body should be JSON:</span></span>

```HTTP
GET http://adventure-works.com/customers/3 HTTP/1.1
Accept: application/vnd.adventure-works.v1+json
```

<span data-ttu-id="fc4fd-448">El código que controla la solicitud es responsable de procesar el encabezado *Accept* y de respetarlo siempre que sea posible (la aplicación cliente puede especificar varios formatos en el encabezado *Accept*, en cuyo caso el servidor web puede elegir el formato más adecuado para el cuerpo de respuesta).</span><span class="sxs-lookup"><span data-stu-id="fc4fd-448">The code handling the request is responsible for processing the *Accept* header and honoring it as far as possible (the client application may specify multiple formats in the *Accept* header, in which case the web server can choose the most appropriate format for the response body).</span></span> <span data-ttu-id="fc4fd-449">El servidor web confirma el formato de los datos en el cuerpo de respuesta mediante el encabezado Content-Type:</span><span class="sxs-lookup"><span data-stu-id="fc4fd-449">The web server confirms the format of the data in the response body by using the Content-Type header:</span></span>

```HTTP
HTTP/1.1 200 OK
Content-Type: application/vnd.adventure-works.v1+json; charset=utf-8

{"id":3,"name":"Contoso LLC","address":"1 Microsoft Way Redmond WA 98053"}
```

<span data-ttu-id="fc4fd-450">Si el encabezado Accept no especifica ningún tipo de medio conocido, el servidor web podría generar un mensaje de respuesta HTTP 406 (no aceptable) o devolver un mensaje con un tipo de medio predeterminado.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-450">If the Accept header does not specify any known media types, the web server could generate an HTTP 406 (Not Acceptable) response message or return a message with a default media type.</span></span>

<span data-ttu-id="fc4fd-451">Este enfoque es posiblemente el más puro de los mecanismos de control de versiones y se presta de forma natural a HATEOAS, que puede incluir el tipo MIME de los datos relacionados en los vínculos de recursos.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-451">This approach is arguably the purest of the versioning mechanisms and lends itself naturally to HATEOAS, which can include the MIME type of related data in resource links.</span></span>

> [!NOTE]
> <span data-ttu-id="fc4fd-452">Al seleccionar una estrategia de control de versiones, también debe considerar las implicaciones en el rendimiento, especialmente en el almacenamiento en caché en el servidor web.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-452">When you select a versioning strategy, you should also consider the implications on performance, especially caching on the web server.</span></span> <span data-ttu-id="fc4fd-453">Los esquemas de control de versiones de URI y de control de versiones de cadena de consulta son compatibles con la caché puesto que la misma combinación de URI y cadena de consulta hace referencia siempre a los mismos datos.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-453">The URI versioning and Query String versioning schemes are cache-friendly inasmuch as the same URI/query string combination refers to the same data each time.</span></span>
>
> <span data-ttu-id="fc4fd-454">Los mecanismos de control de versiones de encabezado y de control de versiones de tipo de medio normalmente requieren lógica adicional para examinar los valores del encabezado personalizado o del encabezado Accept.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-454">The Header versioning and Media Type versioning mechanisms typically require additional logic to examine the values in the custom header or the Accept header.</span></span> <span data-ttu-id="fc4fd-455">En un entorno a gran escala, muchos clientes que usan versiones diferentes de una API web pueden producir una cantidad significativa de datos duplicados en una caché del servidor.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-455">In a large-scale environment, many clients using different versions of a web API can result in a significant amount of duplicated data in a server-side cache.</span></span> <span data-ttu-id="fc4fd-456">Este problema puede ser agudo si una aplicación cliente se comunica con un servidor web a través de un proxy que implementa almacenamiento en caché y que solo reenvía una solicitud a dicho servidor si no contiene actualmente una copia de los datos solicitados en su caché.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-456">This issue can become acute if a client application communicates with a web server through a proxy that implements caching, and that only forwards a request to the web server if it does not currently hold a copy of the requested data in its cache.</span></span>
>
>

## <a name="open-api-initiative"></a><span data-ttu-id="fc4fd-457">Iniciativa Open API</span><span class="sxs-lookup"><span data-stu-id="fc4fd-457">Open API Initiative</span></span>
<span data-ttu-id="fc4fd-458">La [iniciativa Open API](https://www.openapis.org/) fue creada por un consorcio de la industria para normalizar las descripciones de las API de REST de los distintos proveedores.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-458">The [Open API Initiative](https://www.openapis.org/) was created by an industry consortium to standardize REST API descriptions across vendors.</span></span> <span data-ttu-id="fc4fd-459">Como parte de esta iniciativa, la especificación Swagger 2.0 se cambió a OpenAPI Specification (OAS) y se incluyó en la iniciativa Open API.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-459">As part of this initiative, the Swagger 2.0 specification was renamed the OpenAPI Specification (OAS) and brought under the Open API Initiative.</span></span>

<span data-ttu-id="fc4fd-460">Puede adoptar OpenAPI para sus API web.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-460">You may want to adopt OpenAPI for your web APIs.</span></span> <span data-ttu-id="fc4fd-461">Algunos puntos que se deben tener en cuenta:</span><span class="sxs-lookup"><span data-stu-id="fc4fd-461">Some points to consider:</span></span>

- <span data-ttu-id="fc4fd-462">OpenAPI Specification incluye un conjunto de directrices bien fundamentadas acerca de cómo se debe diseñar una API de REST.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-462">The OpenAPI Specification comes with a set of opinionated guidelines on how a REST API should be designed.</span></span> <span data-ttu-id="fc4fd-463">Esto presenta ventajas en cuanto a interoperabilidad, pero requiere más cuidado al diseñar las API para que cumplan la especificación.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-463">That has advantages for interoperability, but requires more care when designing your API to conform to the specification.</span></span>
- <span data-ttu-id="fc4fd-464">OpenAPI promueve un enfoque "el contrato es lo primero", en lugar de un enfoque "la implementación es lo primero".</span><span class="sxs-lookup"><span data-stu-id="fc4fd-464">OpenAPI promotes a contract-first approach, rather than an implementation-first approach.</span></span> <span data-ttu-id="fc4fd-465">Que el contrato sea lo primero, significa que primero se diseña el contrato de la API (la interfaz) y después se escribe el código que implementa el contrato.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-465">Contract-first means you design the API contract (the interface) first and then write code that implements the contract.</span></span> 
- <span data-ttu-id="fc4fd-466">Herramientas como Swagger pueden generar las bibliotecas de cliente o la documentación de los contratos de API.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-466">Tools like Swagger can generate client libraries or documentation from API contracts.</span></span> <span data-ttu-id="fc4fd-467">Por ejemplo, consulte [Páginas de ayuda de ASP.NET Core Web API mediante Swagger](/aspnet/core/tutorials/web-api-help-pages-using-swagger).</span><span class="sxs-lookup"><span data-stu-id="fc4fd-467">For example, see [ASP.NET Web API Help Pages using Swagger](/aspnet/core/tutorials/web-api-help-pages-using-swagger).</span></span>

## <a name="more-information"></a><span data-ttu-id="fc4fd-468">Más información</span><span class="sxs-lookup"><span data-stu-id="fc4fd-468">More information</span></span>
* <span data-ttu-id="fc4fd-469">[Directrices para API de REST de Microsoft](https://github.com/Microsoft/api-guidelines/blob/master/Guidelines.md).</span><span class="sxs-lookup"><span data-stu-id="fc4fd-469">[Microsoft REST API Guidelines](https://github.com/Microsoft/api-guidelines/blob/master/Guidelines.md).</span></span> <span data-ttu-id="fc4fd-470">Recomendaciones detalladas para diseñar API de REST públicas.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-470">Detailed recommendations for designing public REST APIs.</span></span>
* <span data-ttu-id="fc4fd-471">[The REST Cookbook](http://restcookbook.com/) (El libro de cocina de REST).</span><span class="sxs-lookup"><span data-stu-id="fc4fd-471">[The REST Cookbook](http://restcookbook.com/).</span></span> <span data-ttu-id="fc4fd-472">Introducción a la creación de API de RESTful.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-472">Introduction to building RESTful APIs.</span></span>
* <span data-ttu-id="fc4fd-473">[Web API Checklist](https://mathieu.fenniak.net/the-api-checklist/) (Lista de comprobación de API web).</span><span class="sxs-lookup"><span data-stu-id="fc4fd-473">[Web API Checklist](https://mathieu.fenniak.net/the-api-checklist/).</span></span> <span data-ttu-id="fc4fd-474">Una lista útil de elementos que se deben tener en cuenta al diseñar e implementar una API web.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-474">A useful list of items to consider when designing and implementing a web API.</span></span>
* <span data-ttu-id="fc4fd-475">[Open API Initiative](https://www.openapis.org/).</span><span class="sxs-lookup"><span data-stu-id="fc4fd-475">[Open API Initiative](https://www.openapis.org/).</span></span> <span data-ttu-id="fc4fd-476">Detalles de la documentación y la implementación en Open API.</span><span class="sxs-lookup"><span data-stu-id="fc4fd-476">Documentation and implementation details on Open API.</span></span>
