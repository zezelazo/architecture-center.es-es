---
title: Patrón Federated Identity
titleSuffix: Cloud Design Patterns
description: La autenticación se delega a un proveedor de identidad externo.
keywords: Patrón de diseño
author: dragon119
ms.date: 06/23/2017
ms.custom: seodec18
ms.openlocfilehash: b268000a81edbb2f224a9244d5949def75854f04
ms.sourcegitcommit: 1f4cdb08fe73b1956e164ad692f792f9f635b409
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 01/08/2019
ms.locfileid: "54110364"
---
# <a name="federated-identity-pattern"></a><span data-ttu-id="b8d86-104">Patrón Federated Identity</span><span class="sxs-lookup"><span data-stu-id="b8d86-104">Federated Identity pattern</span></span>

[!INCLUDE [header](../_includes/header.md)]

<span data-ttu-id="b8d86-105">La autenticación se delega a un proveedor de identidad externo.</span><span class="sxs-lookup"><span data-stu-id="b8d86-105">Delegate authentication to an external identity provider.</span></span> <span data-ttu-id="b8d86-106">Esto puede simplificar el desarrollo, minimizar los requisitos de administración de usuarios y mejorar la experiencia del usuario de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="b8d86-106">This can simplify development, minimize the requirement for user administration, and improve the user experience of the application.</span></span>

## <a name="context-and-problem"></a><span data-ttu-id="b8d86-107">Contexto y problema</span><span class="sxs-lookup"><span data-stu-id="b8d86-107">Context and problem</span></span>

<span data-ttu-id="b8d86-108">Normalmente, los usuarios deben trabajar con varias aplicaciones que proporcionan y hospedan diversas organizaciones con las que mantienen una relación de negocios.</span><span class="sxs-lookup"><span data-stu-id="b8d86-108">Users typically need to work with multiple applications provided and hosted by different organizations they have a business relationship with.</span></span> <span data-ttu-id="b8d86-109">A estos usuarios se les puede exigir que usen cada uno de ellos credenciales específicas (y diferentes).</span><span class="sxs-lookup"><span data-stu-id="b8d86-109">These users might be required to use specific (and different) credentials for each one.</span></span> <span data-ttu-id="b8d86-110">Esta situación puede dar lugar a:</span><span class="sxs-lookup"><span data-stu-id="b8d86-110">This can:</span></span>

- <span data-ttu-id="b8d86-111">**Una experiencia de usuario desestructurada**.</span><span class="sxs-lookup"><span data-stu-id="b8d86-111">**Cause a disjointed user experience**.</span></span> <span data-ttu-id="b8d86-112">Con frecuencia, los usuarios olvidan las credenciales de inicio de sesión cuando si tienen muchas diferentes.</span><span class="sxs-lookup"><span data-stu-id="b8d86-112">Users often forget sign-in credentials when they have many different ones.</span></span>

- <span data-ttu-id="b8d86-113">**Exposición de las vulnerabilidades de seguridad**.</span><span class="sxs-lookup"><span data-stu-id="b8d86-113">**Expose security vulnerabilities**.</span></span> <span data-ttu-id="b8d86-114">Cuando un usuario abandona la empresa, la cuenta se debe desaprovisionar inmediatamente.</span><span class="sxs-lookup"><span data-stu-id="b8d86-114">When a user leaves the company the account must immediately be deprovisioned.</span></span> <span data-ttu-id="b8d86-115">En organizaciones de gran tamaño, es fácil pasarlo por alto.</span><span class="sxs-lookup"><span data-stu-id="b8d86-115">It's easy to overlook this in large organizations.</span></span>

- <span data-ttu-id="b8d86-116">**Administración de usuarios complicada**.</span><span class="sxs-lookup"><span data-stu-id="b8d86-116">**Complicate user management**.</span></span> <span data-ttu-id="b8d86-117">Los administradores deben administrar las credenciales de todos los usuarios y realizar tareas adicionales, como proporcionar recordatorios de contraseña.</span><span class="sxs-lookup"><span data-stu-id="b8d86-117">Administrators must manage credentials for all of the users, and perform additional tasks such as providing password reminders.</span></span>

<span data-ttu-id="b8d86-118">Los usuarios prefieren normalmente usar las mismas credenciales en todas estas aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="b8d86-118">Users typically prefer to use the same credentials for all these applications.</span></span>

## <a name="solution"></a><span data-ttu-id="b8d86-119">Solución</span><span class="sxs-lookup"><span data-stu-id="b8d86-119">Solution</span></span>

<span data-ttu-id="b8d86-120">Implemente un mecanismo de autenticación que pueda usar la identidad federada.</span><span class="sxs-lookup"><span data-stu-id="b8d86-120">Implement an authentication mechanism that can use federated identity.</span></span> <span data-ttu-id="b8d86-121">Separe la autenticación de usuarios del código de aplicación, y delegue la autentificación a un proveedor de identidades de confianza.</span><span class="sxs-lookup"><span data-stu-id="b8d86-121">Separate user authentication from the application code, and delegate authentication to a trusted identity provider.</span></span> <span data-ttu-id="b8d86-122">Esto puede simplificar el desarrollo y permitir que los usuarios se autentiquen mediante una variedad más amplia de proveedores de identidades (IdP) al tiempo que se reduce la sobrecarga administrativa.</span><span class="sxs-lookup"><span data-stu-id="b8d86-122">This can simplify development and allow users to authenticate using a wider range of identity providers (IdP) while minimizing the administrative overhead.</span></span> <span data-ttu-id="b8d86-123">También permite separar claramente la autenticación de la autorización.</span><span class="sxs-lookup"><span data-stu-id="b8d86-123">It also allows you to clearly decouple authentication from authorization.</span></span>

<span data-ttu-id="b8d86-124">Entre los proveedores de identidades de confianza se incluyen directorios corporativos, servicios de federación locales, otros servicios de token de seguridad (STS) que proporcionan los asociados comerciales o proveedores de identidades sociales que pueden autenticar a los usuarios que tienen, por ejemplo, una cuenta de Microsoft, Google, Yahoo! o Facebook.</span><span class="sxs-lookup"><span data-stu-id="b8d86-124">The trusted identity providers include corporate directories, on-premises federation services, other security token services (STS) provided by business partners, or social identity providers that can authenticate users who have, for example, a Microsoft, Google, Yahoo!, or Facebook account.</span></span>

<span data-ttu-id="b8d86-125">En la siguiente figura se ilustra el patrón Federated Identity (Identidad federada) cuando una aplicación cliente necesita acceder a un servicio que requiere autentificación.</span><span class="sxs-lookup"><span data-stu-id="b8d86-125">The figure illustrates the Federated Identity pattern when a client application needs to access a service that requires authentication.</span></span> <span data-ttu-id="b8d86-126">La autenticación se realiza mediante un IdP que trabaja en combinación con un STS.</span><span class="sxs-lookup"><span data-stu-id="b8d86-126">The authentication is performed by an IdP that works in concert with an STS.</span></span> <span data-ttu-id="b8d86-127">El IdP emite tokens de seguridad que proporcionan información sobre el usuario autenticado.</span><span class="sxs-lookup"><span data-stu-id="b8d86-127">The IdP issues security tokens that provide information about the authenticated user.</span></span> <span data-ttu-id="b8d86-128">Esta información, conocida como notificaciones, incluye la identidad del usuario y podría incluir también otra información como la pertenencia a roles y derechos de acceso más específicos.</span><span class="sxs-lookup"><span data-stu-id="b8d86-128">This information, referred to as claims, includes the user’s identity, and might also include other information such as role membership and more granular access rights.</span></span>

![Introducción a la autenticación federada](./_images/federated-identity-overview.png)

<span data-ttu-id="b8d86-130">Este modelo se conoce a menudo como control de acceso basado en notificaciones.</span><span class="sxs-lookup"><span data-stu-id="b8d86-130">This model is often called claims-based access control.</span></span> <span data-ttu-id="b8d86-131">Las aplicaciones y los servicios autorizarán el acceso a las características y funcionalidades en función de las notificaciones contenidas en el token.</span><span class="sxs-lookup"><span data-stu-id="b8d86-131">Applications and services authorize access to features and functionality based on the claims contained in the token.</span></span> <span data-ttu-id="b8d86-132">El servicio que requiere autenticación debe confiar en el IdP.</span><span class="sxs-lookup"><span data-stu-id="b8d86-132">The service that requires authentication must trust the IdP.</span></span> <span data-ttu-id="b8d86-133">La aplicación cliente se pone en contacto el IdP que realiza la autenticación.</span><span class="sxs-lookup"><span data-stu-id="b8d86-133">The client application contacts the IdP that performs the authentication.</span></span> <span data-ttu-id="b8d86-134">Si la autenticación es correcta, el IdP devuelve un token que contiene las notificaciones que identifican al usuario en el STS (tenga en cuenta que el IdP y el STS pueden ser el mismo servicio).</span><span class="sxs-lookup"><span data-stu-id="b8d86-134">If the authentication is successful, the IdP returns a token containing the claims that identify the user to the STS (note that the IdP and STS can be the same service).</span></span> <span data-ttu-id="b8d86-135">El STS puede transformar y aumentar las notificaciones en el token según reglas predefinidas, antes de devolverlo al cliente.</span><span class="sxs-lookup"><span data-stu-id="b8d86-135">The STS can transform and augment the claims in the token based on predefined rules, before returning it to the client.</span></span> <span data-ttu-id="b8d86-136">La aplicación cliente puede luego pasar este token al servicio como prueba de su identidad.</span><span class="sxs-lookup"><span data-stu-id="b8d86-136">The client application can then pass this token to the service as proof of its identity.</span></span>

> <span data-ttu-id="b8d86-137">Podría haber STS adicionales en la cadena de confianza.</span><span class="sxs-lookup"><span data-stu-id="b8d86-137">There might be additional STSs in the chain of trust.</span></span> <span data-ttu-id="b8d86-138">Por ejemplo, en el escenario descrito más adelante, un STS local confía en otro STS que es responsable de acceder a un proveedor de identidades para autenticar al usuario.</span><span class="sxs-lookup"><span data-stu-id="b8d86-138">For example, in the scenario described later, an on-premises STS trusts another STS that is responsible for accessing an identity provider to authenticate the user.</span></span> <span data-ttu-id="b8d86-139">Este enfoque es común en escenarios empresariales donde hay un STS y un directorio locales.</span><span class="sxs-lookup"><span data-stu-id="b8d86-139">This approach is common in enterprise scenarios where there's an on-premises STS and directory.</span></span>

<span data-ttu-id="b8d86-140">La autenticación federada proporciona una solución basada en estándares al problema de confiar en identidades de dominios diferentes y puede admitir el inicio de sesión único.</span><span class="sxs-lookup"><span data-stu-id="b8d86-140">Federated authentication provides a standards-based solution to the issue of trusting identities across diverse domains, and can support single sign-on.</span></span> <span data-ttu-id="b8d86-141">Cada vez es más común en todos los tipos de aplicaciones, especialmente en las aplicaciones hospedadas en la nube, ya que admite el inicio de sesión único sin necesidad de una conexión de red directa a los proveedores de identidades.</span><span class="sxs-lookup"><span data-stu-id="b8d86-141">It's becoming more common across all types of applications, especially cloud-hosted applications, because it supports single sign-on without requiring a direct network connection to identity providers.</span></span> <span data-ttu-id="b8d86-142">El usuario no tiene que especificar credenciales en cada aplicación.</span><span class="sxs-lookup"><span data-stu-id="b8d86-142">The user doesn't have to enter credentials for every application.</span></span> <span data-ttu-id="b8d86-143">La seguridad aumenta porque impide la creación de las credenciales necesarias para acceder a muchas aplicaciones diferentes, y también oculta las credenciales del usuario de todos excepto del proveedor de identidades original.</span><span class="sxs-lookup"><span data-stu-id="b8d86-143">This increases security because it prevents the creation of credentials required to access many different applications, and it also hides the user’s credentials from all but the original identity provider.</span></span> <span data-ttu-id="b8d86-144">Las aplicaciones ven solo la información de la identidad autenticada contenida en el token.</span><span class="sxs-lookup"><span data-stu-id="b8d86-144">Applications see just the authenticated identity information contained within the token.</span></span>

<span data-ttu-id="b8d86-145">La identidad federada tiene la ventaja principal de que la administración de identidades y credenciales es responsabilidad del proveedor de identidades.</span><span class="sxs-lookup"><span data-stu-id="b8d86-145">Federated identity also has the major advantage that management of the identity and credentials is the responsibility of the identity provider.</span></span> <span data-ttu-id="b8d86-146">La aplicación o el servicio no necesitan proporcionar características de administración de identidades.</span><span class="sxs-lookup"><span data-stu-id="b8d86-146">The application or service doesn't need to provide identity management features.</span></span> <span data-ttu-id="b8d86-147">Además, en escenarios corporativos, el directorio corporativo no necesita saber nada del usuario si confía en el proveedor de identidades.</span><span class="sxs-lookup"><span data-stu-id="b8d86-147">In addition, in corporate scenarios, the corporate directory doesn't need to know about the user if it trusts the identity provider.</span></span> <span data-ttu-id="b8d86-148">Como consecuencia, se elimina la sobrecarga administrativa de la administración de la identidad del usuario dentro del directorio.</span><span class="sxs-lookup"><span data-stu-id="b8d86-148">This removes all the administrative overhead of managing the user identity within the directory.</span></span>

## <a name="issues-and-considerations"></a><span data-ttu-id="b8d86-149">Problemas y consideraciones</span><span class="sxs-lookup"><span data-stu-id="b8d86-149">Issues and considerations</span></span>

<span data-ttu-id="b8d86-150">Al diseñar aplicaciones que implementan la autenticación federada, considere los siguientes puntos:</span><span class="sxs-lookup"><span data-stu-id="b8d86-150">Consider the following when designing applications that implement federated authentication:</span></span>

- <span data-ttu-id="b8d86-151">La autenticación puede ser un único punto de error.</span><span class="sxs-lookup"><span data-stu-id="b8d86-151">Authentication can be a single point of failure.</span></span> <span data-ttu-id="b8d86-152">Si implementa la aplicación en varios centros de datos, considere la posibilidad de implementar el mecanismo de administración de identidades en los mismos centros de datos para mantener la disponibilidad y confiabilidad de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="b8d86-152">If you deploy your application to multiple datacenters, consider deploying your identity management mechanism to the same datacenters to maintain application reliability and availability.</span></span>

- <span data-ttu-id="b8d86-153">Las herramientas de autenticación le permite configurar el control de acceso en función de las notificaciones de rol contenidas en el token de autenticación.</span><span class="sxs-lookup"><span data-stu-id="b8d86-153">Authentication tools make it possible to configure access control based on role claims contained in the authentication token.</span></span> <span data-ttu-id="b8d86-154">Con frecuencia a esto se le conoce como control de acceso basado en roles (RBAC) y puede permitir un nivel de control más específico sobre el acceso a las características y recursos.</span><span class="sxs-lookup"><span data-stu-id="b8d86-154">This is often referred to as role-based access control (RBAC), and it can allow a more granular level of control over access to features and resources.</span></span>

- <span data-ttu-id="b8d86-155">A diferencia de los directorios corporativos, autenticación basada en notificaciones mediante proveedores de identidades sociales normalmente no proporciona información sobre el usuario autenticado, a excepción de una dirección de correo electrónico y quizás un nombre.</span><span class="sxs-lookup"><span data-stu-id="b8d86-155">Unlike a corporate directory, claims-based authentication using social identity providers doesn't usually provide information about the authenticated user other than an email address, and perhaps a name.</span></span> <span data-ttu-id="b8d86-156">Algunos proveedores de identidades sociales, como una cuenta de Microsoft, proporcionan solo un identificador único.</span><span class="sxs-lookup"><span data-stu-id="b8d86-156">Some social identity providers, such as a Microsoft account, provide only a unique identifier.</span></span> <span data-ttu-id="b8d86-157">Normalmente, la aplicación debe mantener cierta información de los usuarios registrados y poder relacionar esta información con el identificador contenido en las notificaciones del token.</span><span class="sxs-lookup"><span data-stu-id="b8d86-157">The application usually needs to maintain some information on registered users, and be able to match this information to the identifier contained in the claims in the token.</span></span> <span data-ttu-id="b8d86-158">Por lo general, esto se consigue mediante el registro cuando el usuario accede a la aplicación por primera vez, y la información se introduce en el token como notificaciones adicionales después de cada autenticación.</span><span class="sxs-lookup"><span data-stu-id="b8d86-158">Typically this is done through registration when the user first accesses the application, and information is then injected into the token as additional claims after each authentication.</span></span>

- <span data-ttu-id="b8d86-159">Si hay más de un proveedor de identidades configurado para el STS, este debe detectar el proveedor de identidades al que se debe redirigir al usuario para la autenticación.</span><span class="sxs-lookup"><span data-stu-id="b8d86-159">If there's more than one identity provider configured for the STS, it must detect which identity provider the user should be redirected to for authentication.</span></span> <span data-ttu-id="b8d86-160">Este proceso se denomina detección de dominios de inicio.</span><span class="sxs-lookup"><span data-stu-id="b8d86-160">This process is called home realm discovery.</span></span> <span data-ttu-id="b8d86-161">El STS podría realizar este proceso automáticamente en función de una dirección de correo electrónico o un nombre de usuario que proporcione el usuario, un subdominio de la aplicación a la que accede el usuario, el ámbito de la dirección IP del usuario o el contenido de una cookie almacenada en el explorador del usuario.</span><span class="sxs-lookup"><span data-stu-id="b8d86-161">The STS might be able to do this automatically based on an email address or user name that the user provides, a subdomain of the application that the user is accessing, the user’s IP address scope, or on the contents of a cookie stored in the user’s browser.</span></span> <span data-ttu-id="b8d86-162">Por ejemplo, si el usuario escribió una dirección de correo electrónico en el dominio de Microsoft, como user@live.com, el STS redirigirá al usuario a la página de inicio de sesión de cuenta de Microsoft.</span><span class="sxs-lookup"><span data-stu-id="b8d86-162">For example, if the user entered an email address in the Microsoft domain, such as user@live.com, the STS will redirect the user to the Microsoft account sign-in page.</span></span> <span data-ttu-id="b8d86-163">En visitas posteriores, el STS podría usar una cookie para indicar que el último inicio de sesión fue con una cuenta de Microsoft.</span><span class="sxs-lookup"><span data-stu-id="b8d86-163">On later visits, the STS could use a cookie to indicate that the last sign in was with a Microsoft account.</span></span> <span data-ttu-id="b8d86-164">Si la detección automática no puede determinar el dominio de inicio, el STS mostrará una página de detección de dominios de inicio con los proveedores de identidades de confianza, entre los cuales el usuario debe seleccionar el que quiera usar.</span><span class="sxs-lookup"><span data-stu-id="b8d86-164">If automatic discovery can't determine the home realm, the STS will display a home realm discovery page that lists the trusted identity providers, and the user must select the one they want to use.</span></span>

## <a name="when-to-use-this-pattern"></a><span data-ttu-id="b8d86-165">Cuándo usar este patrón</span><span class="sxs-lookup"><span data-stu-id="b8d86-165">When to use this pattern</span></span>

<span data-ttu-id="b8d86-166">Este patrón es útil en escenarios como:</span><span class="sxs-lookup"><span data-stu-id="b8d86-166">This pattern is useful for scenarios such as:</span></span>

- <span data-ttu-id="b8d86-167">**Inicio de sesión único en la empresa**.</span><span class="sxs-lookup"><span data-stu-id="b8d86-167">**Single sign-on in the enterprise**.</span></span> <span data-ttu-id="b8d86-168">En este escenario debe autenticar a los empleados en las aplicaciones corporativas que se hospedan en la nube fuera del límite de seguridad corporativo, sin exigirles que inicien sesión cada vez que visitan una aplicación.</span><span class="sxs-lookup"><span data-stu-id="b8d86-168">In this scenario you need to authenticate employees for corporate applications that are hosted in the cloud outside the corporate security boundary, without requiring them to sign in every time they visit an application.</span></span> <span data-ttu-id="b8d86-169">La experiencia de los usuarios es la misma que cuando usan aplicaciones locales donde se autentican al iniciar sesión en una red corporativa y desde ese momento tienen acceso a todas las aplicaciones pertinentes sin necesidad de iniciar de nuevo la sesión.</span><span class="sxs-lookup"><span data-stu-id="b8d86-169">The user experience is the same as when using on-premises applications where they're authenticated when signing in to a corporate network, and from then on have access to all relevant applications without needing to sign in again.</span></span>

- <span data-ttu-id="b8d86-170">**Identidad federada con varios asociados**.</span><span class="sxs-lookup"><span data-stu-id="b8d86-170">**Federated identity with multiple partners**.</span></span> <span data-ttu-id="b8d86-171">En este escenario, debe autenticar a los usuarios corporativos y a los asociados comerciales que no tienen cuentas en el directorio corporativo.</span><span class="sxs-lookup"><span data-stu-id="b8d86-171">In this scenario you need to authenticate both corporate employees and business partners who don't have accounts in the corporate directory.</span></span> <span data-ttu-id="b8d86-172">Esta situación es común en aplicaciones de negocio a negocio, aplicaciones que se integran con servicios de terceros y en aquellos casos en que las empresas con diferentes sistemas de TI han combinado o compartido los recursos.</span><span class="sxs-lookup"><span data-stu-id="b8d86-172">This is common in business-to-business applications, applications that integrate with third-party services, and where companies with different IT systems have merged or shared resources.</span></span>

- <span data-ttu-id="b8d86-173">**Identidad federada en aplicaciones SaaS**.</span><span class="sxs-lookup"><span data-stu-id="b8d86-173">**Federated identity in SaaS applications**.</span></span> <span data-ttu-id="b8d86-174">En este escenario, fabricantes independientes de software proporcionan un servicio listo para usar para varios clientes o inquilinos.</span><span class="sxs-lookup"><span data-stu-id="b8d86-174">In this scenario independent software vendors provide a ready-to-use service for multiple clients or tenants.</span></span> <span data-ttu-id="b8d86-175">Cada inquilino se autentica mediante un proveedor de identidades adecuado.</span><span class="sxs-lookup"><span data-stu-id="b8d86-175">Each tenant authenticates using a suitable identity provider.</span></span> <span data-ttu-id="b8d86-176">Por ejemplo, los usuarios empresariales usarán sus credenciales corporativas, mientras que los consumidores y clientes del inquilino utilizarán sus credenciales de identidades sociales.</span><span class="sxs-lookup"><span data-stu-id="b8d86-176">For example, business users will use their corporate credentials, while consumers and clients of the tenant will use their social identity credentials.</span></span>

<span data-ttu-id="b8d86-177">Este patrón podría no ser útil en las siguientes situaciones:</span><span class="sxs-lookup"><span data-stu-id="b8d86-177">This pattern might not be useful in the following situations:</span></span>

- <span data-ttu-id="b8d86-178">Todos los usuarios de la aplicación se pueden autenticar mediante un proveedor de identidades, y no hay ningún requisito para autenticarlos con cualquier otro proveedor de identidades.</span><span class="sxs-lookup"><span data-stu-id="b8d86-178">All users of the application can be authenticated by one identity provider, and there's no requirement to authenticate using any other identity provider.</span></span> <span data-ttu-id="b8d86-179">Esto es habitual en aplicaciones empresariales que utilizan un directorio corporativo (accesible dentro de la aplicación) para la autenticación, mediante una VPN o (en un escenario hospedado en la nube) a través de una conexión de red virtual entre el directorio local y la aplicación.</span><span class="sxs-lookup"><span data-stu-id="b8d86-179">This is typical in business applications that use a corporate directory (accessible within the application) for authentication, by using a VPN, or (in a cloud-hosted scenario) through a virtual network connection between the on-premises directory and the application.</span></span>

- <span data-ttu-id="b8d86-180">La aplicación se creó originalmente mediante un mecanismo de autenticación diferente, quizás con almacenes de usuario personalizados, o no tiene la funcionalidad para gestionar los estándares de negociación utilizados por tecnologías basadas en notificaciones.</span><span class="sxs-lookup"><span data-stu-id="b8d86-180">The application was originally built using a different authentication mechanism, perhaps with custom user stores, or doesn't have the capability to handle the negotiation standards used by claims-based technologies.</span></span> <span data-ttu-id="b8d86-181">Retroadaptar la autenticación basada en notificaciones y el control de acceso en las aplicaciones existentes puede ser complejo y, probablemente, poco rentable.</span><span class="sxs-lookup"><span data-stu-id="b8d86-181">Retrofitting claims-based authentication and access control into existing applications can be complex, and probably not cost effective.</span></span>

## <a name="example"></a><span data-ttu-id="b8d86-182">Ejemplo</span><span class="sxs-lookup"><span data-stu-id="b8d86-182">Example</span></span>

<span data-ttu-id="b8d86-183">Una organización hospeda una aplicación de software como servicio (SaaS) multiinquilinos en Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="b8d86-183">An organization hosts a multi-tenant software as a service (SaaS) application in Microsoft Azure.</span></span> <span data-ttu-id="b8d86-184">La aplicación incluye un sitio web que los inquilinos pueden usar para administrar la aplicación para sus propios usuarios.</span><span class="sxs-lookup"><span data-stu-id="b8d86-184">The application includes a website that tenants can use to manage the application for their own users.</span></span> <span data-ttu-id="b8d86-185">La aplicación permite a los inquilinos acceder al sitio web mediante una identidad federada que genera Active Directory Federation Services (ADFS) cuando un usuario se autentica con la instancia de Active Directory propiedad de esa organización.</span><span class="sxs-lookup"><span data-stu-id="b8d86-185">The application allows tenants to access the website by using a federated identity that is generated by Active Directory Federation Services (ADFS) when a user is authenticated by that organization’s own Active Directory.</span></span>

![Cómo los usuarios de un suscriptor de una gran empresa acceden a la aplicación](./_images/federated-identity-multitenat.png)

<span data-ttu-id="b8d86-187">En la ilustración se muestra cómo los inquilinos se autentican con su propio proveedor de identidades (paso 1), en este caso ADFS.</span><span class="sxs-lookup"><span data-stu-id="b8d86-187">The figure shows how tenants authenticate with their own identity provider (step 1), in this case ADFS.</span></span> <span data-ttu-id="b8d86-188">Después de autenticar correctamente un inquilino, ADFS emite un token.</span><span class="sxs-lookup"><span data-stu-id="b8d86-188">After successfully authenticating a tenant, ADFS issues a token.</span></span> <span data-ttu-id="b8d86-189">El explorador cliente reenvía este token al proveedor de federación de la aplicación de SaaS, que confía en los tokens emitidos por el ADFS del inquilino, con el fin de devolver un token que sea válido para el proveedor de federación de SaaS (paso 2).</span><span class="sxs-lookup"><span data-stu-id="b8d86-189">The client browser forwards this token to the SaaS application’s federation provider, which trusts tokens issued by the tenant’s ADFS, in order to get back a token that is valid for the SaaS federation provider (step 2).</span></span> <span data-ttu-id="b8d86-190">Si es necesario, el proveedor de federación de SaaS realiza una transformación de las notificaciones del token en notificaciones que la aplicación reconoce (paso 3) antes de devolver el nuevo token al explorador cliente.</span><span class="sxs-lookup"><span data-stu-id="b8d86-190">If necessary, the SaaS federation provider performs a transformation on the claims in the token into claims that the application recognizes (step 3) before returning the new token to the client browser.</span></span> <span data-ttu-id="b8d86-191">La aplicación confía en los tokens emitidos por el proveedor de federación de SaaS y usa las notificaciones del token para aplicar las reglas de autorización (paso 4).</span><span class="sxs-lookup"><span data-stu-id="b8d86-191">The application trusts tokens issued by the SaaS federation provider and uses the claims in the token to apply authorization rules (step 4).</span></span>

<span data-ttu-id="b8d86-192">Los inquilinos no tienen que recordar distintas credenciales para acceder a la aplicación, y un administrador de la empresa del inquilino puede configurar en su propio ADFS la lista de usuarios que pueden acceder a la aplicación.</span><span class="sxs-lookup"><span data-stu-id="b8d86-192">Tenants won't need to remember separate credentials to access the application, and an administrator at the tenant’s company can configure in its own ADFS the list of users that can access the application.</span></span>

## <a name="related-guidance"></a><span data-ttu-id="b8d86-193">Instrucciones relacionadas</span><span class="sxs-lookup"><span data-stu-id="b8d86-193">Related guidance</span></span>

- [<span data-ttu-id="b8d86-194">Microsoft Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="b8d86-194">Microsoft Azure Active Directory</span></span>](https://azure.microsoft.com/services/active-directory/)
- [<span data-ttu-id="b8d86-195">Active Directory Domain Services</span><span class="sxs-lookup"><span data-stu-id="b8d86-195">Active Directory Domain Services</span></span>](https://msdn.microsoft.com/library/bb897402.aspx)
- [<span data-ttu-id="b8d86-196">Servicios de federación de Active Directory</span><span class="sxs-lookup"><span data-stu-id="b8d86-196">Active Directory Federation Services</span></span>](https://msdn.microsoft.com/library/bb897402.aspx)
- [<span data-ttu-id="b8d86-197">Administración de identidades para aplicaciones multiinquilino en Microsoft Azure</span><span class="sxs-lookup"><span data-stu-id="b8d86-197">Identity management for multitenant applications in Microsoft Azure</span></span>](/azure/architecture/multitenant-identity)
- [<span data-ttu-id="b8d86-198">Aplicaciones multiempresa en Azure</span><span class="sxs-lookup"><span data-stu-id="b8d86-198">Multitenant Applications in Azure</span></span>](/azure/dotnet-develop-multitenant-applications)
