---
title: Partición alrededor de límites
titleSuffix: Azure Application Architecture Guide
description: Use particiones para evitar los limites en la base de datos, la red y el proceso.
author: MikeWasson
ms.date: 08/30/2018
ms.custom: seojan19
ms.openlocfilehash: f6c0daa1b1ea469413156fdf3cd6969f98528fb3
ms.sourcegitcommit: 1f4cdb08fe73b1956e164ad692f792f9f635b409
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 01/08/2019
ms.locfileid: "54110499"
---
# <a name="partition-around-limits"></a><span data-ttu-id="c53b6-103">Partición alrededor de límites</span><span class="sxs-lookup"><span data-stu-id="c53b6-103">Partition around limits</span></span>

## <a name="use-partitioning-to-work-around-database-network-and-compute-limits"></a><span data-ttu-id="c53b6-104">Uso de particiones para evitar los limites en bases de datos, redes y procesos.</span><span class="sxs-lookup"><span data-stu-id="c53b6-104">Use partitioning to work around database, network, and compute limits</span></span>

<span data-ttu-id="c53b6-105">En la nube, todos los servicios tienen límites en cuanto a la posibilidad de escalarse verticalmente.</span><span class="sxs-lookup"><span data-stu-id="c53b6-105">In the cloud, all services have limits in their ability to scale up.</span></span> <span data-ttu-id="c53b6-106">Los límites de servicio de Azure se documentan en [Límites, cuotas y restricciones de suscripción y servicios de Azure][azure-limits].</span><span class="sxs-lookup"><span data-stu-id="c53b6-106">Azure service limits are documented in [Azure subscription and service limits, quotas, and constraints][azure-limits].</span></span> <span data-ttu-id="c53b6-107">Los límites incluyen el número de núcleos, el tamaño de base de datos, el rendimiento de consultas y el rendimiento de la red.</span><span class="sxs-lookup"><span data-stu-id="c53b6-107">Limits include number of cores, database size, query throughput, and network throughput.</span></span> <span data-ttu-id="c53b6-108">Si el sistema crece lo suficiente, puede alcanzar uno o varios de estos límites.</span><span class="sxs-lookup"><span data-stu-id="c53b6-108">If your system grows sufficiently large, you may hit one or more of these limits.</span></span> <span data-ttu-id="c53b6-109">Use particiones para evitar estos límites.</span><span class="sxs-lookup"><span data-stu-id="c53b6-109">Use partitioning to work around these limits.</span></span>

<span data-ttu-id="c53b6-110">Existen muchas maneras de crear particiones de un sistema, como:</span><span class="sxs-lookup"><span data-stu-id="c53b6-110">There are many ways to partition a system, such as:</span></span>

- <span data-ttu-id="c53b6-111">Crear particiones de una base de datos para evitar límites en el tamaño de la base de datos, la E/S de datos o el número de sesiones simultáneas.</span><span class="sxs-lookup"><span data-stu-id="c53b6-111">Partition a database to avoid limits on database size, data I/O, or number of concurrent sessions.</span></span>

- <span data-ttu-id="c53b6-112">Crear particiones de una cola o un bus de mensajes para evitar límites en el número de solicitudes o el número de conexiones simultáneas.</span><span class="sxs-lookup"><span data-stu-id="c53b6-112">Partition a queue or message bus to avoid limits on the number of requests or the number of concurrent connections.</span></span>

- <span data-ttu-id="c53b6-113">Crear particiones de una aplicación web de App Service para evitar límites en el número de instancias por plan de App Service.</span><span class="sxs-lookup"><span data-stu-id="c53b6-113">Partition an App Service web app to avoid limits on the number of instances per App Service plan.</span></span>

<span data-ttu-id="c53b6-114">Se pueden crear particiones en una base de datos *horizontalmente*, *verticalmente* o *funcionalmente*.</span><span class="sxs-lookup"><span data-stu-id="c53b6-114">A database can be partitioned *horizontally*, *vertically*, or *functionally*.</span></span>

- <span data-ttu-id="c53b6-115">En la creación de particiones horizontal, también denominada particionamiento, cada partición contiene datos de un subconjunto del conjunto de datos total.</span><span class="sxs-lookup"><span data-stu-id="c53b6-115">In horizontal partitioning, also called sharding, each partition holds data for a subset of the total data set.</span></span> <span data-ttu-id="c53b6-116">Las particiones comparten el mismo esquema de datos.</span><span class="sxs-lookup"><span data-stu-id="c53b6-116">The partitions share the same data schema.</span></span> <span data-ttu-id="c53b6-117">Por ejemplo, los clientes cuyos nombres comiencen por A&ndash;M entran en una partición, los que comiencen por N&ndash;Z en otra, etc.</span><span class="sxs-lookup"><span data-stu-id="c53b6-117">For example, customers whose names start with A&ndash;M go into one partition, N&ndash;Z into another partition.</span></span>

- <span data-ttu-id="c53b6-118">En el particionamiento vertical, cada partición contiene un subconjunto de los campos de los elementos del almacén de datos.</span><span class="sxs-lookup"><span data-stu-id="c53b6-118">In vertical partitioning, each partition holds a subset of the fields for the items in the data store.</span></span> <span data-ttu-id="c53b6-119">Por ejemplo, colocar los campos a los que se accede con frecuencia en una partición y a los que se accede raramente en otra.</span><span class="sxs-lookup"><span data-stu-id="c53b6-119">For example, put frequently accessed fields in one partition, and less frequently accessed fields in another.</span></span>

- <span data-ttu-id="c53b6-120">En el particionamiento funcional, los datos se particionan según cómo se usan en cada contexto limitado en el sistema.</span><span class="sxs-lookup"><span data-stu-id="c53b6-120">In functional partitioning, data is partitioned according to how it is used by each bounded context in the system.</span></span> <span data-ttu-id="c53b6-121">Por ejemplo, almacenar los datos de facturas en una partición y los de inventario de productos en otra.</span><span class="sxs-lookup"><span data-stu-id="c53b6-121">For example, store invoice data in one partition and product inventory data in another.</span></span> <span data-ttu-id="c53b6-122">Los esquemas son independientes.</span><span class="sxs-lookup"><span data-stu-id="c53b6-122">The schemas are independent.</span></span>

<span data-ttu-id="c53b6-123">Para obtener instrucciones más detalladas, consulte [Data partitioning][data-partitioning-guidance] (Creación de particiones de los datos).</span><span class="sxs-lookup"><span data-stu-id="c53b6-123">For more detailed guidance, see [Data partitioning][data-partitioning-guidance].</span></span>

## <a name="recommendations"></a><span data-ttu-id="c53b6-124">Recomendaciones</span><span class="sxs-lookup"><span data-stu-id="c53b6-124">Recommendations</span></span>

<span data-ttu-id="c53b6-125">**Crear particiones de distintas partes de la aplicación**.</span><span class="sxs-lookup"><span data-stu-id="c53b6-125">**Partition different parts of the application**.</span></span> <span data-ttu-id="c53b6-126">Las bases de datos son candidatas obvias a la creación de particiones, pero otras son el almacenamiento, la caché, las colas y las instancias de proceso.</span><span class="sxs-lookup"><span data-stu-id="c53b6-126">Databases are one obvious candidate for partitioning, but also consider storage, cache, queues, and compute instances.</span></span>

<span data-ttu-id="c53b6-127">**Diseñar la clave de partición para evitar zonas activas**.</span><span class="sxs-lookup"><span data-stu-id="c53b6-127">**Design the partition key to avoid hot spots**.</span></span> <span data-ttu-id="c53b6-128">Si se crean particiones de una base de datos, pero una partición todavía obtiene la mayoría de las solicitudes, el problema sigue ahí.</span><span class="sxs-lookup"><span data-stu-id="c53b6-128">If you partition a database, but one shard still gets the majority of the requests, then you haven't solved your problem.</span></span> <span data-ttu-id="c53b6-129">Lo mejor es que la carga se distribuya de manera uniforme entre todas las particiones.</span><span class="sxs-lookup"><span data-stu-id="c53b6-129">Ideally, load gets distributed evenly across all the partitions.</span></span> <span data-ttu-id="c53b6-130">Por ejemplo, código hash por id. de cliente y no la primera letra del nombre del cliente, ya que algunas letras son más frecuentes.</span><span class="sxs-lookup"><span data-stu-id="c53b6-130">For example, hash by customer ID and not the first letter of the customer name, because some letters are more frequent.</span></span> <span data-ttu-id="c53b6-131">El mismo principio se aplica al crear particiones de una cola de mensajes.</span><span class="sxs-lookup"><span data-stu-id="c53b6-131">The same principle applies when partitioning a message queue.</span></span> <span data-ttu-id="c53b6-132">Elija una clave de partición que lleve a una distribución uniforme de los mensajes en el conjunto de colas.</span><span class="sxs-lookup"><span data-stu-id="c53b6-132">Pick a partition key that leads to an even distribution of messages across the set of queues.</span></span> <span data-ttu-id="c53b6-133">Para más información, consulte [Particionamiento][sharding].</span><span class="sxs-lookup"><span data-stu-id="c53b6-133">For more information, see [Sharding][sharding].</span></span>

<span data-ttu-id="c53b6-134">**Partición alrededor de los límites de suscripción y servicio de Azure**.</span><span class="sxs-lookup"><span data-stu-id="c53b6-134">**Partition around Azure subscription and service limits**.</span></span> <span data-ttu-id="c53b6-135">Los servicios y componentes individuales tienen límites, pero también los hay para las suscripciones y los grupos de recursos.</span><span class="sxs-lookup"><span data-stu-id="c53b6-135">Individual components and services have limits, but there are also limits for subscriptions and resource groups.</span></span> <span data-ttu-id="c53b6-136">En el caso de aplicaciones muy grandes, puede que deba crear particiones en torno a esos límites.</span><span class="sxs-lookup"><span data-stu-id="c53b6-136">For very large applications, you might need to partition around those limits.</span></span>

<span data-ttu-id="c53b6-137">**Partición en niveles diferentes**.</span><span class="sxs-lookup"><span data-stu-id="c53b6-137">**Partition at different levels**.</span></span> <span data-ttu-id="c53b6-138">Considere un servidor de base de datos implementado en una máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="c53b6-138">Consider a database server deployed on a VM.</span></span> <span data-ttu-id="c53b6-139">La máquina virtual tiene un disco duro virtual que está respaldado por Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="c53b6-139">The VM has a VHD that is backed by Azure Storage.</span></span> <span data-ttu-id="c53b6-140">La cuenta de almacenamiento pertenece a una suscripción de Azure.</span><span class="sxs-lookup"><span data-stu-id="c53b6-140">The storage account belongs to an Azure subscription.</span></span> <span data-ttu-id="c53b6-141">Tenga en cuenta que cada paso de la jerarquía tiene límites.</span><span class="sxs-lookup"><span data-stu-id="c53b6-141">Notice that each step in the hierarchy has limits.</span></span> <span data-ttu-id="c53b6-142">El servidor de base de datos puede tener un límite de grupo de conexiones.</span><span class="sxs-lookup"><span data-stu-id="c53b6-142">The database server may have a connection pool limit.</span></span> <span data-ttu-id="c53b6-143">Las máquinas virtuales tienen límites de CPU y red.</span><span class="sxs-lookup"><span data-stu-id="c53b6-143">VMs have CPU and network limits.</span></span> <span data-ttu-id="c53b6-144">El almacenamiento tiene límites de IOPS.</span><span class="sxs-lookup"><span data-stu-id="c53b6-144">Storage has IOPS limits.</span></span> <span data-ttu-id="c53b6-145">La suscripción tiene límites en el número de núcleos de la máquina virtual.</span><span class="sxs-lookup"><span data-stu-id="c53b6-145">The subscription has limits on the number of VM cores.</span></span> <span data-ttu-id="c53b6-146">Por lo general, es más fácil crear particiones en los niveles inferiores de la jerarquía.</span><span class="sxs-lookup"><span data-stu-id="c53b6-146">Generally, it's easier to partition lower in the hierarchy.</span></span> <span data-ttu-id="c53b6-147">Solo las aplicaciones de gran tamaño deben crear particiones en el nivel de suscripción.</span><span class="sxs-lookup"><span data-stu-id="c53b6-147">Only large applications should need to partition at the subscription level.</span></span>

<!-- links -->

[azure-limits]: /azure/azure-subscription-service-limits
[data-partitioning-guidance]: ../../best-practices/data-partitioning.md
[sharding]: ../../patterns/sharding.md
