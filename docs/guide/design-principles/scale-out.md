---
title: Diseño de escalado horizontal
titleSuffix: Azure Application Architecture Guide
description: Las aplicaciones en la nube deben diseñarse para el escalado horizontal.
author: MikeWasson
ms.date: 08/30/2018
ms.custom: seojan19
ms.openlocfilehash: 9e8a36146c711fda2b03e00dfeb3554caf1fd5f0
ms.sourcegitcommit: 1f4cdb08fe73b1956e164ad692f792f9f635b409
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 01/08/2019
ms.locfileid: "54113066"
---
# <a name="design-to-scale-out"></a><span data-ttu-id="603e0-103">Diseño de escalado horizontal</span><span class="sxs-lookup"><span data-stu-id="603e0-103">Design to scale out</span></span>

## <a name="design-your-application-so-that-it-can-scale-horizontally"></a><span data-ttu-id="603e0-104">Diseñe la aplicación para que se pueda escalar horizontalmente.</span><span class="sxs-lookup"><span data-stu-id="603e0-104">Design your application so that it can scale horizontally</span></span>

<span data-ttu-id="603e0-105">Una ventaja importante de la nube es el escalado elástico: la capacidad de usar tanta capacidad según sea necesario, escalando horizontalmente cuando aumente la carga y reduciendo horizontalmente cuando no se requiera la capacidad adicional.</span><span class="sxs-lookup"><span data-stu-id="603e0-105">A primary advantage of the cloud is elastic scaling &mdash; the ability to use as much capacity as you need, scaling out as load increases, and scaling in when the extra capacity is not needed.</span></span> <span data-ttu-id="603e0-106">Diseñe la aplicación para que pueda escalarse horizontalmente, agregando o quitando nuevas instancias a medida que se requiera.</span><span class="sxs-lookup"><span data-stu-id="603e0-106">Design your application so that it can scale horizontally, adding or removing new instances as demand requires.</span></span>

## <a name="recommendations"></a><span data-ttu-id="603e0-107">Recomendaciones</span><span class="sxs-lookup"><span data-stu-id="603e0-107">Recommendations</span></span>

<span data-ttu-id="603e0-108">**Evite la permanencia de las instancias**.</span><span class="sxs-lookup"><span data-stu-id="603e0-108">**Avoid instance stickiness**.</span></span> <span data-ttu-id="603e0-109">La permanencia, o *la afinidad de la sesión*, se produce cuando las solicitudes del mismo cliente se enrutan siempre al mismo servidor.</span><span class="sxs-lookup"><span data-stu-id="603e0-109">Stickiness, or *session affinity*, is when requests from the same client are always routed to the same server.</span></span> <span data-ttu-id="603e0-110">La permanencia limita la capacidad de la aplicación de escalar horizontalmente. Por ejemplo, el tráfico de un usuario de gran volumen no se distribuirá entre las instancias.</span><span class="sxs-lookup"><span data-stu-id="603e0-110">Stickiness limits the application's ability to scale out. For example, traffic from a high-volume user will not be distributed across instances.</span></span> <span data-ttu-id="603e0-111">Entre las causas de esta permanencia está el almacenamiento del estado de sesión en la memoria y el uso de claves específicas del equipo para el cifrado.</span><span class="sxs-lookup"><span data-stu-id="603e0-111">Causes of stickiness include storing session state in memory, and using machine-specific keys for encryption.</span></span> <span data-ttu-id="603e0-112">Asegúrese de que cualquier instancia puede controlar cualquier solicitud.</span><span class="sxs-lookup"><span data-stu-id="603e0-112">Make sure that any instance can handle any request.</span></span>

<span data-ttu-id="603e0-113">**Identifique los cuellos de botella**.</span><span class="sxs-lookup"><span data-stu-id="603e0-113">**Identify bottlenecks**.</span></span> <span data-ttu-id="603e0-114">El escalado horizontal no es una solución mágica para todos los problemas de rendimiento.</span><span class="sxs-lookup"><span data-stu-id="603e0-114">Scaling out isn't a magic fix for every performance issue.</span></span> <span data-ttu-id="603e0-115">Por ejemplo, si la base de datos de back-end es el cuello de botella, no ayudará el hecho de agregar más servidores web.</span><span class="sxs-lookup"><span data-stu-id="603e0-115">For example, if your backend database is the bottleneck, it won't help to add more web servers.</span></span> <span data-ttu-id="603e0-116">Identifique y resuelva los cuellos de botella del equipo antes de lanzar más instancias al problema.</span><span class="sxs-lookup"><span data-stu-id="603e0-116">Identify and resolve the bottlenecks in the system first, before throwing more instances at the problem.</span></span> <span data-ttu-id="603e0-117">Los elementos con estado del sistema son la causa más probable de los cuellos de botella.</span><span class="sxs-lookup"><span data-stu-id="603e0-117">Stateful parts of the system are the most likely cause of bottlenecks.</span></span>

<span data-ttu-id="603e0-118">**Descomponga las cargas de trabajo de acuerdo con los requisitos de escalabilidad.**</span><span class="sxs-lookup"><span data-stu-id="603e0-118">**Decompose workloads by scalability requirements.**</span></span>  <span data-ttu-id="603e0-119">A menudo, las aplicaciones constan de varias cargas de trabajo, con diferentes requisitos para el escalado.</span><span class="sxs-lookup"><span data-stu-id="603e0-119">Applications often consist of multiple workloads, with different requirements for scaling.</span></span> <span data-ttu-id="603e0-120">Por ejemplo, una aplicación podría tener un sitio orientado al público y un sitio de administración independiente.</span><span class="sxs-lookup"><span data-stu-id="603e0-120">For example, an application might have a public-facing site and a separate administration site.</span></span> <span data-ttu-id="603e0-121">El sitio público puede experimentar un repentino aumento de tráfico, mientras que el sitio de administración tiene una carga más pequeña y predecible.</span><span class="sxs-lookup"><span data-stu-id="603e0-121">The public site may experience sudden surges in traffic, while the administration site has a smaller, more predictable load.</span></span>

<span data-ttu-id="603e0-122">**Descargue tareas que consumen muchos recursos.**</span><span class="sxs-lookup"><span data-stu-id="603e0-122">**Offload resource-intensive tasks.**</span></span> <span data-ttu-id="603e0-123">Las tareas que requieren una gran cantidad de CPU o recursos de E/S se deben mover a [trabajos en segundo plano][background-jobs] cuando sea posible, a fin de reducir la carga en el front-end que está controlando las solicitudes de usuario.</span><span class="sxs-lookup"><span data-stu-id="603e0-123">Tasks that require a lot of CPU or I/O resources should be moved to [background jobs][background-jobs] when possible, to minimize the load on the front end that is handling user requests.</span></span>

<span data-ttu-id="603e0-124">**Use características de escalado automático integrado**.</span><span class="sxs-lookup"><span data-stu-id="603e0-124">**Use built-in autoscaling features**.</span></span> <span data-ttu-id="603e0-125">Muchos servicios de proceso de Azure tienen compatibilidad integrada con el escalado automático.</span><span class="sxs-lookup"><span data-stu-id="603e0-125">Many Azure compute services have built-in support for autoscaling.</span></span> <span data-ttu-id="603e0-126">Si la aplicación tiene una carga de trabajo predecible y regular, aplique el escalado horizontal según una programación.</span><span class="sxs-lookup"><span data-stu-id="603e0-126">If the application has a predictable, regular workload, scale out on a schedule.</span></span> <span data-ttu-id="603e0-127">Por ejemplo, escale horizontalmente durante el horario laboral.</span><span class="sxs-lookup"><span data-stu-id="603e0-127">For example, scale out during business hours.</span></span> <span data-ttu-id="603e0-128">En caso contrario, si la carga de trabajo no es predecible, use métricas de rendimiento como la longitud de cola de solicitudes o la CPU para activar el escalado automático.</span><span class="sxs-lookup"><span data-stu-id="603e0-128">Otherwise, if the workload is not predictable, use performance metrics such as CPU or request queue length to trigger autoscaling.</span></span> <span data-ttu-id="603e0-129">Para conocer los procedimientos recomendados del escalado automático, consulte [Autoscaling][autoscaling] (Escalado automático).</span><span class="sxs-lookup"><span data-stu-id="603e0-129">For autoscaling best practices, see [Autoscaling][autoscaling].</span></span>

<span data-ttu-id="603e0-130">**Considere la posibilidad de utilizar un escalado automático agresivo para cargas de trabajo críticas**.</span><span class="sxs-lookup"><span data-stu-id="603e0-130">**Consider aggressive autoscaling for critical workloads**.</span></span> <span data-ttu-id="603e0-131">En el caso de las cargas de trabajo críticas, probablemente deseará anticiparse a la demanda.</span><span class="sxs-lookup"><span data-stu-id="603e0-131">For critical workloads, you want to keep ahead of demand.</span></span> <span data-ttu-id="603e0-132">Es mejor agregar nuevas instancias rápidamente bajo una carga intensa para controlar el tráfico adicional y, a continuación, reducir el escalado gradualmente.</span><span class="sxs-lookup"><span data-stu-id="603e0-132">It's better to add new instances quickly under heavy load to handle the additional traffic, and then gradually scale back.</span></span>

<span data-ttu-id="603e0-133">**Aplique un diseño para la reducción horizontal**.</span><span class="sxs-lookup"><span data-stu-id="603e0-133">**Design for scale in**.</span></span>  <span data-ttu-id="603e0-134">Recuerde que con el escalado elástico, la aplicación tendrá períodos de reducción horizontal durante los cuales se quitan instancias.</span><span class="sxs-lookup"><span data-stu-id="603e0-134">Remember that with elastic scale, the application will have periods of scale in, when instances get removed.</span></span> <span data-ttu-id="603e0-135">La aplicación debe administrar correctamente las instancias que se quitan.</span><span class="sxs-lookup"><span data-stu-id="603e0-135">The application must gracefully handle instances being removed.</span></span> <span data-ttu-id="603e0-136">Aquí se muestran algunas maneras de controlar la reducción horizontal:</span><span class="sxs-lookup"><span data-stu-id="603e0-136">Here are some ways to handle scalein:</span></span>

- <span data-ttu-id="603e0-137">Escuche los eventos de apagado (cuando estén disponibles) y apague correctamente.</span><span class="sxs-lookup"><span data-stu-id="603e0-137">Listen for shutdown events (when available) and shut down cleanly.</span></span>
- <span data-ttu-id="603e0-138">Los clientes o los consumidores de un servicio deben admitir el control de errores transitorios y el reintento.</span><span class="sxs-lookup"><span data-stu-id="603e0-138">Clients/consumers of a service should support transient fault handling and retry.</span></span>
- <span data-ttu-id="603e0-139">Para las tareas de ejecución prolongada, considere la posibilidad de dividir el trabajo, utilizando los puntos de control o el patrón [Pipes and Filters][pipes-filters-pattern].</span><span class="sxs-lookup"><span data-stu-id="603e0-139">For long-running tasks, consider breaking up the work, using checkpoints or the [Pipes and Filters][pipes-filters-pattern] pattern.</span></span>
- <span data-ttu-id="603e0-140">Coloque los elementos de trabajo en una cola para que otra instancia puede recoger el trabajo, en caso de que se quite una instancia en medio de procesamiento.</span><span class="sxs-lookup"><span data-stu-id="603e0-140">Put work items on a queue so that another instance can pick up the work, if an instance is removed in the middle of processing.</span></span>

<!-- links -->

[autoscaling]: ../../best-practices/auto-scaling.md
[background-jobs]: ../../best-practices/background-jobs.md
[pipes-filters-pattern]: ../../patterns/pipes-and-filters.md
