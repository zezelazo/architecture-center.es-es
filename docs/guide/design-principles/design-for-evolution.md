---
title: Diseño para cambiar
description: Un diseño evolutivo es clave para una innovación continua.
author: MikeWasson
ms.date: 08/30/2018
ms.openlocfilehash: df5a2d0756295a9632b3ea336527b2fbfb35318c
ms.sourcegitcommit: f6be2825bf2d37dfe25cfab92b9e3973a6b51e16
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 10/08/2018
ms.locfileid: "48858153"
---
# <a name="design-for-evolution"></a><span data-ttu-id="5bd79-103">Diseño para evolucionar</span><span class="sxs-lookup"><span data-stu-id="5bd79-103">Design for evolution</span></span>

## <a name="an-evolutionary-design-is-key-for-continuous-innovation"></a><span data-ttu-id="5bd79-104">Un diseño evolutivo es clave para una innovación continua.</span><span class="sxs-lookup"><span data-stu-id="5bd79-104">An evolutionary design is key for continuous innovation</span></span>

<span data-ttu-id="5bd79-105">Todas las aplicaciones que tienen éxito cambian a lo largo del tiempo para corregir errores, agregar nuevas características, incorporar nuevas tecnologías o hacer que los sistemas existentes sean más resistentes y escalables.</span><span class="sxs-lookup"><span data-stu-id="5bd79-105">All successful applications change over time, whether to fix bugs, add new features, bring in new technologies, or make existing systems more scalable and resilient.</span></span> <span data-ttu-id="5bd79-106">Si todas las partes de una aplicación están estrechamente acopladas, resulta muy difícil introducir cambios en el sistema.</span><span class="sxs-lookup"><span data-stu-id="5bd79-106">If all the parts of an application are tightly coupled, it becomes very hard to introduce changes into the system.</span></span> <span data-ttu-id="5bd79-107">Un cambio en una parte de la aplicación puede interrumpir otra parte o provocar cambios que se propaguen por todo el código base.</span><span class="sxs-lookup"><span data-stu-id="5bd79-107">A change in one part of the application may break another part, or cause changes to ripple through the entire codebase.</span></span>

<span data-ttu-id="5bd79-108">Este problema no se limita a las aplicaciones monolíticas.</span><span class="sxs-lookup"><span data-stu-id="5bd79-108">This problem is not limited to monolithic applications.</span></span> <span data-ttu-id="5bd79-109">Una aplicación puede estar dividida en servicios pero seguir mostrando el tipo de estrecho acoplamiento que deja el sistema rígido y frágil.</span><span class="sxs-lookup"><span data-stu-id="5bd79-109">An application can be decomposed into services, but still exhibit the sort of tight coupling that leaves the system rigid and brittle.</span></span> <span data-ttu-id="5bd79-110">Pero cuando los servicios están diseñados para evolucionar, los equipos pueden innovar y proporcionar continuamente nuevas características.</span><span class="sxs-lookup"><span data-stu-id="5bd79-110">But when services are designed to evolve, teams can innovate and continuously deliver new features.</span></span> 

<span data-ttu-id="5bd79-111">Los microservicios se están convirtiendo en una manera popular de lograr un diseño evolutivo, ya que abordan muchos de los aspectos que se enumeran aquí.</span><span class="sxs-lookup"><span data-stu-id="5bd79-111">Microservices are becoming a popular way to achieve an evolutionary design, because they address many of the considerations listed here.</span></span>

## <a name="recommendations"></a><span data-ttu-id="5bd79-112">Recomendaciones</span><span class="sxs-lookup"><span data-stu-id="5bd79-112">Recommendations</span></span>

<span data-ttu-id="5bd79-113">**Exigir una cohesión alta y un acoplamiento flexible**.</span><span class="sxs-lookup"><span data-stu-id="5bd79-113">**Enforce high cohesion and loose coupling**.</span></span> <span data-ttu-id="5bd79-114">Un servicio está *cohesionado* si proporciona una funcionalidad que está unida de forma lógica.</span><span class="sxs-lookup"><span data-stu-id="5bd79-114">A service is *cohesive* if it provides functionality that logically belongs together.</span></span> <span data-ttu-id="5bd79-115">Unos servicios tienen un *acoplamiento flexible* si puede cambiar un servicio sin cambiar el otro.</span><span class="sxs-lookup"><span data-stu-id="5bd79-115">Services are *loosely coupled* if you can change one service without changing the other.</span></span> <span data-ttu-id="5bd79-116">Una cohesión alta significa, en general, que los cambios en una función requerirán realizar cambios en otras funciones relacionadas.</span><span class="sxs-lookup"><span data-stu-id="5bd79-116">High cohesion generally means that changes in one function will require changes in other related functions.</span></span> <span data-ttu-id="5bd79-117">Si cree que la actualización de un servicio requiere actualizaciones coordinadas con otros servicios, puede ser una señal de que los servicios no están cohesionados.</span><span class="sxs-lookup"><span data-stu-id="5bd79-117">If you find that updating a service requires coordinated updates to other services, it may be a sign that your services are not cohesive.</span></span> <span data-ttu-id="5bd79-118">Uno de los objetivos del diseño basado en el dominio (DDD) es identificar estos límites.</span><span class="sxs-lookup"><span data-stu-id="5bd79-118">One of the goals of domain-driven design (DDD) is to identify those boundaries.</span></span>

<span data-ttu-id="5bd79-119">**Encapsular el conocimiento del dominio**.</span><span class="sxs-lookup"><span data-stu-id="5bd79-119">**Encapsulate domain knowledge**.</span></span> <span data-ttu-id="5bd79-120">Cuando un cliente utiliza un servicio, la responsabilidad de aplicar las reglas de negocio del dominio no debe recaer en el cliente.</span><span class="sxs-lookup"><span data-stu-id="5bd79-120">When a client consumes a service, the responsibility for enforcing the business rules of the domain should not fall on the client.</span></span> <span data-ttu-id="5bd79-121">En su lugar, el servicio debe encapsular todo el conocimiento del dominio que recae bajo su responsabilidad.</span><span class="sxs-lookup"><span data-stu-id="5bd79-121">Instead, the service should encapsulate all of the domain knowledge that falls under its responsibility.</span></span> <span data-ttu-id="5bd79-122">De lo contrario, cada cliente debería aplicar las reglas de negocio y se tendría un conocimiento del dominio propagado por distintas partes de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="5bd79-122">Otherwise, every client has to enforce the business rules, and you end up with domain knowledge spread across different parts of the application.</span></span> 

<span data-ttu-id="5bd79-123">**Utilizar la mensajería asincrónica**.</span><span class="sxs-lookup"><span data-stu-id="5bd79-123">**Use asynchronous messaging**.</span></span> <span data-ttu-id="5bd79-124">La mensajería asincrónica es una manera de desacoplar el productor de mensajes del consumidor.</span><span class="sxs-lookup"><span data-stu-id="5bd79-124">Asynchronous messaging is a way to decouple the message producer from the consumer.</span></span> <span data-ttu-id="5bd79-125">El productor no depende de que el consumidor responda al mensaje o realice una acción determinada.</span><span class="sxs-lookup"><span data-stu-id="5bd79-125">The producer does not depend on the consumer responding to the message or taking any particular action.</span></span> <span data-ttu-id="5bd79-126">Con una arquitectura de publicación/suscripción, es posible que el productor ni siquiera sepa quién consume el mensaje.</span><span class="sxs-lookup"><span data-stu-id="5bd79-126">With a pub/sub architecture, the producer may not even know who is consuming the message.</span></span> <span data-ttu-id="5bd79-127">Unos servicios nuevos puedan consumir fácilmente los mensajes sin ninguna modificación en el productor.</span><span class="sxs-lookup"><span data-stu-id="5bd79-127">New services can easily consume the messages without any modifications to the producer.</span></span>

<span data-ttu-id="5bd79-128">**No crear el conocimiento del dominio en una puerta de enlace**.</span><span class="sxs-lookup"><span data-stu-id="5bd79-128">**Don't build domain knowledge into a gateway**.</span></span> <span data-ttu-id="5bd79-129">Las puertas de enlace pueden ser útiles en una arquitectura de microservicios para cosas como enrutamiento de solicitud, traducción de protocolos, equilibrio de carga o autenticación.</span><span class="sxs-lookup"><span data-stu-id="5bd79-129">Gateways can be useful in a microservices architecture, for things like request routing, protocol translation, load balancing, or authentication.</span></span> <span data-ttu-id="5bd79-130">Sin embargo, la puerta de enlace debe estar restringida a este tipo de funcionalidad de infraestructura.</span><span class="sxs-lookup"><span data-stu-id="5bd79-130">However, the gateway should be restricted to this sort of infrastructure functionality.</span></span> <span data-ttu-id="5bd79-131">No debe implementar ningún conocimiento del dominio para evitar convertirse en una dependencia intensa.</span><span class="sxs-lookup"><span data-stu-id="5bd79-131">It should not implement any domain knowledge, to avoid becoming a heavy dependency.</span></span>

<span data-ttu-id="5bd79-132">**Exponer interfaces abiertas**.</span><span class="sxs-lookup"><span data-stu-id="5bd79-132">**Expose open interfaces**.</span></span> <span data-ttu-id="5bd79-133">Evite crear capas de traducción personalizadas que residan entre los servicios.</span><span class="sxs-lookup"><span data-stu-id="5bd79-133">Avoid creating custom translation layers that sit between services.</span></span> <span data-ttu-id="5bd79-134">En su lugar, un servicio debe exponer una API con un contrato de API bien definido.</span><span class="sxs-lookup"><span data-stu-id="5bd79-134">Instead, a service should expose an API with a well-defined API contract.</span></span> <span data-ttu-id="5bd79-135">La API debería ser tener control de versiones, para que la API pueda evolucionar mientras se mantiene la compatibilidad con versiones anteriores.</span><span class="sxs-lookup"><span data-stu-id="5bd79-135">The API should be versioned, so that you can evolve the API while maintaining backward compatibility.</span></span> <span data-ttu-id="5bd79-136">De este modo, puede actualizar un servicio sin coordinar las actualizaciones de todos los servicios ascendentes que dependen de él.</span><span class="sxs-lookup"><span data-stu-id="5bd79-136">That way, you can update a service without coordinating updates to all of the upstream services that depend on it.</span></span> <span data-ttu-id="5bd79-137">Los servicios orientados al público deben exponer una API de RESTful a través de HTTP.</span><span class="sxs-lookup"><span data-stu-id="5bd79-137">Public facing services should expose a RESTful API over HTTP.</span></span> <span data-ttu-id="5bd79-138">Los servicios back-end pueden usar un protocolo de mensajería de estilo RPC por motivos de rendimiento.</span><span class="sxs-lookup"><span data-stu-id="5bd79-138">Backend services might use an RPC-style messaging protocol for performance reasons.</span></span> 

<span data-ttu-id="5bd79-139">**Diseñar y probar mediante contratos de servicio**.</span><span class="sxs-lookup"><span data-stu-id="5bd79-139">**Design and test against service contracts**.</span></span> <span data-ttu-id="5bd79-140">Cuando los servicios exponen unas API bien definidas, puede desarrollar y probar mediante estas API.</span><span class="sxs-lookup"><span data-stu-id="5bd79-140">When services expose well-defined APIs, you can develop and test against those APIs.</span></span> <span data-ttu-id="5bd79-141">De este modo, puede desarrollar y probar un servicio individual sin poner en marcha todos sus servicios dependientes.</span><span class="sxs-lookup"><span data-stu-id="5bd79-141">That way, you can develop and test an individual service without spinning up all of its dependent services.</span></span> <span data-ttu-id="5bd79-142">(Por supuesto, seguiría realizando la integración y la prueba de carga en los servicios reales.)</span><span class="sxs-lookup"><span data-stu-id="5bd79-142">(Of course, you would still perform integration and load testing against the real services.)</span></span>

<span data-ttu-id="5bd79-143">**Infraestructura abstracta fuera de la lógica del dominio**.</span><span class="sxs-lookup"><span data-stu-id="5bd79-143">**Abstract infrastructure away from domain logic**.</span></span> <span data-ttu-id="5bd79-144">No permita que la lógica del dominio se mezcle con una funcionalidad relacionada con la infraestructura, como la mensajería o la persistencia.</span><span class="sxs-lookup"><span data-stu-id="5bd79-144">Don't let domain logic get mixed up with infrastructure-related functionality, such as messaging or persistence.</span></span> <span data-ttu-id="5bd79-145">En caso contrario, los cambios en la lógica del dominio requerirán actualizaciones en las capas de infraestructura y viceversa.</span><span class="sxs-lookup"><span data-stu-id="5bd79-145">Otherwise, changes in the domain logic will require updates to the infrastructure layers and vice versa.</span></span> 

<span data-ttu-id="5bd79-146">**Descargar cuestiones transversales en un servicio independiente**.</span><span class="sxs-lookup"><span data-stu-id="5bd79-146">**Offload cross-cutting concerns to a separate service**.</span></span> <span data-ttu-id="5bd79-147">Por ejemplo, si varios servicios necesitan autenticar solicitudes, puede mover esta funcionalidad a su propio servicio.</span><span class="sxs-lookup"><span data-stu-id="5bd79-147">For example, if several services need to authenticate requests, you could move this functionality into its own service.</span></span> <span data-ttu-id="5bd79-148">Puede desarrollar luego el servicio de autenticación &mdash;por ejemplo, agregando un nuevo flujo de autenticación&mdash; sin tocar ninguno de los servicios que lo usan.</span><span class="sxs-lookup"><span data-stu-id="5bd79-148">Then you could evolve the authentication service &mdash; for example, by adding a new authentication flow &mdash; without touching any of the services that use it.</span></span>

<span data-ttu-id="5bd79-149">**Implementar servicios de forma independiente**.</span><span class="sxs-lookup"><span data-stu-id="5bd79-149">**Deploy services independently**.</span></span> <span data-ttu-id="5bd79-150">Cuando el equipo de DevOps puede implementar un único servicio independientemente de otros servicios de la aplicación, las actualizaciones pueden realizarse de forma más rápida y segura.</span><span class="sxs-lookup"><span data-stu-id="5bd79-150">When the DevOps team can deploy a single service independently of other services in the application, updates can happen more quickly and safely.</span></span> <span data-ttu-id="5bd79-151">Las correcciones de errores y las nuevas características pueden implementarse a un ritmo más regular.</span><span class="sxs-lookup"><span data-stu-id="5bd79-151">Bug fixes and new features can be rolled out at a more regular cadence.</span></span> <span data-ttu-id="5bd79-152">Diseñe la aplicación y el proceso de lanzamiento para que admitan actualizaciones independientes.</span><span class="sxs-lookup"><span data-stu-id="5bd79-152">Design both the application and the release process to support independent updates.</span></span>
